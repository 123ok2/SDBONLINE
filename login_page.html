<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒêƒÉng Nh·∫≠p H·ªá th·ªëng S·ªï ƒê·∫ßu B√†i</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fc; /* N·ªÅn tr·∫Øng xanh nh·∫π nh√†ng */
            background-image: linear-gradient(135deg, #f0f4f8 0%, #e8eaf0 100%); /* H∆°i gradient */
            overflow-y: auto;
        }

        /* --- T√ôY CH·ªàNH M√ÄU S·∫ÆC M·ªöI (MODERN & CLEAN) --- */
        .primary-color { background-color: #1A479F; } /* Xanh ƒë·∫≠m, m·∫°nh m·∫Ω */
        .primary-text { color: #1A479F; }
        .accent-color { background-color: #F8B400; } /* V√†ng cam t∆∞∆°i t·∫Øn */
        .accent-text { color: #F8B400; }

        /* --- KEYFRAMES V√Ä SHADOW --- */
        @keyframes spinner {
            to { transform: rotate(360deg); }
        }
        .is-loading .loading-spinner {
            animation: spinner 0.8s linear infinite;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        #auth-container {
            animation: fadeIn 0.8s ease-out forwards;
        }
        
        /* ƒê·ªï b√≥ng s√¢u, r√µ r√†ng h∆°n */
        .shadow-modern {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1), 0 3px 6px rgba(0, 0, 0, 0.05);
        }

        /* --- HI·ªÜU ·ª®NG FOCUS CHO INPUT --- */
        input:focus {
            box-shadow: 0 0 0 3px rgba(26, 71, 159, 0.3); /* Ring color blue nh·∫°t */
            border-color: #1A479F !important;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">

    <div id="auth-container" class="w-full max-w-sm bg-white p-6 shadow-modern rounded-xl border-t-4 border-[#1A479F] transition duration-500 opacity-0 transform translate-y-5">
        
        <div class="text-center mb-6">
            <div class="mx-auto w-12 h-12 primary-color rounded-lg flex items-center justify-center mb-2 shadow-md">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
            </div>
            <h1 class="text-xl font-extrabold primary-text">S·ªî ƒê·∫¶U B√ÄI ONLINE</h1>
            <h2 class="text-sm text-gray-600 mt-1">H·ªá th·ªëng PTDTBT THU THU C√öC</h2>
        </div>

        <p id="message" class="text-center text-sm mb-4 min-h-[1.5rem]"></p>

        <div class="space-y-4">
            <div>
                <label for="email" class="block text-xs font-medium text-gray-700 mb-1">EMAIL</label>
                <input type="email" id="email" class="w-full px-4 py-2 border border-gray-300 rounded-lg transition duration-300" placeholder="example@email.com">
            </div>
            <div>
                <label for="password" class="block text-xs font-medium text-gray-700 mb-1">M·∫¨T KH·∫®U</label>
                <input type="password" id="password" class="w-full px-4 py-2 border border-gray-300 rounded-lg transition duration-300" placeholder="********">
            </div>
            
            <div class="flex space-x-3 pt-1"> 
                
                <button onclick="handleLogin()" id="login-button" class="w-1/2 flex justify-center items-center py-2.5 px-4 border border-transparent rounded-lg shadow-md text-lg font-bold text-white primary-color hover:bg-[#153B83] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#F8B400] transition duration-300 ease-in-out transform hover:scale-[1.01]">
                    <span class="loading-icon flex items-center">
                        üîë ƒêƒÉng Nh·∫≠p
                    </span>
                </button>
                
                <button onclick="handleRegister()" id="register-button" class="w-1/2 flex justify-center items-center py-2.5 px-4 border border-transparent rounded-lg shadow-md text-lg font-bold text-white accent-color hover:bg-[#D99A00] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#1A479F] transition duration-300 ease-in-out transform hover:scale-[1.01]">
                    <span class="loading-icon flex items-center">
                        ‚úçÔ∏è ƒêƒÉng K√Ω
                    </span>
                </button>
            </div>
            
            <div class="text-center pt-2">
                <a href="#" class="text-sm accent-text hover:underline font-medium">Qu√™n m·∫≠t kh·∫©u?</a>
            </div>
        </div>
    </div>
    
    <div class="mt-8 text-center text-xs text-gray-600">
        <p class="font-bold mb-1 primary-text">H·ªó tr·ª£ k·ªπ thu·∫≠t:</p>
        <p>Ph√°t tri·ªÉn b·ªüi: <span class="font-black accent-text">Developer Duy H·∫°nh</span></p>
        <p>Email: <a href="mailto:duyconghanh2017@gmail.com" class="primary-text hover:underline font-medium">duyconghanh2017@gmail.com</a> | SƒêT: <span class="font-medium">0868.640.898</span></p>
        <p class="mt-2 text-gray-500">B·∫£n quy·ªÅn &copy; 2024. All rights reserved.</p>
    </div>


    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        // C·∫§U H√åNH FIREBASE (GI·ªÆ NGUY√äN)
        const firebaseConfig = {
            apiKey: "AIzaSyDLkqxwvJHVzB_PhsYWnI2R8yWe4kyRwJ8",
            authDomain: "okok-d34a7.firebaseapp.com",
            projectId: "okok-d34a7",
            storageBucket: "okok-d34a7.firebasestorage.app",
            messagingSenderId: "131453877704",
            appId: "1:131453877704:web:62b32f9e9cab317e2194fd",
            measurementId: "G-0M1XEXL9K6"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const messageElement = document.getElementById('message');
        const loginButton = document.getElementById('login-button');
        const registerButton = document.getElementById('register-button');

        // Hi·ªÉn th·ªã th√¥ng b√°o
        function showMessage(text, isError = false) {
            messageElement.textContent = text;
            messageElement.className = isError 
                ? "text-center text-sm mb-4 text-red-600 font-bold bg-red-100 p-2 rounded-lg" 
                : "text-center text-sm mb-4 text-green-600 font-bold bg-green-100 p-2 rounded-lg";
        }

        // T√°c ƒë·ªông l√™n c√°c n√∫t khi Loading
        function toggleButtons(disabled, btnId) {
            const btn = document.getElementById(btnId);
            const iconSpan = btn.querySelector('.loading-icon');
            
            btn.disabled = disabled;
            btn.classList.toggle('opacity-70', disabled);
            btn.classList.toggle('is-loading', disabled);
            
            if (disabled) {
                iconSpan.innerHTML = `
                    <svg class="loading-spinner h-5 w-5 mr-3 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4">
                        <circle cx="12" cy="12" r="10" stroke-opacity="0.25"></circle>
                        <path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10C22 6.477 17.523 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z" fill="currentColor"></path>
                    </svg>
                    ƒêang x·ª≠ l√Ω...
                `;
            } else {
                if (btnId === 'login-button') {
                    iconSpan.innerHTML = 'üîë ƒêƒÉng Nh·∫≠p';
                } else if (btnId === 'register-button') {
                    iconSpan.innerHTML = '‚úçÔ∏è ƒêƒÉng K√Ω';
                }
            }

            if (btnId === 'login-button') {
                registerButton.disabled = disabled;
                registerButton.classList.toggle('opacity-50', disabled);
            } else if (btnId === 'register-button') {
                loginButton.disabled = disabled;
                loginButton.classList.toggle('opacity-50', disabled);
            }
        }

        // X·ª≠ l√Ω ƒêƒÉng Nh·∫≠p
        window.handleLogin = async function() {
            const email = emailInput.value;
            const password = passwordInput.value;

            if (!email || !password) {
                showMessage("Vui l√≤ng nh·∫≠p Email v√† M·∫≠t kh·∫©u.", true);
                return;
            }

            showMessage("ƒêang ƒëƒÉng nh·∫≠p...", false);
            toggleButtons(true, 'login-button');

            try {
                const userCredential = await signInWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;
                showMessage(`ƒêƒÉng nh·∫≠p th√†nh c√¥ng! Ch√†o m·ª´ng, ${user.email}`, false);
                console.log("User logged in:", user);
                
                await new Promise(resolve => setTimeout(resolve, 500)); 
                window.location.href = "home.html";

            } catch (error) {
                console.error("Login Error:", error.code);
                let errorMessage = "ƒêƒÉng nh·∫≠p th·∫•t b·∫°i. Vui l√≤ng ki·ªÉm tra l·∫°i.";
                switch (error.code) {
                    case 'auth/invalid-email':
                    case 'auth/invalid-credential':
                        errorMessage = "Email ho·∫∑c m·∫≠t kh·∫©u kh√¥ng ch√≠nh x√°c.";
                        break;
                    case 'auth/user-disabled':
                        errorMessage = "T√†i kho·∫£n n√†y ƒë√£ b·ªã v√¥ hi·ªáu h√≥a.";
                        break;
                    default:
                        errorMessage = `L·ªói: ${error.message}`;
                        break;
                }
                showMessage(errorMessage, true);
            } finally {
                toggleButtons(false, 'login-button');
            }
        }

        // X·ª≠ l√Ω ƒêƒÉng K√Ω (ƒê√£ comment ·∫©n)
       /* window.handleRegister = async function() {
            const email = emailInput.value;
            const password = passwordInput.value;

            if (!email || !password) {
                showMessage("Vui l√≤ng nh·∫≠p Email v√† M·∫≠t kh·∫©u.", true);
                return;
            }

            if (password.length < 6) {
                showMessage("M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 6 k√Ω t·ª±.", true);
                return;
            }

            showMessage("ƒêang ƒëƒÉng k√Ω t√†i kho·∫£n m·ªõi...", false);
            toggleButtons(true, 'register-button'); 

            try {
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;
                showMessage(`ƒêƒÉng k√Ω th√†nh c√¥ng! B·∫°n ƒë√£ ƒë∆∞·ª£c ƒëƒÉng nh·∫≠p l√† ${user.email}`, false);
                console.log("User registered:", user);
                
                await new Promise(resolve => setTimeout(resolve, 500)); 
                window.location.href = "home.html";

            } catch (error) {
                console.error("Register Error:", error.code);
                let errorMessage = "ƒêƒÉng k√Ω th·∫•t b·∫°i. Vui l√≤ng th·ª≠ l·∫°i.";
                switch (error.code) {
                    case 'auth/email-already-in-use':
                        errorMessage = "Email n√†y ƒë√£ ƒë∆∞·ª£c s·ª≠ d·ª•ng. Vui l√≤ng ƒëƒÉng nh·∫≠p.";
                        break;
                    case 'auth/weak-password':
                        errorMessage = "M·∫≠t kh·∫©u qu√° y·∫øu (c·∫ßn √≠t nh·∫•t 6 k√Ω t·ª±).";
                        break;
                    case 'auth/invalid-email':
                        errorMessage = "ƒê·ªãa ch·ªâ email kh√¥ng h·ª£p l·ªá.";
                        break;
                    default:
                        errorMessage = `L·ªói: ${error.message}`;
                        break;
                }
                showMessage(errorMessage, true);
            } finally {
                toggleButtons(false, 'register-button'); 
            }
        }
        */
        // Hi·ªÉn th·ªã kh·ªëi ƒëƒÉng nh·∫≠p m∆∞·ª£t m√† sau khi t·∫£i trang
        document.getElementById('auth-container').style.opacity = '1';
        document.getElementById('auth-container').style.transform = 'translateY(0)';
        
        // Kh·ªüi t·∫°o tr·∫°ng th√°i ban ƒë·∫ßu
        showMessage("Nh·∫≠p email v√† m·∫≠t kh·∫©u ƒë·ªÉ b·∫Øt ƒë·∫ßu.", false);

    </script>
</body>
</html>