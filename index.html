<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PTDTBT THCS THU C√öC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <link rel="stylesheet" href="styles.css"> 
    <style>
        /* CSS C∆† B·∫¢N V√Ä THI·∫æT L·∫¨P FONT (N·∫æU C√ì) */
        body {
            background-color: #f2f5f8; /* N·ªÅn x√°m xanh r·∫•t nh·∫°t */
        }
        
        /* --- [M·ªöI] STYLE CHO CH·ªÆ CH·∫†Y (MARQUEE) --- */
        #marquee-container {
            flex-grow: 1; /* Cho ph√©p n√≥ m·ªü r·ªông l·∫•p ƒë·∫ßy kho·∫£ng tr·ªëng */
            margin: 0 2rem;
            height: 30px; /* Chi·ªÅu cao c·ªë ƒë·ªãnh */
            overflow: hidden; /* Quan tr·ªçng: Gi·∫•u ph·∫ßn ch·ªØ b·ªã tr√†n */
            white-space: nowrap; /* Quan tr·ªçng: Gi·ªØ ch·ªØ tr√™n m·ªôt d√≤ng */
            display: flex;
            align-items: center;
        }

        #marquee-text {
            display: inline-block;
            animation: marquee-motion 60s linear infinite; /* Th·ªùi gian ch·∫°y: 15 gi√¢y */
            padding-left: 100%; /* ƒê·∫£m b·∫£o ch·ªØ b·∫Øt ƒë·∫ßu t·ª´ ngo√†i c√πng b√™n ph·∫£i */
        }
        
        /* Keyframes: ƒê·ªãnh nghƒ©a hi·ªáu ·ª©ng ch·∫°y */
        @keyframes marquee-motion {
            0% { transform: translateX(0); } /* B·∫Øt ƒë·∫ßu ·ªü v·ªã tr√≠ 0 (sau padding-left: 100%) */
            100% { transform: translateX(-100%); } /* K·∫øt th√∫c ·ªü v·ªã tr√≠ -100% (ch·∫°y h·∫øt n·ªôi dung) */
        }
        /* ------------------------------------------------ */

        /* --- STYLE CHO MENU NGANG (NAVBAR) --- */
        .navbar-top {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 40; 
            background-color: white;
            box-shadow: 0 1px 10px rgba(0, 0, 0, 0.08); 
            padding: 0; 
        }
        
        /* D·∫£i bƒÉng th∆∞∆°ng hi·ªáu - ƒê√É ƒê·ªîI SANG T√îNG ƒê·ªé ƒê√î */
        .branding-strip {
            background-color: #031caa; /* M√†u ƒê·ªè ƒê√¥ (Red-800) */
            color: white;
            padding: 0.5rem 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        /* Menu Wrapper - Th√™m t√≠nh nƒÉng cu·ªôn ngang */
        /* Menu Wrapper - ƒê√£ s·ª≠a l·ªói overflow */
        .menu-wrapper {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            padding: 0 2rem; 
            border-bottom: 2px solid #e2e8f0; 
            
            /* ƒê√£ g·ª° b·ªè overflow-x: auto v√† c√°c thu·ªôc t√≠nh ·∫©n cu·ªôn */
            /* ƒêi·ªÅu n√†y C·∫¶N THI·∫æT ƒë·ªÉ menu c·∫•p 2 c√≥ th·ªÉ n·ªïi l√™n */
            position: relative; /* Th√™m v√†o ƒë·ªÉ ƒë·∫£m b·∫£o ng·ªØ c·∫£nh x·∫øp ch·ªìng (z-index) */
            z-index: 45;        /* ƒê·∫∑t cao h∆°n header (40) nh∆∞ng th·∫•p h∆°n dropdown (50) */
        }
        /* (Kh√¥ng c·∫ßn .menu-wrapper::-webkit-scrollbar n·ªØa) */
        .menu-nav {
            display: flex;
            white-space: nowrap;
            width: max-content;
        }
        
        /* Style cho c√°c m·ª•c menu C·∫§P 1 (MENU-ITEM) */
        .menu-item {
            position: relative; 
            padding: 0.75rem 1rem;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
            font-weight: 500; 
            color: #000000; /* text-slate-600 */
        }
        .menu-item:hover {
            background-color: #fef2f2; /* hover:bg-red-50 */
            color: #ef4444; /* text-red-500 */
        }
        .menu-item.active {
            color: #ef4444; /* text-red-500 */
            font-weight: 700; 
        }
        .menu-item.active::after {
            content: '';
            position: absolute;
            bottom: -2px; 
            left: 0;
            width: 100%;
            height: 2px;
            background-color: #ef4444;
        }
        .menu-item ion-icon {
            margin-right: 0.4rem;
            font-size: 1.15rem; 
        }
        
        /* ===== [M·ªöI] STYLE CHO MENU DROPDOWN C·∫§P 2 ===== */
        .menu-item-dropdown {
            position: relative;
        }
        .menu-item-dropdown .dropdown-content {
            display: none; /* M·∫∑c ƒë·ªãnh ·∫©n */
            position: absolute;
            top: 100%;
            left: 0;
            background-color: white;
            min-width: 200px; /* ƒê·ªô r·ªông t·ªëi thi·ªÉu */
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            z-index: 50;
            border: 1px solid #e2e8f0;
            border-radius: 0 0 0.5rem 0.5rem;
            overflow: hidden;
            animation: fadeIn 0.2s ease-out;
        }
        /* Hi·ªÉn th·ªã khi c√≥ class 'open' */
        .menu-item-dropdown.open .dropdown-content {
            display: block;
        }
        /* Item con (c·∫•p 2) */
        .dropdown-content .dropdown-item {
            padding: 0.75rem 1.25rem;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
            font-weight: 500; 
            color: #000000; /* text-slate-600 */
        }
        .dropdown-content .dropdown-item:hover {
            background-color: #fef2f2; /* hover:bg-red-50 */
            color: #ef4444; /* text-red-500 */
        }
        .dropdown-content .dropdown-item ion-icon {
            margin-right: 0.5rem;
            font-size: 1.1rem;
        }
        /* Nh√£n menu c·∫•p 1 (ch·ª©a dropdown) */
        .menu-item-dropdown > .menu-item-label {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
            font-weight: 500; 
            color: #000000; /* text-slate-600 */
            position: relative; /* Cho g·∫°ch ch√¢n active */
        }
        .menu-item-dropdown > .menu-item-label:hover {
            background-color: #fef2f2; /* hover:bg-red-50 */
            color: #ef4444; /* text-red-500 */
        }
        /* Style 'active' cho group dropdown */
        .menu-item-dropdown.active > .menu-item-label {
            color: #ef4444; /* text-red-500 */
            font-weight: 700; 
        }
        .menu-item-dropdown.active > .menu-item-label::after {
            content: '';
            position: absolute;
            bottom: -2px; 
            left: 0;
            width: 100%;
            height: 2px;
            background-color: #ef4444;
        }
        .menu-item-dropdown > .menu-item-label ion-icon {
            margin-right: 0.4rem;
            font-size: 1.15rem;
        }
        /* =============================================== */

        /* --- STYLE CHO MAIN CONTENT --- */
        .main-content-wrapper {
            padding-top: 8rem; 
            flex: 1;
            padding-left: 2rem;
            padding-right: 2rem;
            padding-bottom: 2rem;
        }
        .main-content-area {
            min-height: calc(100vh - 10rem); 
            border-radius: 0.75rem; 
        }
        
        /* --- STYLE CHO USER DROPDOWN (ƒê√É TINH CH·ªàNH T√ôY BI·∫æN THEO N·ªòI DUNG) --- */
        .user-profile-dropdown {
            position: relative;
        }
        .info-box-dropdown {
            position: absolute;
            right: 0;
            top: 100%;
            margin-top: 0.75rem;
            /* ƒê√É B·ªé fixed width: 19rem */
            width: max-content; /* M·ªü r·ªông theo n·ªôi dung */
            min-width: 25rem; /* ƒê·ªô r·ªông t·ªëi thi·ªÉu ƒë·ªÉ kh√¥ng qu√° h·∫πp */
            max-width: 40rem; /* ƒê·ªô r·ªông t·ªëi ƒëa ƒë·ªÉ kh√¥ng qu√° r·ªông */
            background-color: rgb(255, 255, 255);
            border-radius: 0.75rem; 
            padding: 0; 
            box-shadow: 0 10px 20px -5px rgba(0, 0, 0, 0.2); 
            z-index: 50;
            border: 1px solid #e5e7eb;
            animation: fadeIn 0.3s ease-out; 
            overflow: hidden; 
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* --- STYLE CHO BRANDING TEXT --- */
        .school-name-h2 {
            font-size: 1rem; /* Thay v√¨ text-0.4xl, d√πng 1rem */
            white-space: nowrap;
        }
        .app-name-span {
            font-size: 0.75rem; /* Thay v√¨ text-0.5xl, d√πng 0.75rem (text-sm) */
        }
        
        /* ===== [M·ªöI] STYLE CHUNG CHO C√ÅC POPUP TO√ÄN M√ÄN H√åNH ===== */
        /* √Åp d·ª•ng cho contact-modal, onboarding-popup v√† greeting-popup */
        .fullscreen-modal {
            transition: opacity 0.3s ease, visibility 0.3s ease;
            opacity: 0;
            visibility: hidden; /* D√πng visibility ƒë·ªÉ ƒë·∫£m b·∫£o kh√¥ng click xuy√™n qua ƒë∆∞·ª£c */
        }
        .fullscreen-modal.show {
            opacity: 1;
            visibility: visible;
        }
        /* ======================================================== */
    </style>
</head>
<body class="min-h-screen flex flex-col text-gray-800">

    <header class="navbar-top"> 
        
        <div class="branding-strip">
            <div class="flex items-center">
                <ion-icon name="book-outline" class="text-3xl mr-3"></ion-icon> 
                <div class="flex flex-col items-start">
                     <div class="hidden md:block school-name-h2 font-extrabold text-white" id="header-school-name-display">
                        ƒêang t·∫£i t√™n tr∆∞·ªùng...
                     </div>
                    <span class="app-name-span font-extrabold tracking-wide">S·ªï ƒê·∫ßu B√†i Online</span>
                </div>
            </div>
            
            <div id="marquee-container">
                <p id="marquee-text" class="text-lg font-medium tracking-wide text-red-100"></p>
            </div>
            <div class="user-profile-dropdown">
                
<button id="user-info-button" onclick="toggleDropdown()" class="flex items-center 
        bg-red-700 hover:bg-red-600 text-white 
        p-2 pl-4 rounded-full transition duration-300 
        shadow-md hover:shadow-lg border border-red-800">                    <span id="user-info-name-short" class="font-semibold text-sm">ƒêang t·∫£i...</span>
                    <ion-icon name="person-circle-outline" class="text-3xl ml-2"></ion-icon>
                </button>

                <div id="user-dropdown-content" class="info-box-dropdown hidden 
     shadow-2xl border border-gray-300 rounded-lg overflow-hidden 
     w-80 transform origin-top-right z-50 bg-white"> 
    
    <div class="px-5 pt-4 pb-3 bg-red-800 text-white shadow-md">
        <div class="flex items-center justify-between">
            <div id="user-info-name" class="font-black text-2xl tracking-wide truncate">ƒêang t·∫£i...</div> 
            <div class="text-xs font-bold bg-green-500 px-2 py-0.5 rounded-full shadow-lg">ONLINE</div>
        </div>
        <div id="user-info-email" class="text-sm text-red-100 truncate mt-1">user@example.com</div>
        <div class="text-xs font-semibold text-red-300 mt-2">T√ÄI KHO·∫¢N GI√ÅO VI√äN</div>
    </div>
    
    <div class="px-5 py-4 bg-gray-50 border-b border-gray-200"> 
        <div class="text-sm text-gray-800 space-y-4">
            
            <div id="user-info-subject" class="flex justify-between items-center pb-2 border-b border-gray-200">
                <div class="flex items-center space-x-2 flex-shrink-0">
                    <ion-icon name="bookmarks-outline" class="text-xl text-red-600"></ion-icon>
                    <span class="font-semibold text-gray-600 uppercase">M√îN H·ªåC</span> 
                </div>
                <span class="bg-red-100 text-red-800 text-xs font-extrabold px-3 py-1 rounded-full shadow-sm tracking-wider whitespace-nowrap">
                    KHTN 1
                </span>
            </div>
            
            <div id="user-info-school" class="flex justify-between items-start pt-2">
                <div class="flex items-center space-x-2 flex-shrink-0">
                    <ion-icon name="business-outline" class="text-xl text-blue-700"></ion-icon>
                    <span class="font-semibold text-gray-600 uppercase">ƒê∆†N V·ªä</span> 
                </div>
                <span class="text-sm font-bold text-gray-800 text-right whitespace-nowrap ml-2">
                    PTDTBT THCS THU C√öC
                </span>
            </div>
        </div>
    </div>
    <div class="px-4 py-3 bg-gray-50 flex flex-col space-y-2">
        
        <button onclick="document.getElementById('contact-modal').classList.add('show'); toggleDropdown();" 
                class="contact-button w-full flex items-center space-x-2 py-2 px-3 text-sm font-semibold text-gray-700 
                       hover:text-purple-700 hover:bg-gray-200 rounded-md transition duration-150">
            <ion-icon name="help-circle-outline" class="text-xl text-purple-600"></ion-icon>
            <span>Trung t√¢m H·ªó tr·ª£ & Tr·ª£ gi√∫p</span> 
        </button>
        
        <button onclick="handleLogout()" id="logout-button" 
                class="logout-button-v2 w-full flex items-center justify-center space-x-2 py-2.5 px-3 text-sm font-bold text-white 
                       bg-red-700 rounded-lg hover:bg-red-800 shadow-lg transition duration-150"> 
            <ion-icon name="log-out-outline" class="text-lg"></ion-icon> 
            <span>K·∫æT TH√öC PHI√äN L√ÄM VI·ªÜC</span>
        </button>
    </div>
</div>
                </div>
        </div>
        
        <div class="menu-wrapper">
            <nav class="menu-nav"> 
                
                <div id="menu-group-1" class="menu-item-dropdown" onclick="toggleMenuDropdown(event, this)">
                    <div class="menu-item-label">
                        <ion-icon name="calendar-outline"></ion-icon>
                        Qu·∫£n l√Ω TKB
                        <ion-icon name="chevron-down-outline" class="ml-1 text-xs"></ion-icon>
                    </div>
                    <div class="dropdown-content">
                        <div id="menu-1" class="dropdown-item" onclick="loadContent('menu1_tkb.html', this, 'menu-group-1')">
                            <ion-icon name="calendar-outline"></ion-icon>
                            Nh·∫≠p TKB C√° Nh√¢n
                        </div>
                        <div id="menu-9" class="dropdown-item" onclick="loadContent('menu9_tra_cuu.html', this, 'menu-group-1')">
                            <ion-icon name="search-circle-outline"></ion-icon>
                            Tra C·ª©u TKB
                        </div>
                    </div>
                </div>
                
                <div id="menu-group-2" class="menu-item-dropdown" onclick="toggleMenuDropdown(event, this)">
                    <div class="menu-item-label">
                        <ion-icon name="create-outline"></ion-icon>
                        S·ªï ƒê·∫ßu B√†i
                        <ion-icon name="chevron-down-outline" class="ml-1 text-xs"></ion-icon>
                    </div>
                    <div class="dropdown-content">
                        <div id="menu-2" class="dropdown-item" onclick="loadContent('menu2_sdb.html', this, 'menu-group-2')">
                            <ion-icon name="create-outline"></ion-icon>
                            Ghi S·ªï ƒê·∫ßu B√†i
                        </div>
                        <div id="menu-3" class="dropdown-item" onclick="loadContent('menu3_history.html', this, 'menu-group-2')">
                            <ion-icon name="archive-outline"></ion-icon>
                            L·ªãch S·ª≠ Ghi
                        </div>
                    </div>
                </div>
                
                <div id="menu-group-4" class="menu-item-dropdown" onclick="toggleMenuDropdown(event, this)">
                    <div class="menu-item-label">
                        <ion-icon name="bar-chart-outline"></ion-icon>
                        B√°o C√°o
                        <ion-icon name="chevron-down-outline" class="ml-1 text-xs"></ion-icon>
                    </div>
                    <div class="dropdown-content">
                        <div id="menu-4" class="dropdown-item" onclick="loadContent('menu4_report.html', this, 'menu-group-4')">
                            <ion-icon name="alert-circle-outline"></ion-icon>
                            B√°o C√°o Gi√°o Vi√™n
                        </div>
                        <div id="menu-7" class="dropdown-item" onclick="loadContent('menu7_admin_report.html', this, 'menu-group-4')">
                            <ion-icon name="people-circle-outline"></ion-icon>
                            B√°o C√°o To√†n Tr∆∞·ªùng
                        </div>
                    </div>
                </div>

                <div id="menu-5" class="menu-item" onclick="loadContent('menu5_class_sdb.html', this)">
                    <ion-icon name="book-outline"></ion-icon>
                    SƒêB Theo L·ªõp
                </div>
                <div id="menu-6" class="menu-item" onclick="loadContent('menu6_ranking.html', this)">
                    <ion-icon name="podium-outline"></ion-icon>
                    X·∫øp H·∫°ng GV
                </div>
                <div id="menu-8" class="menu-item" onclick="loadContent('huong_dan_su_dung.html', this)">
                    <ion-icon name="help-circle-outline"></ion-icon> H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng
                </div>
                
            </nav>
        </div>
        </header>

    <main class="main-content-wrapper">
        <div id="main-content" class="bg-white p-10 rounded-xl shadow-lg main-content-area"> 
            <h1 class="text-3xl font-extrabold text-gray-800 loading-text">ƒêang t·∫£i n·ªôi dung...</h1>
        </div>
    </main>

    <div id="contact-modal" class="fixed inset-0 bg-gray-900 bg-opacity-70 flex items-center justify-center z-50 fullscreen-modal">
        <div id="contact-modal-content" class="bg-white p-8 rounded-2xl shadow-3xl max-w-md w-full">
            <div class="flex justify-between items-start mb-6 border-b pb-3">
                <h2 class="text-2xl font-bold text-indigo-600 flex items-center">
                    <ion-icon name="person-circle-outline" class="mr-3 text-3xl"></ion-icon>
                    Li√™n h·ªá T√°c gi·∫£
                </h2>
                <button onclick="document.getElementById('contact-modal').classList.remove('show')" class="text-gray-400 hover:text-gray-600 transition">
                    <ion-icon name="close-circle-outline" class="text-3xl"></ion-icon>
                </button>
            </div>
            
            <div class="space-y-4">
                <div class="flex items-center contact-detail-item">
                    <ion-icon name="call-outline" class="text-2xl text-indigo-500 mr-4"></ion-icon>
                    <div>
                        <div class="text-xs font-semibold text-gray-500">ƒêi·ªán tho·∫°i</div>
                        <a href="tel:0868640898" class="text-lg font-medium text-gray-800 hover:text-indigo-600 transition">0868.640.898</a>
                    </div>
                </div>
                
                <div class="flex items-center contact-detail-item">
                    <ion-icon name="mail-outline" class="text-2xl text-indigo-500 mr-4"></ion-icon>
                    <div>
                        <div class="text-xs font-semibold text-gray-500">Email</div>
                        <a href="mailto:duyconghanh2017@gmail.com" class="text-lg font-medium text-gray-800 hover:text-indigo-600 transition truncate">duyconghanh2017@gmail.com</a>
                    </div>
                </div>
                
                <div class="flex items-center contact-detail-item">
                    <ion-icon name="location-outline" class="text-2xl text-indigo-500 mr-4"></ion-icon>
                    <div>
                        <div class="text-xs font-semibold text-gray-500">ƒê·ªãa ch·ªâ</div>
                        <div class="text-lg font-medium text-gray-800">Thu C√∫c, T√¢n S∆°n, Ph√∫ Th·ªç</div>
                    </div>
                </div>
                
                <div class="flex items-center contact-detail-item">
                    <ion-icon name="logo-facebook" class="text-2xl text-indigo-500 mr-4"></ion-icon>
                    <div>
                        <div class="text-xs font-semibold text-gray-500">Facebook</div>
                        <a href="https://facebook.com/1994duyhanh" target="_blank" class="text-lg font-medium text-gray-800 hover:text-indigo-600 transition">facebook.com/1994duyhanh</a>
                    </div>
                </div>
            </div>

            <button onclick="document.getElementById('contact-modal').classList.remove('show')" class="mt-6 w-full py-2 bg-indigo-500 text-white font-semibold rounded-lg hover:bg-indigo-600 transition duration-200">
                ƒê√≥ng
            </button>

        </div>
    </div>
    
    <div id="greeting-popup" class="fixed inset-0 bg-gray-900 bg-opacity-70 flex items-center justify-center z-50 fullscreen-modal">
        <div class="bg-white p-8 rounded-2xl shadow-2xl max-w-lg w-full text-center">
            <h2 id="greeting-title" class="text-2xl font-extrabold text-indigo-600 mb-4"></h2>
            <p id="greeting-message" class="text-xl text-gray-700 mb-6"></p>
            <button onclick="document.getElementById('greeting-popup').classList.remove('show')" 
                    class="py-3 px-8 bg-red-600 text-white font-semibold rounded-xl hover:bg-red-700 transition duration-200 shadow-lg">
                Tuy·ªát v·ªùi!
            </button>
        </div>
    </div>
    
    <div id="onboarding-popup" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 fullscreen-modal">
        <div class="bg-white p-10 rounded-2xl shadow-2xl max-w-md w-full onboarding-popup-content"> 
            <h2 class="text-3xl font-bold text-indigo-600 mb-6 border-b pb-2">üëã Ch√†o m·ª´ng!</h2>
            <p class="mb-6 text-gray-700 text-base">ƒê·ªÉ ti·∫øp t·ª•c s·ª≠ d·ª•ng, vui l√≤ng c·∫≠p nh·∫≠t th√¥ng tin c∆° b·∫£n c·ªßa b·∫°n (H·ªç t√™n, M√¥n, Tr∆∞·ªùng).</p>
            <form id="onboarding-form">
                <div class="mb-4">
                    <label for="ho-ten" class="block text-sm font-medium text-gray-700 mb-1">H·ªç v√† T√™n</label>
                    <input type="text" id="ho-ten" required class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-150">
                </div>
                <div class="mb-4">
                    <label for="mon-hoc" class="block text-sm font-medium text-gray-700 mb-1">M√¥n D·∫°y</label>
                    <input type="text" id="mon-hoc" required class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-150">
                </div>
                <div class="mb-6">
                    <label for="truong-hoc" class="block text-sm font-medium text-gray-700 mb-1">Tr∆∞·ªùng H·ªçc</label>
                    <input type="text" id="truong-hoc" required class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-150">
                </div>
                <button type="submit" id="save-profile-button" class="w-full py-3 px-6 bg-indigo-600 text-white font-semibold rounded-xl hover:bg-indigo-700 transition duration-200 shadow-lg"> 
                    L∆∞u Th√¥ng Tin
                </button>
            </form>
        </div>
    </div>


    <script type="module">
        // Import c√°c h√†m c·∫ßn thi·∫øt t·ª´ Firebase SDK
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        // Import Firestore (C·∫ßn thi·∫øt cho Onboarding)
        import { getFirestore, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // C·∫•u h√¨nh Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyDLkqxwvJHVzB_PhsYWnI2R8yWe4kyRwJ8",
            authDomain: "okok-d34a7.firebaseapp.com",
            projectId: "okok-d34a7",
            storageBucket: "okok-d34a7.firebasestorage.app",
            messagingSenderId: "131453877704",
            appId: "1:131453877704:web:62b32f9e9cab317e2194fd",
            measurementId: "G-0M1XEXL9K6"
        };

        // Kh·ªüi t·∫°o Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app); // Kh·ªüi t·∫°o Firestore
        
        const onboardingPopup = document.getElementById('onboarding-popup');
        const onboardingForm = document.getElementById('onboarding-form');
        const saveProfileButton = document.getElementById('save-profile-button');
        const mainContent = document.getElementById('main-content');
        const userDropdownContent = document.getElementById('user-dropdown-content');
        const contactModal = document.getElementById('contact-modal'); // L·∫•y contact modal

        let currentUserId = null;

        // START: LOGIC CHO POPUP CH√ÄO M·ª™NG THEO TH·ªúI GIAN TH·ª∞C
        const greetingPopup = document.getElementById('greeting-popup');
        const greetingTitle = document.getElementById('greeting-title');
        const greetingMessage = document.getElementById('greeting-message');

        // H√†m l·∫•y l·ªùi ch√†o ƒëa d·∫°ng theo th·ªùi gian th·ª±c
        function getGreetingByTime(userName) { 
            const hour = new Date().getHours();
            let title;
            let messages;
            
            // S·ª¨ D·ª§NG T√äN ƒê·∫¶Y ƒê·ª¶ ƒê√É C·∫¨P NH·∫¨T T·ª™ FIRESTORE
            const displayUserName = userName || "Gi√°o vi√™n"; 

            if (hour >= 5 && hour < 12) {
                // Bu·ªïi s√°ng (5h - 11h59)
                title = `Ch√†o bu·ªïi s√°ng, ${displayUserName}!`; 
                messages = [
                    "Ch√∫c b·∫°n m·ªôt ng√†y h·ªçc t·∫≠p h·ª©ng kh·ªüi, tr√†n ƒë·∫ßy nƒÉng l∆∞·ª£ng v√† hi·ªáu qu·∫£! ‚òÄÔ∏è",
                    "M·ªói ng√†y l√† m·ªôt kh·ªüi ƒë·∫ßu m·ªõi. Ch√∫c b·∫°n lan t·ªèa ngu·ªìn c·∫£m h·ª©ng t·ªët ƒë·∫πp nh·∫•t ƒë·∫øn h·ªçc tr√≤! ‚ú®",
                    "Ch√∫c b·∫°n c√≥ nh·ªØng ti·∫øt d·∫°y th√†nh c√¥ng v√† nh·∫≠n ƒë∆∞·ª£c nhi·ªÅu ni·ªÅm vui t·ª´ b·ª•c gi·∫£ng! üìö",
                    "Ch√∫c b·∫°n m·ªôt ng√†y l√†m vi·ªác su√¥n s·∫ª v√† g·∫∑t h√°i nhi·ªÅu k·∫øt qu·∫£ t·ªët ƒë·∫πp! üí™"
                ];
            } else if (hour >= 12 && hour < 18) {
                // Bu·ªïi chi·ªÅu (12h - 17h59)
                title = `Ch√†o bu·ªïi chi·ªÅu, ${displayUserName}!`; 
                messages = [
                    "Th·ªùi gian l√†m vi·ªác bu·ªïi chi·ªÅu ƒë√£ b·∫Øt ƒë·∫ßu! Ch√∫c b·∫°n gi·ªØ v·ªØng tinh th·∫ßn v√† ho√†n th√†nh t·ªët nhi·ªám v·ª•! ‚òï",
                    "Bu·ªïi chi·ªÅu tr√¥i qua th·∫≠t nhanh. Ch√∫c b·∫°n c√≥ nh·ªØng kho·∫£nh kh·∫Øc ƒë√°ng nh·ªõ c√πng h·ªçc sinh! üçé",
                    "Ch√∫c b·∫°n ti·∫øp t·ª•c ph√°t huy s·ª± s√°ng t·∫°o v√† nƒÉng ƒë·ªông trong c√°c ti·∫øt h·ªçc c√≤n l·∫°i! üí°",
                    "Ch·ªâ c√≤n v√†i ti·∫øt n·ªØa l√† k·∫øt th√∫c ng√†y. C·ªë l√™n nh√©! Ch√∫c b·∫°n may m·∫Øn! üòä"
                ];
            } else {
                // Bu·ªïi t·ªëi/ƒê√™m (18h - 4h59)
                title = `Ch√†o bu·ªïi t·ªëi, ${displayUserName}!`; 
                messages = [
                    "ƒê√£ ƒë·∫øn l√∫c ngh·ªâ ng∆°i sau m·ªôt ng√†y d√†i. Ch√∫c b·∫°n m·ªôt bu·ªïi t·ªëi th∆∞ gi√£n v√† ·∫•m √°p! üåô",
                    "B·∫°n c√≥ th·ªÉ d√†nh th·ªùi gian n√†y ƒë·ªÉ chu·∫©n b·ªã cho b√†i gi·∫£ng h√¥m sau. Ch√∫c b·∫°n c√≥ nhi·ªÅu √Ω t∆∞·ªüng m·ªõi! üìù",
                    "H√£y ƒë·ªÉ m·ªçi cƒÉng th·∫≥ng l·∫°i ph√≠a sau. Ch√∫c b·∫°n ng·ªß ngon v√† t√°i t·∫°o nƒÉng l∆∞·ª£ng! üßò",
                    "Xin c·∫£m ∆°n nh·ªØng c·ªëng hi·∫øn c·ªßa b·∫°n. Ch√∫c b·∫°n c√≥ kho·∫£ng th·ªùi gian ch·∫•t l∆∞·ª£ng b√™n gia ƒë√¨nh! ‚ù§Ô∏è"
                ];
            }

            // Ch·ªçn ng·∫´u nhi√™n m·ªôt th√¥ng ƒëi·ªáp
            const randomIndex = Math.floor(Math.random() * messages.length);
            const message = messages[randomIndex];

            return { title, message };
        }

        // H√†m ki·ªÉm tra v√† hi·ªÉn th·ªã Popup (Lu√¥n hi·ªÉn th·ªã khi load trang)
        function showGreetingPopup(userName) { 
            // 1. L·∫•y l·ªùi ch√†o v√† c·∫≠p nh·∫≠t n·ªôi dung
            const { title, message } = getGreetingByTime(userName); 
            greetingTitle.textContent = title;
            greetingMessage.textContent = message;

            // 2. Hi·ªÉn th·ªã Popup b·∫±ng class 'show'
            greetingPopup.classList.add('show');
            
            // 3. ƒê·∫£m b·∫£o n√∫t ƒë√≥ng ho·∫°t ƒë·ªông
            document.querySelector('#greeting-popup button').onclick = () => {
                greetingPopup.classList.remove('show');
            };
        }
        // END: LOGIC CHO POPUP CH√ÄO M·ª™NG THEO TH·ªúI GIAN TH·ª∞C

        // T·∫£i th√¥ng tin c√° nh√¢n v√† hi·ªÉn th·ªã
        async function loadUserInfo(userId) { 
            const profileRef = doc(db, "users", userId, "profile", "data");
            const emailElement = document.getElementById('user-info-email');
            const nameElement = document.getElementById('user-info-name');
            const nameShortElement = document.getElementById('user-info-name-short'); 
            const subjectElement = document.getElementById('user-info-subject');
            const schoolElement = document.getElementById('user-info-school');
            // L·∫§Y ELEMENT T√äN TR∆Ø·ªúNG TR√äN HEADER
            const headerSchoolNameElement = document.getElementById('header-school-name-display'); 

            if(auth.currentUser) {
                emailElement.textContent = auth.currentUser.email;
                emailElement.title = auth.currentUser.email;
            }

            try {
                const docSnap = await getDoc(profileRef);
                const defaultSchoolName = "TR∆Ø·ªúNG PTDTBT THCS THU C√öC"; 

                if (docSnap.exists()) {
                    const data = docSnap.data();
                    const hoTen = data.hoTen || "Gi√°o Vi√™n (Ch∆∞a c·∫≠p nh·∫≠t)";
                    const truongHoc = data.truongHoc || defaultSchoolName;
                    
                    nameElement.textContent = hoTen;
                    const shortName = hoTen.split(' ').pop() || "GV";
                    nameShortElement.textContent = shortName; 
                    
                    // C·∫¨P NH·∫¨T CODE HI·ªÇN TH·ªä TRONG DROPDOWN
                    subjectElement.innerHTML = `<div class="flex items-center space-x-2 flex-shrink-0"><ion-icon name="bookmarks-outline" class="text-xl text-red-600"></ion-icon><span class="font-semibold text-gray-600 uppercase">M√îN H·ªåC</span></div><span class="bg-red-100 text-red-800 text-xs font-extrabold px-3 py-1 rounded-full shadow-sm tracking-wider whitespace-nowrap">${data.monHoc || "..."}</span>`;
                    schoolElement.innerHTML = `<div class="flex items-center space-x-2 flex-shrink-0"><ion-icon name="business-outline" class="text-xl text-blue-700"></ion-icon><span class="font-semibold text-gray-600 uppercase">ƒê∆†N V·ªä</span></div><span class="text-sm font-bold text-gray-800 text-right whitespace-nowrap ml-2">${truongHoc}</span>`;
                    
                    // C·∫¨P NH·∫¨T CODE HI·ªÇN TH·ªä T√äN TR∆Ø·ªúNG TR√äN HEADER
                    if (headerSchoolNameElement) {
                        headerSchoolNameElement.textContent = truongHoc; 
                    }
                    
                    return hoTen; 
                    
                } else {
                    nameElement.textContent = "Gi√°o Vi√™n (Ch∆∞a c·∫≠p nh·∫≠t)";
                    nameShortElement.textContent = "GV";
                    
                    // CODE M·∫∂C ƒê·ªäNH KHI CH∆ØA C√ì D·ªÆ LI·ªÜU C≈®NG D√ôNG C√ÅC CLASS M·ªöI
                    subjectElement.innerHTML = `<div class="flex items-center space-x-2 flex-shrink-0"><ion-icon name="bookmarks-outline" class="text-xl text-red-600"></ion-icon><span class="font-semibold text-gray-600 uppercase">M√îN H·ªåC</span></div><span class="bg-red-100 text-red-800 text-xs font-extrabold px-3 py-1 rounded-full shadow-sm tracking-wider whitespace-nowrap">...</span>`;
                    schoolElement.innerHTML = `<div class="flex items-center space-x-2 flex-shrink-0"><ion-icon name="business-outline" class="text-xl text-blue-700"></ion-icon><span class="font-semibold text-gray-600 uppercase">ƒê∆†N V·ªä</span></div><span class="text-sm font-bold text-gray-800 text-right whitespace-nowrap ml-2">${defaultSchoolName}</span>`;
                    
                    // C·∫¨P NH·∫¨T T√äN TR∆Ø·ªúNG TR√äN HEADER V·ªöI T√äN M·∫∂C ƒê·ªäNH
                    if (headerSchoolNameElement) {
                        headerSchoolNameElement.textContent = defaultSchoolName; 
                    }
                    
                    return "Gi√°o Vi√™n"; 
                }
            } catch (error) {
                console.error("L·ªói t·∫£i th√¥ng tin GV:", error);
                nameElement.textContent = "L·ªói t·∫£i th√¥ng tin";
                nameShortElement.textContent = "L·ªói";
                
                return "Gi√°o Vi√™n"; 
            }
        }

        // X·ª≠ l√Ω ƒë√≥ng m·ªü Dropdown th√¥ng tin ng∆∞·ªùi d√πng
        window.toggleDropdown = function() {
            userDropdownContent.classList.toggle('hidden');
        }
        // ƒê√≥ng dropdown user khi click b√™n ngo√†i
        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('user-dropdown-content');
            const button = document.getElementById('user-info-button');
            if (dropdown && button && !dropdown.contains(event.target) && !button.contains(event.target)) {
                dropdown.classList.add('hidden');
            }
        });


        // ========== LOGIC X·ª¨ L√ù MENU DROPDOWN C·∫§P 2 ==========
        // X·ª≠ l√Ω ƒë√≥ng m·ªü Menu Dropdown c·∫•p 2
        window.toggleMenuDropdown = function(event, element) {
            // NgƒÉn click lan ra document, nh∆∞ng ch·ªâ khi click v√†o label
            if (event.target.closest('.menu-item-label')) {
                 event.stopPropagation(); 
            
                // ƒê√≥ng t·∫•t c·∫£ c√°c menu kh√°c
                document.querySelectorAll('.menu-item-dropdown').forEach(item => {
                    if (item !== element) {
                        item.classList.remove('open');
                    }
                });
                // Toggle menu hi·ªán t·∫°i
                element.classList.toggle('open');
            }
            // N·∫øu click v√†o dropdown-item, s·ª± ki·ªán click s·∫Ω do loadContent x·ª≠ l√Ω (v√† ƒë√≥ng menu)
        }

        // ƒê√≥ng menu c·∫•p 2 khi click ra ngo√†i
        document.addEventListener('click', function(event) {
            document.querySelectorAll('.menu-item-dropdown.open').forEach(menu => {
                if (!menu.contains(event.target)) {
                    menu.classList.remove('open');
                }
            });
        });
        // ==========================================================


        // L·∫Øng nghe tr·∫°ng th√°i ƒëƒÉng nh·∫≠p
        onAuthStateChanged(auth, async (user) => { // <-- ƒê√£ s·ª≠a: Th√™m async
            if (user) {
                currentUserId = user.uid; 
                if (window.appLogic && typeof window.appLogic.setLogicUserId === 'function') {
                    window.appLogic.setLogicUserId(currentUserId);
                }
                
                checkOnboarding(currentUserId);
                
                // [C·∫¨P NH·∫¨T] Ch·ªù t·∫£i t√™n tr∆∞·ªõc khi ch√†o
                const userName = await loadUserInfo(currentUserId); // <-- ƒê√£ s·ª≠a: L·∫•y t√™n ng∆∞·ªùi d√πng

                // G·ªåI H√ÄM CH√ÄO M·ª™NG T·∫†I ƒê√ÇY 
                showGreetingPopup(userName); // <-- ƒê√£ s·ª≠a: Truy·ªÅn t√™n ng∆∞·ªùi d√πng
                
                // [C·∫¨P NH·∫¨T] T·∫£i n·ªôi dung Menu 1 l√†m m·∫∑c ƒë·ªãnh
                loadContent('menu1_tkb.html', document.getElementById('menu-1'), 'menu-group-1');

            } else {
                window.location.href = "login_page.html";
            }
        });

        // H√†m ki·ªÉm tra Onboarding
        async function checkOnboarding(userId) {
            const profileRef = doc(db, "users", userId, "profile", "data"); 
            try {
                const docSnap = await getDoc(profileRef);
                if (docSnap.exists()) {
                    const data = docSnap.data();
                    if (!data.hoTen || !data.monHoc || !data.truongHoc) {
                        onboardingPopup.classList.add('show');
                    } else {
                        onboardingPopup.classList.remove('show');
                    }
                } else {
                    onboardingPopup.classList.add('show');
                }
            } catch (error) {
                console.error("L·ªói ki·ªÉm tra onboarding:", error);
            }
        }

        // X·ª≠ l√Ω l∆∞u th√¥ng tin Onboarding
        onboardingForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            if (!currentUserId) return;

            saveProfileButton.disabled = true;
            saveProfileButton.textContent = "ƒêang l∆∞u...";

            const hoTen = document.getElementById('ho-ten').value;
            const monHoc = document.getElementById('mon-hoc').value;
            const truongHoc = document.getElementById('truong-hoc').value;

            const profileRef = doc(db, "users", currentUserId, "profile", "data");
            const userListRef = doc(db, "public_data", "user_list_doc");

            try {
                await setDoc(profileRef, {
                    hoTen: hoTen,
                    monHoc: monHoc,
                    truongHoc: truongHoc
                }, { merge: true });

                await setDoc(userListRef, {
                    users: {
                        [currentUserId]: hoTen
                    }
                }, { merge: true });

                onboardingPopup.classList.remove('show');
                loadUserInfo(currentUserId); // C·∫≠p nh·∫≠t l·∫°i th√¥ng tin sau khi l∆∞u
                alert("C·∫≠p nh·∫≠t th√¥ng tin th√†nh c√¥ng!");

            } catch (error) {
                console.error("L·ªói l∆∞u profile ho·∫∑c danh s√°ch c√¥ng khai:", error);
                alert("L∆∞u th√¥ng tin th·∫•t b·∫°i. Vui l√≤ng th·ª≠ l·∫°i.");
            } finally {
                saveProfileButton.disabled = false;
                saveProfileButton.textContent = "L∆∞u Th√¥ng Tin";
            }
        });


        // X·ª≠ l√Ω ƒêƒÉng Xu·∫•t
        window.handleLogout = async function() {
            const logoutButton = document.getElementById('logout-button');
            logoutButton.disabled = true;
            logoutButton.textContent = "ƒêang ƒëƒÉng xu·∫•t...";
            logoutButton.classList.add('opacity-50');

            try {
                await signOut(auth);
            } catch (error) {
                console.error("L·ªói ƒëƒÉng xu·∫•t:", error);
                alert("ƒêƒÉng xu·∫•t th·∫•t b·∫°i. Vui l√≤ng th·ª≠ l·∫°i.");
                logoutButton.disabled = false;
                logoutButton.textContent = "ƒêƒÉng Xu·∫•t";
                logoutButton.classList.remove('opacity-50');
            }
        }

        // === [C·∫¨P NH·∫¨T] H√†m T·∫£i N·ªôi Dung ƒê·ªông (SPA Logic) H·ªó tr·ª£ Menu C·∫•p 2 ===
        window.loadContent = async function(pageUrl, clickedElement, parentGroupId = null) {
            
            // 1. X√≥a active tr√™n t·∫•t c·∫£ c√°c item c·∫•p 1 (menu-item) v√† group (menu-item-dropdown)
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelectorAll('.menu-item-dropdown').forEach(item => {
                item.classList.remove('active');
            });

            // 2. Th√™m active cho item ƒë∆∞·ª£c click
            if (parentGroupId) {
                // ƒê√¢y l√† item c·∫•p 2 (dropdown-item)
                const parentGroup = document.getElementById(parentGroupId);
                if(parentGroup) {
                    parentGroup.classList.add('active');
                    // ƒê√≥ng dropdown sau khi click
                    parentGroup.classList.remove('open');
                }
            } else if (clickedElement) {
                // ƒê√¢y l√† item c·∫•p 1 (menu-item)
                clickedElement.classList.add('active');
            }

            // 3. T·∫£i n·ªôi dung
            mainContent.innerHTML = '<h1 class="text-3xl font-extrabold text-gray-800 loading-text">ƒêang t·∫£i n·ªôi dung...</h1>';

            try {
                const response = await fetch(pageUrl);
                if (!response.ok) {
                    throw new Error(`Kh√¥ng th·ªÉ t·∫£i ${pageUrl}. Status: ${response.status}`);
                }
                const content = await response.text();
                mainContent.innerHTML = content;

                // 4. [C·∫¨P NH·∫¨T] G·ªçi logic cho c√°c trang
                setTimeout(() => {
                    if (window.appLogic) {
                        switch (pageUrl) {
                            // G·ªòP 1
                            case 'menu1_tkb.html':
                                window.appLogic.initMenu1();
                                break;
                            case 'menu9_tra_cuu.html':
                                window.appLogic.initMenu9();
                                break;
                            
                            // G·ªòP 2
                            case 'menu2_sdb.html':
                                window.appLogic.initMenu2();
                                break;
                            case 'menu3_history.html':
                                window.appLogic.initMenu3();
                                break;

                            // G·ªòP 3
                            case 'menu4_report.html':
                                window.appLogic.initMenu4();
                                break;
                            case 'menu7_admin_report.html': 
                                window.appLogic.initMenu7();
                                break;

                            // C√ÅC MENU L·∫∫
                            case 'menu5_class_sdb.html':
                                window.appLogic.initMenu5();
                                break;
                            case 'menu6_ranking.html':
                                window.appLogic.initMenu6();
                                break;
                            
                            // (menu8 huong_dan_su_dung.html kh√¥ng c√≥ init)
                            }
                    }
                }, 10); // 10ms delay

            } catch (error) {
                console.error("L·ªói t·∫£i n·ªôi dung:", error);
                mainContent.innerHTML = `<h1 class="text-3xl font-extrabold text-red-600">L·ªói!</h1><p class="text-lg mt-3">Kh√¥ng th·ªÉ t·∫£i n·ªôi dung trang <strong>${pageUrl}</strong>. Vui l√≤ng ki·ªÉm tra xem t·ªáp n√†y c√≥ t·ªìn t·∫°i kh√¥ng v√† th·ª≠ l·∫°i.</p>`;
            }
        }
        
        // === [M·ªöI] LOGIC CH·ªÆ CH·∫†Y NG·∫™U NHI√äN ===
        const teacherQuotes = [
            "H·∫°nh ph√∫c c·ªßa ng∆∞·ªùi Th·∫ßy l√† th·∫•y h·ªçc tr√≤ m√¨nh tr∆∞·ªüng th√†nh v√† th√†nh c√¥ng. üòä",
            "M·ªói h·ªçc sinh l√† m·ªôt h·∫°t gi·ªëng, Gi√°o vi√™n l√† ng∆∞·ªùi vun tr·ªìng. ∆∞∆°m m·∫ßm t√†i nƒÉng Vi·ªát Nam. üáªüá≥",
            "Gi√°o d·ª•c kh√¥ng ph·∫£i l√† ƒë·ªï ƒë·∫ßy x√¥ n∆∞·ªõc, m√† l√† th·∫Øp l√™n ng·ªçn l·ª≠a trong t√¢m h·ªìn. üî•",
            "Tri th·ª©c l√† √°nh s√°ng, Gi√°o vi√™n l√† ng∆∞·ªùi d·∫´n ƒë∆∞·ªùng cho √°nh s√°ng ·∫•y. ‚ú®",
            "L√≤ng ki√™n nh·∫´n c·ªßa Th·∫ßy C√¥ l√† ch√¨a kh√≥a m·ªü c√°nh c·ª≠a tri th·ª©c cho tr√≤. üîë",
            "Kh√¥ng c√≥ ng∆∞·ªùi h·ªçc d·ªët, ch·ªâ c√≥ ng∆∞·ªùi Th·∫ßy ch∆∞a t√¨m ra ph∆∞∆°ng ph√°p. üí°",
            "H√£y l√† ngu·ªìn c·∫£m h·ª©ng ch·ª© kh√¥ng ch·ªâ l√† ngu·ªìn ki·∫øn th·ª©c. üåà",
            "S·ª± t√¥n tr·ªçng l·ªõn nh·∫•t d√†nh cho Th·∫ßy C√¥ l√† th√†nh qu·∫£ h·ªçc t·∫≠p c·ªßa h·ªçc tr√≤. üèÜ",
            "Ngh·ªÅ Gi√°o l√† ngh·ªÅ cao qu√Ω nh·∫•t trong c√°c ngh·ªÅ cao qu√Ω. ‚ù§Ô∏è",
            "M·ªôt l·ªùi ƒë·ªông vi√™n k·ªãp th·ªùi c√≥ th·ªÉ thay ƒë·ªïi cu·ªôc ƒë·ªùi m·ªôt ƒë·ª©a tr·∫ª. üåü",
            "D·∫°y h·ªçc l√† h·ªçc hai l·∫ßn. H√£y h·ªçc h·ªèi kh√¥ng ng·ª´ng! üìö",
            "Ng∆∞·ªùi Th·∫ßy vƒ© ƒë·∫°i l√† ng∆∞·ªùi bi·∫øt c√°ch l·∫Øng nghe h·ªçc tr√≤ c·ªßa m√¨nh. üëÇ",
            "H√£y gieo h·∫°t ni·ªÅm tin, b·∫°n s·∫Ω g·∫∑t h√°i th√†nh c√¥ng. üå±",
            "ƒê·ª´ng ch·ªâ d·∫°y ƒëi·ªÅu ph·∫£i nghƒ©, h√£y d·∫°y c√°ch ph·∫£i nghƒ©. ü§î",
            "M·ªói ng√†y ƒë·∫øn tr∆∞·ªùng l√† m·ªôt ni·ªÅm vui v√† m·ªôt c∆° h·ªôi m·ªõi ƒë·ªÉ c·ªëng hi·∫øn. ü•≥",
            "S·ª± thay ƒë·ªïi nh·ªè nh·∫•t ·ªü h·ªçc sinh c≈©ng l√† th√†nh t·ª±u l·ªõn c·ªßa Gi√°o vi√™n. ‚úÖ",
            "Th·∫ø gi·ªõi ƒë∆∞·ª£c thay ƒë·ªïi b·ªüi nh·ªØng t·∫•m g∆∞∆°ng, kh√¥ng ph·∫£i b·ªüi nh·ªØng √Ω ki·∫øn. üçé",
            "Th√†nh c√¥ng kh√¥ng ph·∫£i l√† ch√¨a kh√≥a h·∫°nh ph√∫c, h·∫°nh ph√∫c l√† ch√¨a kh√≥a th√†nh c√¥ng. üîë",
            "H·ªçc, h·ªçc n·ªØa, h·ªçc m√£i - C√¢u n√≥i b·∫•t h·ªß d√†nh cho c·∫£ Th·∫ßy v√† Tr√≤. üíØ",
            "H√£y ƒë·ªÉ s·ª± nhi·ªát huy·∫øt c·ªßa b·∫°n l√† t·∫•m g∆∞∆°ng cho h·ªçc sinh noi theo! üí™"
        ];
        
        function updateMarqueeText() {
            const marqueeElement = document.getElementById('marquee-text');
            if (marqueeElement) {
                // Ch·ªçn ng·∫´u nhi√™n m·ªôt c√¢u n√≥i t·ª´ m·∫£ng (ƒë√£ c√≥ 20 c√¢u)
                const randomIndex = Math.floor(Math.random() * teacherQuotes.length);
                const randomQuote = teacherQuotes[randomIndex];
                
                // C·∫≠p nh·∫≠t n·ªôi dung
                marqueeElement.textContent = `üì¢ L·ªùi nh·∫Øc nh·∫π nh√†ng: ${randomQuote} üåü`;
                
                // Kh·ªüi ƒë·ªông l·∫°i animation ƒë·ªÉ ƒë·∫£m b·∫£o ch·ªØ ch·∫°y l·∫°i t·ª´ ƒë·∫ßu v·ªõi n·ªôi dung m·ªõi
                // B·∫±ng c√°ch x√≥a v√† th√™m l·∫°i class animation
                marqueeElement.style.animation = 'none';
                void marqueeElement.offsetWidth; // Force reflow
                marqueeElement.style.animation = 'marquee-motion 35s linear infinite';
            }
        }

        // 1. Ch·∫°y l·∫ßn ƒë·∫ßu ngay khi app load (sau khi onAuthStateChanged ch·∫°y)
        // 2. Thi·∫øt l·∫≠p ch·∫°y ng·∫´u nhi√™n m·ªói 15 gi√¢y (ho·∫∑c l√¢u h∆°n t√πy b·∫°n mu·ªën)
        // D√πng th·ªùi gian 15s ƒë·ªÉ c√¢u n√≥i c≈© v·ª´a ch·∫°y h·∫øt th√¨ c√¢u m·ªõi b·∫Øt ƒë·∫ßu
        
        // B·∫°n c√≥ th·ªÉ ƒë·∫∑t h√†m n√†y b√™n ngo√†i onAuthStateChanged ho·∫∑c g·ªçi n√≥ b√™n trong
        // ƒê·∫∑t ·ªü ƒë√¢y ƒë·ªÉ n√≥ ch·∫°y ngay sau khi ƒë·ªãnh nghƒ©a
        updateMarqueeText(); 
        
        // C·∫≠p nh·∫≠t l·∫°i m·ªói 15 gi√¢y
        setInterval(updateMarqueeText, 35000); 
        // === END LOGIC CH·ªÆ CH·∫†Y NG·∫™U NHI√äN ===
    </script>

    <script type="module" src="app_logic.js"></script>
</body>
</html>
