(function(_0x5b9d59,_0x59542f){const _0x447cb0=_0x1d5f,_0x2505b5=_0x5b9d59();while(!![]){try{const _0x578634=parseInt(_0x447cb0(0x1f8))/0x1*(-parseInt(_0x447cb0(0x25b))/0x2)+-parseInt(_0x447cb0(0x44a))/0x3+parseInt(_0x447cb0(0x383))/0x4+-parseInt(_0x447cb0(0x31b))/0x5+-parseInt(_0x447cb0(0x402))/0x6*(parseInt(_0x447cb0(0x42a))/0x7)+parseInt(_0x447cb0(0x479))/0x8*(-parseInt(_0x447cb0(0x34f))/0x9)+parseInt(_0x447cb0(0x3ec))/0xa;if(_0x578634===_0x59542f)break;else _0x2505b5['push'](_0x2505b5['shift']());}catch(_0xa1877){_0x2505b5['push'](_0x2505b5['shift']());}}}(_0x37c8,0xbe664));const _0x5129a3=(function(){let _0x1024d1=!![];return function(_0x44b571,_0x3b0fea){const _0x43ab0b=_0x1024d1?function(){const _0x24a119=_0x1d5f;if(_0x3b0fea){const _0x33127c=_0x3b0fea[_0x24a119(0x2ab)](_0x44b571,arguments);return _0x3b0fea=null,_0x33127c;}}:function(){};return _0x1024d1=![],_0x43ab0b;};}()),_0x33b463=_0x5129a3(this,function(){const _0x170cdc=_0x1d5f,_0x2775a0={'CUibZ':function(_0x5f4aaa,_0x50288c){return _0x5f4aaa(_0x50288c);},'YkWuh':function(_0x177c67,_0x1723b1){return _0x177c67+_0x1723b1;},'MUWWk':_0x170cdc(0x382),'giuyc':_0x170cdc(0x3d4),'BudLO':'log','XBNEH':'warn','Wajkt':'exception','ZgxYc':_0x170cdc(0x31d),'xqPTV':_0x170cdc(0x1fb)};let _0x11be55;try{const _0x18fe0d=_0x2775a0[_0x170cdc(0x259)](Function,_0x2775a0[_0x170cdc(0x410)](_0x2775a0[_0x170cdc(0x410)](_0x2775a0[_0x170cdc(0x1f3)],_0x2775a0[_0x170cdc(0x2ca)]),');'));_0x11be55=_0x18fe0d();}catch(_0xb5ef43){_0x11be55=window;}const _0x5d3ddf=_0x11be55[_0x170cdc(0x3fb)]=_0x11be55[_0x170cdc(0x3fb)]||{},_0x48c6de=[_0x2775a0[_0x170cdc(0x45b)],_0x2775a0['XBNEH'],_0x170cdc(0x3ac),_0x170cdc(0x295),_0x2775a0[_0x170cdc(0x3df)],_0x2775a0['ZgxYc'],_0x2775a0[_0x170cdc(0x2e6)]];for(let _0x3f0802=0x0;_0x3f0802<_0x48c6de[_0x170cdc(0x3ff)];_0x3f0802++){const _0x13ca0b=_0x5129a3[_0x170cdc(0x211)][_0x170cdc(0x403)][_0x170cdc(0x289)](_0x5129a3),_0x3839ab=_0x48c6de[_0x3f0802],_0x34603d=_0x5d3ddf[_0x3839ab]||_0x13ca0b;_0x13ca0b[_0x170cdc(0x213)]=_0x5129a3[_0x170cdc(0x289)](_0x5129a3),_0x13ca0b['toString']=_0x34603d[_0x170cdc(0x26c)]['bind'](_0x34603d),_0x5d3ddf[_0x3839ab]=_0x13ca0b;}});_0x33b463();import{getFirestore,doc,getDoc,setDoc,collection,query,where,getDocs,addDoc,updateDoc,deleteDoc,serverTimestamp,orderBy,limit}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js';function _0x37c8(){const _0x47740d=['cells','hidden','Neaps','YLclM','text-green-600','<tr><td\x20colspan=\x225\x22\x20class=\x22text-center\x20p-4\x20text-red-500\x22>Có\x20lỗi\x20xảy\x20ra.\x20Vui\x20lòng\x20kiểm\x20tra\x20console\x20để\x20biết\x20chi\x20tiết.</td></tr>','console','OTPLc','Lỗi:\x20Không\x20tìm\x20thấy\x20bản\x20ghi\x20này.','className','length','jUDZa','input[name=\x22danh-gia\x22]:checked','2226biITgS','prototype','KDwnX','aouci','\x20--','Môn\x20(GV)','YgiOP','ZjNnF','Khối\x20','Lỗi:\x20Bạn\x20đã\x20ghi\x20SĐB\x20cho\x20tiết\x20này\x20rồi.\x20Vui\x20lòng\x20kiểm\x20tra\x20Menu\x203\x20(Lịch\x20Sử)\x20để\x20sửa\x20hoặc\x20xóa.','Không\x20có\x20lớp\x20nào\x20được\x20chọn\x20hoặc\x20tìm\x20thấy\x20theo\x20TKB\x20của\x20bạn.','application/vnd.ms-excel;charset=utf-8','gDzuV','KLxYC','YkWuh','pHDsL','azLql','<tr\x20class=\x22bg-red-50\x22><td\x20class=\x22px-6\x20py-4\x22>','JQlpY','znKvO','<tr><td\x20colspan=\x227\x22\x20class=\x22px-6\x20py-4\x20text-center\x20text-red-500\x20font-bold\x22>Giáo\x20viên\x20này\x20chưa\x20nhập\x20TKB\x20nào.</td></tr>','ArFYu','\x20trong\x20khung\x20thời\x20gian\x20này.</td></tr>','QYkUl','edit-si-so','IZciB','save-sdb-button','eejPz','OfOjK','AefRc','piktC','qVsfa','VnkNL','dfyUz','QDzkU','laKjr','aySpU','ngay-day','EEeCX','SmNXz','23786TkkDdq','data-tiet','DzZGW','replace','body','<tr\x20class=\x22','PKgwh','idVrV','getFullYear','Qevzi','kleuW','xgvEK','run-report-button','GPqQP','JzaDF','</td>','\x20(TKB\x20có\x20hiệu\x20lực\x20từ:\x20','QhOah','search-tkb-date','JMVuJ','TFuFZ','--\x20Tất\x20cả\x20Lớp\x20','modal-title','cCGWb','OiTaM','pmeLo','missingCount','KJZBH','aOtBG','parse','MWYid','filter-class-sdb-button','2638830VpiWxy','&amp;','bhhum','Lỗi\x20cập\x20nhật\x20SĐB:','MRJXa','<tr><td\x20colspan=\x227\x22\x20class=\x22text-center\x20p-4\x20text-red-500\x22>Lỗi!\x20Không\x20thể\x20tải\x20SĐB.\x20Vui\x20lòng\x20kiểm\x20tra\x20Console\x20(F12).</td></tr>','NjIOa','xMRTT','LỖI:\x20Truy\x20Cập\x20Bị\x20Từ\x20Chối\x20(Kiểm\x20tra\x20Security\x20Rules)','filter-history-button','LvJrQ','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x22>','getAttribute','aWMPF','Đánh\x20Giá','GV\x20','.csv','BudLO','padStart','---','run-search-tkb-button','ZdEVa','width','ten-bai-day','HSLwS','Chưa\x20cập\x20nhật\x20môn','Khởi\x20tạo\x20logic\x20cho\x20Menu\x204:\x20Báo\x20cáo','PnZYc','ranking-table-body','fUndn','\x27)\x22\x20class=\x22text-white\x20font-bold\x20px-3\x20py-1\x20rounded-full\x20bg-red-500\x20hover:bg-red-700\x20transition\x20duration-150\x20shadow-sm\x22>','EJNpw','lop-day','users','vGraR','<tr\x20class=\x22hover:bg-indigo-50\x22><td\x20class=\x22px-3\x20py-2\x20whitespace-nowrap\x20font-semibold\x20bg-gray-100\x20text-center\x22>Tiết\x20','getMonth','hocSinhVang','bg-red-100\x20font-bold','&lt;','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-4\x20py-2\x20whitespace-nowrap\x22>','Lớp','Lỗi\x20lưu\x20TKB:','XWQoZ','inline-block','empty-row','VuPqf','1729752FMsftI','HpJIm','HWGdk','KZpLD','\x20-\x20Tiết\x20','Vui\x20lòng\x20chọn\x20ngày\x20TKB\x20có\x20hiệu\x20lực.','MrZjm','HsQCX','Tiết\x20Học','GeJOY','entry-','Bạn\x20đang\x20lưu\x20TKB\x20trống\x20cho\x20ngày\x20','Bạn\x20có\x20chắc\x20chắn\x20muốn\x20xóa\x20mục\x20này\x20không?','<tr><td\x20colspan=\x225\x22\x20class=\x22text-center\x20p-4\x20text-red-500\x22>Lỗi:\x20Không\x20tìm\x20thấy\x20danh\x20sách\x20giáo\x20viên.\x20Vui\x20lòng\x20thử\x20\x22Cập\x20nhật\x20Thông\x20Tin\x20Cá\x20Nhân\x22\x20(popup\x20onboarding)\x201\x20lần\x20để\x20tạo\x20danh\x20sách.</td></tr>','UbKST','aBFVJ','function','aVdqj','MqDLb','Chưa\x20cập\x20nhật\x20tên','click','eNyhh','fasmf','forEach','input[name=\x22edit-danh-gia\x22]:checked','RCeMk','thu','eETtO','NxvcP','suCnS','</td><td\x20class=\x22px-6\x20py-4\x20space-x-2\x22><button\x20onclick=\x22window.appLogic.handleEditEntry(\x27','Không\x20tìm\x20thấy\x20TKB\x20nào.','aYBCf','AswBM','Vui\x20lòng\x20chọn\x20Lớp.','sort','StVUb','<tr><td\x20colspan=\x227\x22\x20class=\x22px-6\x20py-4\x20text-center\x20text-red-500\x22>Vui\x20lòng\x20chọn\x20đầy\x20đủ\x20Lớp,\x20Từ\x20Ngày\x20và\x20Đến\x20Ngày.</td></tr>','MUWWk','T00:00:00','RYlYp','WaBxT','save-edit-button','3Xshdzu','aLvum','TwJUL','trace','edit-sdb-modal','QNfiz',')\x20theo\x20TKB.\x20Vui\x20lòng\x20kiểm\x20tra\x20TKB.','bfOQO','overall-progress-text','Cập\x20nhật\x20thành\x20công!','LTZIx','\x20-\x20Lớp\x20','completionRate','SpXYM','VjTXE','<tr><td\x20colspan=\x226\x22\x20class=\x22text-center\x20p-4\x22>Không\x20tìm\x20thấy\x20bản\x20ghi\x20nào.</td></tr>','lGuji','AAmPJ','tZNbY','eNxNj','FdHXl','SpIRv','bCJjx','srKFW','submit','constructor','total-tiet-tkb','__proto__','<tr><td\x20colspan=\x225\x22\x20class=\x22text-center\x20p-4\x20text-red-500\x22>Bạn\x20chưa\x20nhập\x20TKB\x20nào.</td></tr>','text/csv;charset=utf-8;','Nkhxo','optgroup','tkb_versions','vDAGX','all_time','disabled','<tr><td\x20colspan=\x227\x22\x20class=\x22text-center\x20p-4\x22>Đang\x20tải\x20SĐB\x20của\x20lớp...</td></tr>','tất\x20cả\x20các\x20lớp','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>','jMtAq','dwZyE','yJwEL','sdb-form','Không\x20được\x20ghi\x20SĐB\x20cho\x20ngày\x20tương\x20lai.','span','XSjzi','njEHs','bg-green-500\x20h-4\x20rounded-full\x20transition-all\x20duration-500\x20ease-in-out','ETSQA','YsLwC','YUvpH','keys','Lớp\x20tại\x20(Tiết\x20','JOffp','<tr><td\x20colspan=\x225\x22\x20class=\x22text-center\x20p-4\x22>Không\x20tìm\x20thấy\x20giáo\x20viên\x20nào\x20trong\x20danh\x20sách\x20công\x20khai.</td></tr>','asjeA','\x20thành\x20công!','log','BrLNy','filter-start-date','total-tiet-thieu','CqxNZ','cICZp','visibility','createElement','exists','_CHI_TIET.xls','<tr\x20id=\x22entry-','CiAzC','push','filter-time','TtMgh','rNanU','QZcbG','ShBBA','VbmNr','Nhận\x20Xét',')</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x22>','tkb-start-date','hoTen','none','AiBBl','glNhm','<tr><td\x20colspan=\x225\x22\x20class=\x22text-center\x20p-4\x22>Đang\x20tính\x20toán...\x20(B2/3:\x20Lấy\x20TKB\x20của\x20','<th\x20class=\x22','danhGia','\x20GV)</td></tr>','yCiQf','.\x20Vui\x20lòng\x20kiểm\x20tra\x20lại.','\x20Tiết)','SNKUO','byNZL','hyNBR','save-tkb-button','znaky','lWkuf','ALL','CUibZ','toUpperCase','741358ZYPSiT','Lỗi\x20tải\x20TKB\x20vào\x20cache:','.tkb-cell','YPjfx','CNGUI','eEqPK','FaTRV','hYiVX','filter-lop','SZBuw','dYGJd','NMSHo','LvdwI','RNqgL','kwcog','siSo','WXSsS','toString','rjkgp','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x22>','cEkFZ','mYxTw','data-thu','tHPdv','lopDay','VbQQv','<tr><td\x20colspan=\x227\x22\x20class=\x22px-6\x20py-4\x20text-center\x20text-red-500\x22>Vui\x20lòng\x20chọn\x20Lớp.</td></tr>','Wtrhu','SeOkt','Khởi\x20tạo\x20logic\x20cho\x20Menu\x209:\x20Tra\x20Cứu\x20TKB\x20GV\x20Khác','ngayDay','Lưu\x20TKB\x20thành\x20công!','XijAw','EkWeg','value','kbUXi','GGtXd','EbinB','font-bold\x20text-indigo-700','user_list_doc','pRLra','sJkuQ','BptpA','textContent','edit-hoc-sinh-vang','</td><td\x20class=\x22px-6\x20py-4\x22>','bind','Ghi\x20SĐB\x20thành\x20công!','tNzBP','HYNlC','ymnvW','IKfgJ','AoeQc','XaqkR','teacherId','then','<tr><td\x20colspan=\x227\x22\x20class=\x22px-6\x20py-4\x20text-center\x20text-red-700\x20font-bold\x22>Lỗi\x20nghiêm\x20trọng.\x20Vui\x20lòng\x20kiểm\x20tra\x20Console\x20(F12)\x20và\x20Security\x20Rules.</td></tr>','iXIZz','error','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x20font-medium\x22>','mtNZO','RIgEJ','remove','IgiFi','si-so','nnFNN','docs','KVnxK','nlZhd','DTNUT','ogyaU','has','tiet-hoc','mgukz','ESeIC','</h2>\x0a\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>','Kbcii','CSWtf','XSGVJ','Tên\x20Bài\x20Dạy','apply','tEdjH','IYgqS','danhgia','zJuXJ','<tr><td\x20colspan=\x225\x22\x20class=\x22text-center\x20p-4\x22>Tuyệt\x20vời!\x20Bạn\x20không\x20thiếu\x20tiết\x20nào.</td></tr>','edit-lop-day','2020-01-01','HPkoD','ARJvO','lIcgu','Ojcdh','YVTlC','HBzsC','Đang\x20kiểm\x20tra\x20trùng\x20TKB\x20với\x20GV\x20khác...','MJTZN','Lỗi\x20tải\x20SĐB\x20Lớp:','ngayBatDau','.xls','EXfAN','absolute\x20inset-0\x20flex\x20items-center\x20justify-center\x20text-xs\x20font-bold\x20text-gray-800','options','gHcOO','preventDefault','appendChild','text-orange-600','modal-table-body','getElementById','VKBcT','DtFjP','KonPE','giuyc','vBxwt','TUzoh','<tr><td\x20colspan=\x225\x22\x20class=\x22text-center\x20p-4\x20text-red-500\x22>Lỗi!\x20Không\x20thể\x20tải\x20dữ\x20liệu\x20xếp\x20hạng.\x20Vui\x20lòng\x20kiểm\x20tra\x20Console\x20(F12).</td></tr>','lrcJG','Ngày\x20Dạy','ksQfq','LjwYc','&gt;','<option\x20value=\x22\x22>--\x20Lỗi\x20tải\x20dữ\x20liệu\x20--</option>','srADR','tPwcE','bg-red-500\x20h-4\x20rounded-full\x20transition-all\x20duration-500\x20ease-in-out','</tr>','ehlWB','entries','option','Khởi\x20tạo\x20logic\x20cho\x20Menu\x206:\x20Xếp\x20hạng\x20(Theo\x20Năm\x20Học)','add','nhXYC','total-tiet-ghi','qvTeC','DFlCW','nhan-xet','fCmvn','Orzzw','Đang\x20kiểm\x20tra...','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x22>Tiết\x20','xqPTV','createObjectURL','<tr><td\x20colspan=\x226\x22\x20class=\x22text-center\x20p-4\x20text-red-500\x22>Lỗi!\x20Không\x20thể\x20tải\x20lịch\x20sử.</td></tr>','totalRecorded','fJmDp','classList','docId','TAtKq','Khởi\x20tạo\x20logic\x20cho\x20Menu\x205:\x20SĐB\x20Lớp','XxuGc','style','XENPa','teacherName',')\x20ghi.','href','<option\x20value=\x22\x22>--\x20Chọn\x20Giáo\x20Viên\x20--</option>','ZMrHV','public_data','<td\x20class=\x22px-3\x20py-2\x20whitespace-nowrap\x20','Đang\x20lưu...','<tr><td\x20colspan=\x225\x22\x20class=\x22text-center\x20p-4\x22>Đang\x20tính\x20toán...\x20(Năm\x20học\x20','JaWYF','Tải\x20TKB\x20mới\x20nhất\x20vào\x20cache,\x20có\x20hiệu\x20lực\x20từ:','kstlt','xVtQA','XSiwL','vtlQZ','substring','QCMBT','\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<meta\x20charset=\x22utf-8\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20table\x20{\x20width:\x20100%;\x20border-collapse:\x20collapse;\x20font-family:\x20Tahoma,\x20sans-serif;\x20font-size:\x2011pt;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20th,\x20td\x20{\x20border:\x201px\x20solid\x20#000;\x20padding:\x208px\x2012px;\x20text-align:\x20left;\x20vertical-align:\x20middle;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20th\x20{\x20background-color:\x20#e0e7ff;\x20font-weight:\x20bold;\x20text-align:\x20center;\x20color:\x20#374151;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.ngay\x20{\x20text-align:\x20center;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tiet\x20{\x20text-align:\x20center;\x20width:\x2050px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.lop\x20{\x20text-align:\x20center;\x20width:\x2080px;\x20font-weight:\x20bold;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.danhgia\x20{\x20text-align:\x20center;\x20width:\x20100px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.empty-row\x20td\x20{\x20background-color:\x20#f8f8f8;\x20color:\x20#a0a0a0;\x20font-style:\x20italic;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20<h2\x20style=\x22font-family:\x20Tahoma,\x20sans-serif;\x20text-align:\x20center;\x22>SỔ\x20ĐẦU\x20BÀI\x20CHI\x20TIẾT\x20LỚP\x20','vvzot','edit-ten-bai-day','xsJXG','gNigh','\x20bg-red-50/50\x20italic\x20text-gray-500\x22>\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x22>','EzkwD','edit-tiet-hoc','Lỗi\x20chạy\x20báo\x20cáo\x20xếp\x20hạng:','sGLEs','VvhHo','zgzDc','tUBSh','VnXeL','prpJy','ndRZa','HPdUa','EVjHk','Lỗi:\x20Tiết\x20này\x20đã\x20được\x20GV\x20khác\x20(','all','PnLYd','Lỗi\x20khi\x20lưu\x20SĐB:','desc','rTtxp','3963705Wczuco','lIwxK','table','ZYAIn','rhPPY','total-teachers','iMXUR','Bạn\x20không\x20có\x20tiết\x20dạy\x20tại\x20(Tiết\x20','YdqyK','NJvhh','search-teacher-select','map','</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tbody>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22tiet\x22>Tiết\x20','text','\x27)\x22\x20class=\x22text-red-600\x20hover:text-red-800\x22>Xóa</button></td></tr>','gAnlS','oUVea','oycQa','Lỗi\x20tải\x20lịch\x20sử\x20SĐB:','edit-nhan-xet','filter-khoi','insertAdjacentHTML','IrdmW','bhciN','Lỗi\x20tải\x20danh\x20sách\x20GV\x20(Menu\x209):','CdCgi','empty','\x27,\x20\x27','pBRBp','GMwMc','searched-tkb-body','xZsiz','filter-end-date','nhanXet','WbCjJ','<tr><td\x20colspan=\x225\x22\x20class=\x22px-6\x20py-4\x20text-center\x22>Không\x20tìm\x20thấy\x20dữ\x20liệu\x20giáo\x20viên\x20hoặc\x20tiết\x20dạy\x20nào\x20trong\x20khung\x20thời\x20gian\x20này.</td></tr>','TPBEs','rZlEp','overall-progress-bar','--\x20(Chọn\x20Khối\x20trước)\x20--','monHoc','fVWMf','Lưu\x20Thời\x20Khóa\x20Biểu','evFDe','bxVlg','Lưu\x20Thay\x20Đổi','bqoQv','CDtUt','Lỗi\x20chạy\x20báo\x20cáo:','--\x20Tất\x20cả\x20các\x20Lớp\x20--','totalScheduled','63TZIUHp','WkOkT','reverse','kfaak','...','lớp\x20','removeEventListener','LgWOG','rIcLI','pakuY','nBsMm','CxnSA','<tr><td\x20colspan=\x225\x22\x20class=\x22text-center\x20p-4\x22>Khung\x20thời\x20gian\x20đã\x20chọn\x20chưa\x20đến.</td></tr>','tietHoc','ZYLFW','KFNFq','kyaig','YJyLg','cchtr','data','change','filter','Lanzz','createdAt','HmDIx','ZAkfN','dhAuS','fOhXD','bg-yellow-50','display','.</td></tr>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','<tr><td\x20colspan=\x226\x22\x20class=\x22text-center\x20p-4\x22>Đang\x20tải\x20lịch\x20sử...</td></tr>','edit-sdb-form','report-table-body','\x20-\x20','dmLBW','hCood','tsVkF','.\x20Bạn\x20có\x20chắc\x20chắn\x20muốn\x20xóa\x20tất\x20cả\x20các\x20tiết\x20cho\x20TKB\x20phiên\x20bản\x20này\x20không?','hoc-sinh-vang','Không\x20tìm\x20thấy\x20dữ\x20liệu\x20chi\x20tiết.','fzOiU','pAHdI','mwkkp','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ngay\x22>','FWxSA','tenBaiDay','Csiqr','EUGUh',')</td></tr>','return\x20(function()\x20','4330084qeQulb',').\x20Vui\x20lòng\x20liên\x20hệ\x20quản\x20lý\x20để\x20điều\x20chỉnh.','YjxGw','tiet','Đang\x20kiểm\x20tra\x20TKB...','vPKWj','velic','fstMZ','asc','EZFfk','history-table-body','SnJKs','qYKqi','<tr><td\x20colspan=\x227\x22\x20class=\x22px-6\x20py-4\x20text-center\x20text-orange-500\x22>Không\x20tìm\x20thấy\x20TKB\x20có\x20hiệu\x20lực\x20trước\x20ngày\x20','JLSNU','isFirstRowOfDay','MjpFI','QoAjz','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>','</button>','Lỗi\x20tải\x20tất\x20cả\x20TKB\x20versions:','<tr><td\x20colspan=\x225\x22\x20class=\x22text-center\x20p-4\x22>Đang\x20tính\x20toán...\x20(B3/3:\x20Đối\x20chiếu\x20SĐB)</td></tr>','VRdne','EwRTz','FgwdD','toFixed','swHJo','HcFhx','tCvUR','text-gray-400\x20italic','sWYKJ','GyKxu','download-class-sdb-button','GLiOD','jnFGR','missing-details-modal','tkb-display-title','absolute\x20inset-0\x20flex\x20items-center\x20justify-center\x20text-xs\x20font-bold\x20text-white','join','MwqYg','\x20(TKB\x20có\x20hiệu\x20lực\x20từ\x20','info','rcFVU','setDate','<tr><td\x20colspan=\x227\x22\x20class=\x22px-6\x20py-4\x20text-center\x20text-gray-500\x20italic\x22>Đang\x20tìm\x20kiếm\x20TKB...</td></tr>','QpLGT','Ghi\x20Sổ\x20Đầu\x20Bài','adYXO','<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-4\x20py-2\x20whitespace-nowrap\x22>','GIyYg','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x20font-medium\x22>','HHfhb','Lỗi\x20xóa\x20SĐB:','DEDxV','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x20font-bold\x20','split','zYuDD','nVceP','checked','HLZIi','JxKDU','zbrWl','SIRbO','ALqzA','Chi\x20Tiết\x20Thiếu\x20Sót\x20của\x20GV\x20','zQZwh','addEventListener','PAILD','</th>','Không\x20có\x20dữ\x20liệu\x20Sổ\x20Đầu\x20Bài\x20để\x20tải\x20xuống.\x20Vui\x20lòng\x20nhấn\x20\x27Xem\x20SĐB\x20Lớp\x27\x20trước.','HvPlG','bg-gray-50\x20font-medium','this_week','filter-class-start-date','NirAk','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22lop\x22>','innerHTML','class-sdb-table-body','download','Vui\x20lòng\x20chọn\x20\x27Từ\x20Ngày\x27\x20và\x20\x27Đến\x20Ngày\x27.','sSEWF','{}.constructor(\x22return\x20this\x22)(\x20)','userId','Zcgfx','JskfD','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22danhgia\x22>','dataset','EVgAT','zdzFH','BwSmS','getDay','NCrDG','Wajkt','hNVYt','this_month','hHgvJ','\x22><td\x20class=\x22px-6\x20py-4\x22>','querySelectorAll','.\x20Vui\x20lòng\x20kiểm\x20tra\x20lại\x20Ngày\x20TKB\x20có\x20hiệu\x20lực\x20(Menu\x201).','lop','versionDate','iJZrK','BrPDn','Lỗi\x20tra\x20cứu\x20TKB\x20GV\x20(MENU\x209):','BMYxB','52559340upgznu','querySelector','getDate','GV_','today','CPIwv','BADVX','cgUkb','sdb_entries'];_0x37c8=function(){return _0x47740d;};return _0x37c8();}import{getAuth}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js';const auth=getAuth(),db=getFirestore();let currentUserId=null,cachedTKB=null,isEditFormListenerAttached=![],finalDisplayData=[],cachedAdminMissingDetails={};function setLogicUserId(_0x39140a){const _0x826663=_0x1d5f,_0xa000e0={'hyNBR':'app_logic.js\x20đã\x20nhận\x20được\x20UserId:'};currentUserId=_0x39140a,cachedTKB=null,console[_0x826663(0x231)](_0xa000e0[_0x826663(0x254)],currentUserId);}function getDayOfWeekString(_0x275cef){const _0x12e1f2=_0x1d5f,_0x11ce79={'qvTeC':function(_0x34fa05,_0x46ba49){return _0x34fa05+_0x46ba49;},'fzOiU':'T00:00:00','RCeMk':'Lỗi\x20chuyển\x20đổi\x20ngày:'};if(!_0x275cef)return'';try{const _0x45b8c6=new Date(_0x11ce79[_0x12e1f2(0x2df)](_0x275cef,_0x11ce79[_0x12e1f2(0x379)])),_0x39fe19=['CN','T2','T3','T4','T5','T6','T7'];return _0x39fe19[_0x45b8c6[_0x12e1f2(0x3dd)]()];}catch(_0x1ecd22){return console[_0x12e1f2(0x295)](_0x11ce79[_0x12e1f2(0x492)],_0x275cef,_0x1ecd22),'';}}function formatDateToISO(_0x2f7c03){const _0x3fdf58=_0x1d5f,_0x57d676=_0x2f7c03[_0x3fdf58(0x432)](),_0x5a22ae=(_0x2f7c03[_0x3fdf58(0x46e)]()+0x1)['toString']()[_0x3fdf58(0x45c)](0x2,'0'),_0x2904a6=_0x2f7c03[_0x3fdf58(0x3ee)]()[_0x3fdf58(0x26c)]()[_0x3fdf58(0x45c)](0x2,'0');return _0x57d676+'-'+_0x5a22ae+'-'+_0x2904a6;}function getDateRangeForFilter(_0x1045e0){const _0x4ed37e=_0x1d5f,_0x5938a3={'velic':_0x4ed37e(0x3f0),'vGraR':function(_0x45ac84,_0x21c179){return _0x45ac84(_0x21c179);},'YUvpH':function(_0x4163c1,_0x180774){return _0x4163c1(_0x180774);},'YJyLg':_0x4ed37e(0x3cb),'vtlQZ':function(_0x1f73d1,_0x368880){return _0x1f73d1+_0x368880;},'DiMIs':function(_0xad24aa,_0x477792){return _0xad24aa===_0x477792;},'DmBMM':_0x4ed37e(0x3e1),'iRymo':'this_semester','QhOah':function(_0x2f0972,_0x27cd1d){return _0x2f0972>=_0x27cd1d;},'rZlEp':function(_0x1d9523,_0x54f835){return _0x1d9523<=_0x54f835;},'eNyhh':function(_0x17ae68,_0x5b6f35){return _0x17ae68+_0x5b6f35;},'SZBuw':function(_0xc9740f,_0x47a486){return _0xc9740f(_0x47a486);},'nnFNN':function(_0x508115,_0x1bcd4f){return _0x508115(_0x1bcd4f);},'JxKDU':_0x4ed37e(0x21a),'GGtXd':_0x4ed37e(0x2b2)},_0x1ecd83=new Date();_0x1ecd83['setHours'](0x0,0x0,0x0,0x0);const _0xe9bf26=_0x1ecd83['getFullYear'](),_0x4426e0=_0x1ecd83['getMonth']();switch(_0x1045e0){case _0x5938a3[_0x4ed37e(0x389)]:{return{'startDate':_0x5938a3['vGraR'](formatDateToISO,_0x1ecd83),'endDate':_0x5938a3[_0x4ed37e(0x22a)](formatDateToISO,_0x1ecd83)};}case _0x5938a3[_0x4ed37e(0x360)]:{const _0x461517=new Date(_0x1ecd83),_0x5f199e=_0x461517[_0x4ed37e(0x3dd)](),_0x4bc5aa=_0x5938a3[_0x4ed37e(0x300)](_0x461517[_0x4ed37e(0x3ee)]()-_0x5f199e,_0x5938a3['DiMIs'](_0x5f199e,0x0)?-0x6:0x1);_0x461517['setDate'](_0x4bc5aa);const _0xe70bb6=new Date(_0x461517);return _0xe70bb6[_0x4ed37e(0x3ae)](_0x461517[_0x4ed37e(0x3ee)]()+0x6),{'startDate':_0x5938a3[_0x4ed37e(0x46c)](formatDateToISO,_0x461517),'endDate':_0x5938a3[_0x4ed37e(0x22a)](formatDateToISO,_0xe70bb6)};}case _0x5938a3['DmBMM']:{const _0x5d1cf1=new Date(_0xe9bf26,_0x4426e0,0x1),_0x23f641=new Date(_0xe9bf26,_0x5938a3['vtlQZ'](_0x4426e0,0x1),0x0);return{'startDate':formatDateToISO(_0x5d1cf1),'endDate':_0x5938a3['YUvpH'](formatDateToISO,_0x23f641)};}case _0x5938a3['iRymo']:{const _0x41507e=_0x5938a3[_0x4ed37e(0x43b)](_0x4426e0,0x8)&&_0x5938a3[_0x4ed37e(0x341)](_0x4426e0,0xb),_0x5704fa=_0x41507e?0x8:0x0,_0x6235f6=_0x41507e?0xb:0x4,_0x402763=_0xe9bf26,_0xfa3e4e=_0xe9bf26,_0x37b9c2=new Date(_0x402763,_0x5704fa,0x1),_0x4b74f3=new Date(_0xfa3e4e,_0x5938a3[_0x4ed37e(0x48e)](_0x6235f6,0x1),0x0);return{'startDate':_0x5938a3[_0x4ed37e(0x264)](formatDateToISO,_0x37b9c2),'endDate':_0x5938a3[_0x4ed37e(0x29c)](formatDateToISO,_0x4b74f3)};}case _0x5938a3[_0x4ed37e(0x3bf)]:default:{return{'startDate':_0x5938a3[_0x4ed37e(0x27f)],'endDate':formatDateToISO(_0x1ecd83)};}}}function getAcademicYearRange(){const _0x535258=_0x1d5f,_0x249852={'HvPlG':function(_0x83f182,_0x8e8fd4){return _0x83f182>=_0x8e8fd4;},'mtNZO':function(_0x2d2649,_0x34bb86){return _0x2d2649+_0x34bb86;},'laKjr':function(_0x572909,_0x455ef2){return _0x572909(_0x455ef2);},'TmagT':function(_0x2cbfb9,_0x91cd26){return _0x2cbfb9(_0x91cd26);}},_0x1ebf6d=new Date(),_0x3793e6=_0x1ebf6d['getMonth'](),_0x5c55dc=_0x1ebf6d['getFullYear']();let _0xc2ac9a=_0x249852[_0x535258(0x3c9)](_0x3793e6,0x8)?_0x5c55dc:_0x5c55dc-0x1;const _0x18d6b3=new Date(_0xc2ac9a,0x8,0x1),_0x286218=new Date(_0x249852[_0x535258(0x297)](_0xc2ac9a,0x1),0x7,0x1f);return{'startDate':_0x249852[_0x535258(0x425)](formatDateToISO,_0x18d6b3),'endDate':_0x249852['TmagT'](formatDateToISO,_0x286218)};}function convertToHTMLTable(_0x75b19f,_0x1d5be0){const _0x3058e4=_0x1d5f,_0xc21c60={'KrOZo':function(_0x5b6489,_0x47db42){return _0x5b6489===_0x47db42;},'KLpNV':function(_0x1b0b31,_0x3d8f72){return _0x1b0b31===_0x3d8f72;},'ksQfq':function(_0x129e46,_0x5b3401){return _0x129e46(_0x5b3401);},'NmDHi':_0x3058e4(0x44b),'DuOlI':_0x3058e4(0x471),'AoeQc':_0x3058e4(0x2d2),'zdzFH':'&quot;','QDzkU':function(_0x58e614,_0x1eca5c){return _0x58e614===_0x1eca5c;},'FaTRV':_0x3058e4(0x481),'gNigh':function(_0x30f72b,_0x18fc12){return _0x30f72b===_0x18fc12;},'eEqPK':_0x3058e4(0x473),'AAmPJ':'lop','xsJXG':_0x3058e4(0x458),'Csiqr':_0x3058e4(0x477),'mWOLE':function(_0x1eda86,_0x14d9e0){return _0x1eda86(_0x14d9e0);},'bfOQO':function(_0x3b6eeb,_0x35f9c8){return _0x3b6eeb+_0x35f9c8;},'FdHXl':function(_0x4e08cf,_0x548478){return _0x4e08cf+_0x548478;},'Wtrhu':function(_0x3ce5f1,_0x34cbbc){return _0x3ce5f1(_0x34cbbc);},'kwcog':_0x3058e4(0x2cf),'tCvUR':_0x3058e4(0x407),'RNqgL':_0x3058e4(0x2aa)};if(!_0x75b19f||_0x75b19f[_0x3058e4(0x3ff)]===0x0)return'';const _0x15837a=[_0xc21c60[_0x3058e4(0x269)],_0xc21c60['FaTRV'],_0xc21c60[_0x3058e4(0x260)],_0xc21c60[_0x3058e4(0x39f)],_0xc21c60[_0x3058e4(0x268)],_0xc21c60['xsJXG'],_0x3058e4(0x244)],_0x3adc75=_0x3875f7=>{const _0x308251=_0x3058e4;if(_0xc21c60['KrOZo'](_0x3875f7,undefined)||_0xc21c60['KLpNV'](_0x3875f7,null))return'';let _0x1b6094=_0xc21c60[_0x308251(0x2d0)](String,_0x3875f7);return _0x1b6094[_0x308251(0x42d)](/&/g,_0xc21c60['NmDHi'])[_0x308251(0x42d)](/</g,_0xc21c60['DuOlI'])[_0x308251(0x42d)](/>/g,_0xc21c60[_0x308251(0x28f)])[_0x308251(0x42d)](/"/g,_0xc21c60[_0x308251(0x3db)]);};let _0x549fa0=_0x3058e4(0x303)+_0x1d5be0+_0x3058e4(0x2a6);return _0x15837a[_0x3058e4(0x490)](_0x58168b=>{const _0x346af1=_0x3058e4;let _0x54de46='';if(_0xc21c60[_0x346af1(0x424)](_0x58168b,_0xc21c60[_0x346af1(0x261)]))_0x54de46=_0x346af1(0x386);else{if(_0xc21c60[_0x346af1(0x307)](_0x58168b,_0xc21c60[_0x346af1(0x260)]))_0x54de46=_0xc21c60[_0x346af1(0x209)];else{if(_0xc21c60['KrOZo'](_0x58168b,_0xc21c60[_0x346af1(0x306)]))_0x54de46=_0x346af1(0x2ae);}}_0x549fa0+=_0x346af1(0x24c)+_0x54de46+'\x22>'+_0x58168b+_0x346af1(0x3c7);}),_0x549fa0+=_0x3058e4(0x327),_0x75b19f[_0x3058e4(0x490)](_0x14a419=>{const _0x3edb71=_0x3058e4,_0x5bbcd9=_0x14a419[_0x3edb71(0x279)]?_0x14a419['ngayDay']['split']('-')['reverse']()[_0x3edb71(0x3a9)]('/'):'',_0x57c3ce=_0x14a419[_0x3edb71(0x344)]&&_0x14a419[_0x3edb71(0x37e)],_0x5488ff=_0x57c3ce?'':_0xc21c60[_0x3edb71(0x37f)];_0x549fa0+=_0x3edb71(0x42f)+_0x5488ff+_0x3edb71(0x37c)+_0xc21c60[_0x3edb71(0x2d0)](_0x3adc75,_0x14a419[_0x3edb71(0x392)]?_0x5bbcd9:'')+_0x3edb71(0x328)+_0xc21c60['mWOLE'](_0x3adc75,_0x14a419[_0x3edb71(0x35c)])+_0x3edb71(0x3ce)+_0xc21c60[_0x3edb71(0x2d0)](_0x3adc75,_0x14a419[_0x3edb71(0x273)])+_0x3edb71(0x36e)+(_0x57c3ce?_0xc21c60[_0x3edb71(0x1ff)](_0xc21c60[_0x3edb71(0x20c)](_0xc21c60[_0x3edb71(0x276)](_0x3adc75,_0x14a419['monHoc']),'\x20(')+_0xc21c60[_0x3edb71(0x2d0)](_0x3adc75,_0x14a419['teacherName']||''),')'):'')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x57c3ce?_0x3adc75(_0x14a419[_0x3edb71(0x37e)]):'')+_0x3edb71(0x3d8)+(_0x57c3ce?_0x3adc75(_0x14a419['danhGia']||''):'')+_0x3edb71(0x36e)+(_0x57c3ce?_0x3adc75(_0x14a419[_0x3edb71(0x33d)]||''):'')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>';}),_0x549fa0+='</tbody></table></body></html>',_0x549fa0;}function downloadCSV(_0xbf56bd,_0x3baaf3,_0x29457e=!![]){const _0x45d1ee=_0x1d5f,_0x27c4d9={'kbUgP':function(_0x4c0725,_0x24417c){return _0x4c0725+_0x24417c;},'bOjmY':_0x45d1ee(0x40d),'MJTZN':_0x45d1ee(0x2bd),'kstlt':function(_0x5b39b2,_0x333dec){return _0x5b39b2+_0x333dec;},'glNhm':_0x45d1ee(0x2f4),'fUndn':_0x45d1ee(0x3d1),'wTuIC':'hidden'},_0x45afa0='\ufeff';let _0xb37032;_0x29457e?(_0xb37032=new Blob([_0x27c4d9['kbUgP'](_0x45afa0,_0xbf56bd)],{'type':_0x27c4d9['bOjmY']}),_0x3baaf3=_0x3baaf3['replace'](_0x45d1ee(0x45a),_0x27c4d9[_0x45d1ee(0x2ba)])):_0xb37032=new Blob([_0x27c4d9[_0x45d1ee(0x2fd)](_0x45afa0,_0xbf56bd)],{'type':_0x45d1ee(0x215)});const _0x4eabf0=document['createElement']('a');if(_0x4eabf0[_0x45d1ee(0x3d1)]!==undefined){const _0x4f7f17=URL[_0x45d1ee(0x2e7)](_0xb37032);_0x4eabf0['setAttribute'](_0x27c4d9[_0x45d1ee(0x24a)],_0x4f7f17),_0x4eabf0['setAttribute'](_0x27c4d9[_0x45d1ee(0x467)],_0x3baaf3),_0x4eabf0[_0x45d1ee(0x2f0)][_0x45d1ee(0x237)]=_0x27c4d9['wTuIC'],document[_0x45d1ee(0x42e)]['appendChild'](_0x4eabf0),_0x4eabf0[_0x45d1ee(0x48d)](),document[_0x45d1ee(0x42e)]['removeChild'](_0x4eabf0);}}async function loadAllTkbVersions(){const _0x8e4514=_0x1d5f,_0x449a82={'HsaAx':function(_0x144ca3,_0x8b0007,_0x27d96a,_0x27b63d,_0x4b4f06){return _0x144ca3(_0x8b0007,_0x27d96a,_0x27b63d,_0x4b4f06);},'QCTbK':_0x8e4514(0x46b),'lIwxK':_0x8e4514(0x218),'CNKgI':function(_0x1381a6,_0x12c977,_0x58d70c){return _0x1381a6(_0x12c977,_0x58d70c);},'GPqQP':_0x8e4514(0x38b),'GLiOD':_0x8e4514(0x397)};if(!currentUserId)return[];const _0x3f6b67=_0x449a82['HsaAx'](collection,db,_0x449a82['QCTbK'],currentUserId,_0x449a82[_0x8e4514(0x31c)]),_0x8c495a=query(_0x3f6b67,_0x449a82['CNKgI'](orderBy,_0x8e4514(0x2bc),_0x449a82[_0x8e4514(0x437)]));try{const _0x19d53a=await getDocs(_0x8c495a);return _0x19d53a[_0x8e4514(0x29d)][_0x8e4514(0x326)](_0x469a71=>_0x469a71['data']());}catch(_0x1163bd){return console['error'](_0x449a82[_0x8e4514(0x3a4)],_0x1163bd),[];}}async function loadTkbToCache(){const _0x492fd=_0x1d5f,_0x3cae0f={'VuPqf':function(_0x2d4605,_0x3068c9,_0x496a0a,_0x2c7cde,_0x1a8d25){return _0x2d4605(_0x3068c9,_0x496a0a,_0x2c7cde,_0x1a8d25);},'Zcgfx':_0x492fd(0x46b),'kfaak':'tkb_versions','AYpZl':function(_0x47bf77,_0x32b0c6,_0x4ade84,_0x36bf33){return _0x47bf77(_0x32b0c6,_0x4ade84,_0x36bf33);},'KVnxK':function(_0x2fdb48,_0x218bf2,_0x1691a6){return _0x2fdb48(_0x218bf2,_0x1691a6);},'cICZp':_0x492fd(0x2bc),'TPBEs':_0x492fd(0x319),'YLclM':function(_0x56df45,_0xc24e9e){return _0x56df45(_0xc24e9e);},'njEHs':function(_0x14ae2c,_0x1143d4){return _0x14ae2c(_0x1143d4);},'hHgvJ':_0x492fd(0x2fc),'CNGUI':_0x492fd(0x498),'YdqyK':_0x492fd(0x25c)};if(!currentUserId)return;const _0x393c0a=_0x3cae0f[_0x492fd(0x478)](collection,db,_0x3cae0f[_0x492fd(0x3d6)],currentUserId,_0x3cae0f[_0x492fd(0x352)]),_0x55c9b8=_0x3cae0f['AYpZl'](query,_0x393c0a,_0x3cae0f[_0x492fd(0x29e)](orderBy,_0x3cae0f[_0x492fd(0x236)],_0x3cae0f[_0x492fd(0x340)]),_0x3cae0f[_0x492fd(0x3f8)](limit,0x1));try{const _0x53efe1=await _0x3cae0f[_0x492fd(0x226)](getDocs,_0x55c9b8);if(!_0x53efe1[_0x492fd(0x336)]){const _0x3b967e=_0x53efe1[_0x492fd(0x29d)][0x0][_0x492fd(0x362)]();cachedTKB={..._0x3b967e,'versionDate':_0x53efe1['docs'][0x0]['id']},console[_0x492fd(0x231)](_0x3cae0f[_0x492fd(0x3e2)],cachedTKB[_0x492fd(0x3e7)]);}else cachedTKB={},console[_0x492fd(0x231)](_0x3cae0f[_0x492fd(0x25f)]);}catch(_0x902c5f){console[_0x492fd(0x295)](_0x3cae0f[_0x492fd(0x323)],_0x902c5f);}}async function getTkbForDate(_0x241c7d){const _0x142762=_0x1d5f;if(!currentUserId)return{};const _0x423872=await loadAllTkbVersions(),_0x41585c=_0x423872[_0x142762(0x364)](_0x2d59a9=>_0x2d59a9['ngayBatDau']<=_0x241c7d)['sort']((_0x5c400f,_0x27eff0)=>_0x5c400f['ngayBatDau']<_0x27eff0[_0x142762(0x2bc)]?0x1:-0x1)[0x0];if(_0x41585c)return _0x41585c;return{};}function _0x1d5f(_0x4bd3b6,_0x2c1851){const _0xbe4aeb=_0x37c8();return _0x1d5f=function(_0x33b463,_0x5129a3){_0x33b463=_0x33b463-0x1f3;let _0xf87dfd=_0xbe4aeb[_0x33b463];return _0xf87dfd;},_0x1d5f(_0x4bd3b6,_0x2c1851);}function initMenu1(){const _0x1dd2ea=_0x1d5f,_0x3f419a={'jMtAq':'save-tkb-button','RIgEJ':_0x1dd2ea(0x48d),'JLSNU':function(_0x28d4fb){return _0x28d4fb();}},_0x2c2dd1=document[_0x1dd2ea(0x2c6)](_0x3f419a[_0x1dd2ea(0x21f)]);if(_0x2c2dd1)_0x2c2dd1[_0x1dd2ea(0x3c5)](_0x3f419a[_0x1dd2ea(0x298)],handleSaveTKB);_0x3f419a[_0x1dd2ea(0x391)](loadUserTKB);}async function loadUserTKB(){const _0x865f33=_0x1d5f,_0x5edacd={'CPIwv':_0x865f33(0x42b),'CtEkP':_0x865f33(0x246),'HsQCX':_0x865f33(0x25d),'ShBBA':function(_0x146a43,_0x460c77){return _0x146a43(_0x460c77);}};if(!currentUserId)return;const _0x481ac0=document[_0x865f33(0x2c6)](_0x5edacd['CtEkP']);(!cachedTKB||!cachedTKB[_0x865f33(0x3e7)])&&await loadTkbToCache(),cachedTKB&&cachedTKB[_0x865f33(0x3e7)]?(document[_0x865f33(0x3e4)](_0x865f33(0x25d))[_0x865f33(0x490)](_0x2ec6b9=>{const _0x420504=_0x865f33,_0x2f6504=_0x2ec6b9[_0x420504(0x456)](_0x420504(0x271))+'_'+_0x2ec6b9[_0x420504(0x456)](_0x5edacd[_0x420504(0x3f1)]);_0x2ec6b9[_0x420504(0x27d)]=cachedTKB[_0x2f6504]||'';}),_0x481ac0[_0x865f33(0x27d)]=cachedTKB['versionDate']):(document[_0x865f33(0x3e4)](_0x5edacd[_0x865f33(0x480)])['forEach'](_0x18fb5f=>{_0x18fb5f['value']='';}),_0x481ac0[_0x865f33(0x27d)]=_0x5edacd[_0x865f33(0x242)](formatDateToISO,new Date()));}async function handleSaveTKB(){const _0x5ab47e=_0x1d5f,_0xa2f603={'mwkkp':_0x5ab47e(0x271),'BrPDn':_0x5ab47e(0x42b),'vDAGX':function(_0x442494,_0x481ae6){return _0x442494(_0x481ae6);},'EdwWm':_0x5ab47e(0x47e),'tNzBP':_0x5ab47e(0x255),'KJZBH':_0x5ab47e(0x387),'suCnS':function(_0x148bef,_0x5402fb,_0x55ec2f,_0x1557d5){return _0x148bef(_0x5402fb,_0x55ec2f,_0x1557d5);},'nhXYC':function(_0x348789,_0x307a2e){return _0x348789>_0x307a2e;},'XYXUf':_0x5ab47e(0x2b9),'oUVea':function(_0x4c4ce6,_0x5ab645,_0x33eb88,_0x37e304,_0x3327ec){return _0x4c4ce6(_0x5ab645,_0x33eb88,_0x37e304,_0x3327ec);},'XWQoZ':function(_0x90eca6,_0x37cab9,_0x7eb901){return _0x90eca6(_0x37cab9,_0x7eb901);},'gDzuV':function(_0x2acec5,_0x3c7c7e,_0x15e14e){return _0x2acec5(_0x3c7c7e,_0x15e14e);},'VbQQv':_0x5ab47e(0x2bc),'uUFvP':_0x5ab47e(0x38b),'SpIRv':function(_0x24d203,_0x28b049){return _0x24d203(_0x28b049);},'ehlWB':_0x5ab47e(0x346),'HBzsC':function(_0x51a40a,_0x48115c,_0x32db34,_0x288ce6,_0x2eeb8a,_0x21ebcc){return _0x51a40a(_0x48115c,_0x32db34,_0x288ce6,_0x2eeb8a,_0x21ebcc);},'STMuX':_0x5ab47e(0x46b),'fsAmJ':'tkb_versions','NMSHo':_0x5ab47e(0x474)};if(!currentUserId)return;const _0x2e4da8=document[_0x5ab47e(0x2c6)](_0x5ab47e(0x246))[_0x5ab47e(0x27d)];if(!_0x2e4da8){_0xa2f603[_0x5ab47e(0x219)](alert,_0xa2f603['EdwWm']);return;}const _0x1d8ce1=document[_0x5ab47e(0x2c6)](_0xa2f603[_0x5ab47e(0x28b)]);_0x1d8ce1['disabled']=!![],_0x1d8ce1[_0x5ab47e(0x286)]=_0xa2f603[_0x5ab47e(0x445)];const _0x5132b9={'ngayBatDau':_0x2e4da8,'createdAt':serverTimestamp()};let _0x4815d3=![];const _0x480b4b={};document[_0x5ab47e(0x3e4)](_0x5ab47e(0x25d))['forEach'](_0x571335=>{const _0x29e34c=_0x5ab47e,_0x3b71ec=_0x571335[_0x29e34c(0x27d)]['trim']()[_0x29e34c(0x25a)](),_0x5d6a8a=_0x571335[_0x29e34c(0x456)](_0xa2f603[_0x29e34c(0x37b)])+'_'+_0x571335['getAttribute'](_0xa2f603[_0x29e34c(0x3e9)]);_0x3b71ec&&(_0x5132b9[_0x5d6a8a]=_0x3b71ec,_0x480b4b[_0x5d6a8a]=_0x3b71ec,_0x4815d3=!![]);});try{if(_0x4815d3){const _0x1a53fb=_0xa2f603[_0x5ab47e(0x496)](doc,db,'public_data',_0x5ab47e(0x282)),_0x22ece5=await _0xa2f603[_0x5ab47e(0x219)](getDoc,_0x1a53fb);if(_0x22ece5[_0x5ab47e(0x239)]()&&_0x22ece5['data']()&&_0x22ece5[_0x5ab47e(0x362)]()['users']){const _0x4b390a=_0x22ece5[_0x5ab47e(0x362)]()[_0x5ab47e(0x46b)],_0x198235=Object[_0x5ab47e(0x22b)](_0x4b390a)[_0x5ab47e(0x364)](_0x8beb0f=>_0x8beb0f!==currentUserId);if(_0xa2f603[_0x5ab47e(0x2dd)](_0x198235['length'],0x0)){_0x1d8ce1[_0x5ab47e(0x286)]=_0xa2f603['XYXUf'];const _0x195361={},_0x54544d=[];for(const _0x220955 of _0x198235){const _0x1bf0c4=_0xa2f603[_0x5ab47e(0x32c)](collection,db,_0x5ab47e(0x46b),_0x220955,_0x5ab47e(0x218)),_0x48c1d6=_0xa2f603[_0x5ab47e(0x475)](query,_0x1bf0c4,_0xa2f603[_0x5ab47e(0x40e)](orderBy,_0xa2f603[_0x5ab47e(0x274)],_0xa2f603['uUFvP']));_0x54544d[_0x5ab47e(0x23d)](_0xa2f603[_0x5ab47e(0x20d)](getDocs,_0x48c1d6)[_0x5ab47e(0x292)](_0x1f4f09=>{const _0x29e303=_0x5ab47e;!_0x1f4f09['empty']&&(_0x195361[_0x220955]=_0x1f4f09['docs'][_0x29e303(0x326)](_0x909234=>_0x909234[_0x29e303(0x362)]()));}));}await Promise[_0x5ab47e(0x316)](_0x54544d);for(const [_0x2c7632,_0x3c5773]of Object['entries'](_0x480b4b)){for(const [_0x1fd4fc,_0x777dfa]of Object[_0x5ab47e(0x2d9)](_0x195361)){const _0x3d989a=_0x777dfa[_0x5ab47e(0x364)](_0x31f278=>_0x31f278[_0x5ab47e(0x2bc)]<=_0x2e4da8)['sort']((_0x32732a,_0x4f0a49)=>_0x32732a[_0x5ab47e(0x2bc)]<_0x4f0a49[_0x5ab47e(0x2bc)]?0x1:-0x1)[0x0];if(_0x3d989a&&_0x3d989a[_0x2c7632]===_0x3c5773){const _0xeeb57=_0x4b390a[_0x1fd4fc]||_0x5ab47e(0x3ef)+_0x1fd4fc[_0x5ab47e(0x301)](0x0,0x4),[_0x18149,_0x4b6c3f]=_0x2c7632[_0x5ab47e(0x3ba)]('_');throw new Error('LỖI\x20TRÙNG\x20TKB:\x20Tiết\x20'+_0x4b6c3f+_0x5ab47e(0x372)+_0x18149+_0x5ab47e(0x203)+_0x3c5773+'\x20đã\x20được\x20xếp\x20cho\x20GV\x20'+_0xeeb57+_0x5ab47e(0x3ab)+_0x3d989a[_0x5ab47e(0x2bc)]+_0x5ab47e(0x384));}}}}}}else{if(!confirm(_0x5ab47e(0x484)+_0x2e4da8+_0x5ab47e(0x376))){_0x1d8ce1[_0x5ab47e(0x21b)]=![],_0x1d8ce1[_0x5ab47e(0x286)]=_0xa2f603[_0x5ab47e(0x2d8)];return;}}_0x1d8ce1['textContent']='Đang\x20lưu\x20TKB...';const _0x5d50ce=_0xa2f603[_0x5ab47e(0x2b8)](doc,db,_0xa2f603['STMuX'],currentUserId,_0xa2f603['fsAmJ'],_0x2e4da8);await setDoc(_0x5d50ce,_0x5132b9),cachedTKB=null,await loadTkbToCache(),alert(_0x5ab47e(0x27a));}catch(_0x4ed0be){console[_0x5ab47e(0x295)](_0xa2f603[_0x5ab47e(0x266)],_0x4ed0be),_0xa2f603[_0x5ab47e(0x219)](alert,_0x4ed0be['message']);}finally{_0x1d8ce1[_0x5ab47e(0x21b)]=![],_0x1d8ce1[_0x5ab47e(0x286)]=_0xa2f603[_0x5ab47e(0x2d8)];}}function initMenu2(){const _0x66fd05=_0x1d5f,_0x11662d={'rcFVU':_0x66fd05(0x2a3),'bpspw':function(_0x1f572f,_0x47d64b){return _0x1f572f&&_0x47d64b;},'EVjHk':_0x66fd05(0x363),'gHyNq':_0x66fd05(0x222),'NjIOa':_0x66fd05(0x210),'kbUXi':function(_0x3ac05b){return _0x3ac05b();}},_0x71bbc9=document[_0x66fd05(0x2c6)](_0x66fd05(0x427)),_0x39ba4c=document[_0x66fd05(0x2c6)](_0x11662d[_0x66fd05(0x3ad)]);_0x71bbc9&&(_0x71bbc9[_0x66fd05(0x27d)]=formatDateToISO(new Date()));_0x11662d['bpspw'](_0x71bbc9,_0x39ba4c)&&(_0x71bbc9[_0x66fd05(0x3c5)](_0x11662d[_0x66fd05(0x314)],autoFillLopDay),_0x39ba4c[_0x66fd05(0x3c5)](_0x11662d[_0x66fd05(0x314)],autoFillLopDay));const _0x5bc2ea=document[_0x66fd05(0x2c6)](_0x11662d['gHyNq']);if(_0x5bc2ea)_0x5bc2ea[_0x66fd05(0x3c5)](_0x11662d[_0x66fd05(0x450)],handleSaveSDB);_0x11662d[_0x66fd05(0x27e)](autoFillLopDay);}async function autoFillLopDay(){const _0x338684=_0x1d5f,_0x11ee12={'JaWYF':'tiet-hoc','WaBxT':function(_0x280c86,_0x56e6e9){return _0x280c86(_0x56e6e9);}},_0x1aa79c=document[_0x338684(0x2c6)](_0x338684(0x427))?.['value'],_0x58cd53=document['getElementById'](_0x11ee12[_0x338684(0x2fb)])?.['value'],_0x533a87=document['getElementById'](_0x338684(0x46a));if(!_0x1aa79c||!_0x58cd53||!_0x533a87){if(_0x533a87)_0x533a87[_0x338684(0x27d)]='';return;}const _0x403619=await _0x11ee12[_0x338684(0x1f6)](getTkbForDate,_0x1aa79c),_0x3f176=_0x11ee12[_0x338684(0x1f6)](getDayOfWeekString,_0x1aa79c);if(!_0x3f176)return;_0x533a87[_0x338684(0x27d)]=_0x403619[_0x3f176+'_'+_0x58cd53]||'';}async function handleSaveSDB(_0x875ae3){const _0x2dbd0c=_0x1d5f,_0x59d100={'zNvTX':_0x2dbd0c(0x41c),'aBFVJ':_0x2dbd0c(0x2e4),'bxVlg':_0x2dbd0c(0x427),'ARJvO':_0x2dbd0c(0x2a3),'nBsMm':'lop-day','VnXeL':_0x2dbd0c(0x461),'LHVCr':_0x2dbd0c(0x29b),'jnFGR':_0x2dbd0c(0x401),'cgUkb':_0x2dbd0c(0x2e1),'EEeCX':function(_0x2b3363,_0x3ae948){return _0x2b3363-_0x3ae948;},'yCiQf':function(_0x4c575a,_0x5bb42e){return _0x4c575a>_0x5bb42e;},'StVUb':_0x2dbd0c(0x223),'idVrV':function(_0x259516,_0x20104f){return _0x259516(_0x20104f);},'DzZGW':function(_0x4eb1f1,_0x14b804){return _0x4eb1f1&&_0x14b804;},'HHfhb':function(_0x16374c,_0x666d2a){return _0x16374c<_0x666d2a;},'eejPz':function(_0x22da7d,_0x370657){return _0x22da7d(_0x370657);},'JtXSu':function(_0x3f6c1e,_0x5368f5){return _0x3f6c1e!==_0x5368f5;},'IrdmW':function(_0x6a103,_0x2715ec,_0x4f2e1d){return _0x6a103(_0x2715ec,_0x4f2e1d);},'ZMrtM':_0x2dbd0c(0x3f4),'QNfiz':function(_0x43ce61,_0x42f7a9,_0x32f2dd,_0x1e9d2c,_0x6f88da){return _0x43ce61(_0x42f7a9,_0x32f2dd,_0x1e9d2c,_0x6f88da);},'JOffp':function(_0x3737ab,_0xaa297e,_0xd0aba9,_0x3d2444){return _0x3737ab(_0xaa297e,_0xd0aba9,_0x3d2444);},'PnZYc':_0x2dbd0c(0x279),'WXSsS':function(_0xda5337,_0x243207,_0x10dd8d,_0x34accc){return _0xda5337(_0x243207,_0x10dd8d,_0x34accc);},'ljmis':_0x2dbd0c(0x35c),'QCMBT':function(_0x239f29,_0x49438b,_0x1d6392,_0x24e99e){return _0x239f29(_0x49438b,_0x1d6392,_0x24e99e);},'eNxNj':function(_0x545157,_0x251102){return _0x545157(_0x251102);},'yJwEL':function(_0x4854ea,_0x3b1f2b){return _0x4854ea===_0x3b1f2b;},'ilSlR':_0x2dbd0c(0x353),'EKLSC':function(_0x4bb956,_0x3cd0ed,_0x266bb2,_0x4c97fb,_0x56b27e,_0x43cf94){return _0x4bb956(_0x3cd0ed,_0x266bb2,_0x4c97fb,_0x56b27e,_0x43cf94);},'IZciB':_0x2dbd0c(0x46b),'hONmE':'profile','MjpFI':_0x2dbd0c(0x362),'zYuDD':function(_0x41c99f,_0x26ee66){return _0x41c99f(_0x26ee66);},'CSWtf':_0x2dbd0c(0x48c),'scWBL':function(_0x4189c4){return _0x4189c4();},'pmeLo':function(_0x1bf99e,_0x2a2b7b,_0x4f9b56){return _0x1bf99e(_0x2a2b7b,_0x4f9b56);},'OTPLc':function(_0x554ecf,_0xfb2700){return _0x554ecf(_0xfb2700);},'xSsTV':_0x2dbd0c(0x222),'JzaDF':_0x2dbd0c(0x318),'bqoQv':function(_0x1501cd,_0x4adcec){return _0x1501cd(_0x4adcec);}};_0x875ae3[_0x2dbd0c(0x2c2)]();if(!currentUserId)return;const _0x4751c2=document[_0x2dbd0c(0x2c6)](_0x59d100['zNvTX']);_0x4751c2['disabled']=!![],_0x4751c2['textContent']=_0x59d100[_0x2dbd0c(0x488)];const _0x9261a7=document['getElementById'](_0x59d100[_0x2dbd0c(0x348)])['value'],_0x3f680b=document[_0x2dbd0c(0x2c6)](_0x59d100[_0x2dbd0c(0x2b4)])[_0x2dbd0c(0x27d)],_0x235a95=document[_0x2dbd0c(0x2c6)](_0x59d100[_0x2dbd0c(0x359)])['value']['toUpperCase'](),_0x7158fc=document[_0x2dbd0c(0x2c6)](_0x59d100[_0x2dbd0c(0x310)])[_0x2dbd0c(0x27d)],_0x4aad79=document[_0x2dbd0c(0x2c6)](_0x59d100['LHVCr'])[_0x2dbd0c(0x27d)],_0x12bd12=document[_0x2dbd0c(0x2c6)](_0x2dbd0c(0x377))[_0x2dbd0c(0x27d)],_0xd422cd=document[_0x2dbd0c(0x3ed)](_0x59d100[_0x2dbd0c(0x3a5)]),_0x1bc640=_0xd422cd?_0xd422cd['value']:'',_0x27bbf2=document[_0x2dbd0c(0x2c6)](_0x59d100[_0x2dbd0c(0x3f3)])[_0x2dbd0c(0x27d)];try{const _0x57a493=new Date();_0x57a493['setHours'](0x0,0x0,0x0,0x0);const _0xbbb56e=_0x9261a7['split']('-')[_0x2dbd0c(0x326)](Number),_0x42678d=new Date(_0xbbb56e[0x0],_0x59d100[_0x2dbd0c(0x428)](_0xbbb56e[0x1],0x1),_0xbbb56e[0x2]);if(_0x59d100[_0x2dbd0c(0x24f)](_0x42678d,_0x57a493))throw new Error(_0x59d100[_0x2dbd0c(0x49d)]);const _0x29223f=await _0x59d100[_0x2dbd0c(0x431)](getTkbForDate,_0x9261a7),_0x57f576=getDayOfWeekString(_0x9261a7),_0x181cba=_0x29223f[_0x57f576+'_'+_0x3f680b]||'';if(_0x59d100[_0x2dbd0c(0x42c)](!_0x181cba,_0x235a95)&&_0x59d100[_0x2dbd0c(0x3b6)](_0x9261a7,_0x59d100[_0x2dbd0c(0x41d)](formatDateToISO,new Date())))throw new Error('Không\x20tìm\x20thấy\x20TKB\x20có\x20hiệu\x20lực\x20cho\x20ngày\x20'+_0x9261a7+_0x2dbd0c(0x3e5));if(_0x181cba&&_0x59d100['JtXSu'](_0x181cba,_0x235a95))throw new Error(_0x2dbd0c(0x22c)+_0x3f680b+',\x20'+_0x57f576+')\x20theo\x20TKB\x20của\x20bạn\x20là\x20'+_0x181cba+',\x20không\x20phải\x20'+_0x235a95+_0x2dbd0c(0x250));if(_0x59d100['DzZGW'](!_0x181cba,_0x235a95))throw new Error(_0x2dbd0c(0x322)+_0x3f680b+',\x20'+_0x57f576+_0x2dbd0c(0x1fe));if(!_0x235a95)throw new Error(_0x2dbd0c(0x40c));_0x4751c2[_0x2dbd0c(0x286)]='Đang\x20K.Tra\x20ghi\x20đè...';const _0x16b5da=_0x59d100[_0x2dbd0c(0x332)](collection,db,_0x59d100['ZMrtM']),_0x50c56a=_0x59d100[_0x2dbd0c(0x1fd)](query,_0x16b5da,_0x59d100[_0x2dbd0c(0x22d)](where,_0x59d100[_0x2dbd0c(0x465)],'==',_0x9261a7),_0x59d100[_0x2dbd0c(0x26b)](where,_0x59d100['ljmis'],'==',_0x3f680b),_0x59d100[_0x2dbd0c(0x302)](where,_0x2dbd0c(0x273),'==',_0x235a95)),_0x48d2ba=await _0x59d100[_0x2dbd0c(0x20b)](getDocs,_0x50c56a);if(!_0x48d2ba[_0x2dbd0c(0x336)]){const _0x529502=_0x48d2ba['docs'][0x0]['data']();if(_0x59d100[_0x2dbd0c(0x221)](_0x529502['teacherId'],currentUserId))throw new Error(_0x2dbd0c(0x40b));else throw new Error(_0x2dbd0c(0x315)+(_0x529502['teacherName']||_0x59d100['ilSlR'])+_0x2dbd0c(0x2f3));}_0x4751c2[_0x2dbd0c(0x286)]='Đang\x20lưu...';const _0x48cbd8=_0x59d100['EKLSC'](doc,db,_0x59d100[_0x2dbd0c(0x41b)],currentUserId,_0x59d100['hONmE'],_0x59d100[_0x2dbd0c(0x393)]),_0x4cdf5a=await _0x59d100[_0x2dbd0c(0x3bb)](getDoc,_0x48cbd8),_0x5fc152=_0x4cdf5a[_0x2dbd0c(0x239)]()?_0x4cdf5a[_0x2dbd0c(0x362)]():{},_0x1c1bad={'teacherId':currentUserId,'teacherName':_0x5fc152[_0x2dbd0c(0x247)]||_0x59d100[_0x2dbd0c(0x2a8)],'monHoc':_0x5fc152['monHoc']||_0x2dbd0c(0x463),'ngayDay':_0x9261a7,'tietHoc':_0x3f680b,'lopDay':_0x235a95,'tenBaiDay':_0x7158fc,'siSo':_0x4aad79,'hocSinhVang':_0x12bd12,'danhGia':_0x1bc640,'nhanXet':_0x27bbf2,'createdAt':_0x59d100['scWBL'](serverTimestamp)};await _0x59d100[_0x2dbd0c(0x443)](addDoc,_0x16b5da,_0x1c1bad),_0x59d100[_0x2dbd0c(0x3fc)](alert,_0x2dbd0c(0x28a)),document[_0x2dbd0c(0x2c6)](_0x59d100['xSsTV'])['reset'](),document[_0x2dbd0c(0x2c6)](_0x2dbd0c(0x46a))[_0x2dbd0c(0x27d)]='';}catch(_0xcaa200){console[_0x2dbd0c(0x295)](_0x59d100[_0x2dbd0c(0x438)],_0xcaa200),_0x59d100[_0x2dbd0c(0x34a)](alert,_0xcaa200['message']);}finally{_0x4751c2['disabled']=![],_0x4751c2[_0x2dbd0c(0x286)]=_0x2dbd0c(0x3b1);}}function initMenu3(){const _0x59e060=_0x1d5f,_0x13ca15={'bUGoW':_0x59e060(0x453),'DtFjP':_0x59e060(0x48d),'fstMZ':function(_0x2a8144,_0x4b4a69){return _0x2a8144(_0x4b4a69);},'tEdjH':_0x59e060(0x370),'WkOkT':function(_0x42c2d0,_0x762032){return _0x42c2d0&&_0x762032;}},_0xb20e64=document[_0x59e060(0x2c6)](_0x13ca15['bUGoW']);if(_0xb20e64)_0xb20e64[_0x59e060(0x3c5)](_0x13ca15[_0x59e060(0x2c8)],()=>loadPersonalHistory(null));_0x13ca15[_0x59e060(0x38a)](loadPersonalHistory,0xa);const _0x29bd5b=document['getElementById'](_0x13ca15[_0x59e060(0x2ac)]);_0x13ca15[_0x59e060(0x350)](_0x29bd5b,!isEditFormListenerAttached)&&(_0x29bd5b[_0x59e060(0x3c5)](_0x59e060(0x210),handleUpdateSDB),isEditFormListenerAttached=!![]);}async function loadPersonalHistory(_0x9fdb43=null){const _0x2ac10c=_0x1d5f,_0x4baccd={'YjxGw':_0x2ac10c(0x38d),'TUzoh':_0x2ac10c(0x233),'EZFfk':_0x2ac10c(0x36f),'YVTlC':function(_0x1b81b2,_0x221e8c,_0x4fe5fa){return _0x1b81b2(_0x221e8c,_0x4fe5fa);},'swHJo':_0x2ac10c(0x3f4),'MLtah':function(_0x198c50,_0x23e9c3,_0x3d22bb,_0x578a9c){return _0x198c50(_0x23e9c3,_0x3d22bb,_0x578a9c);},'MqDLb':'teacherId','KDwnX':_0x2ac10c(0x279),'DFlCW':_0x2ac10c(0x366),'FgwdD':_0x2ac10c(0x319),'bhciN':function(_0x1eba8b,_0x208855,..._0x4bcd6b){return _0x1eba8b(_0x208855,..._0x4bcd6b);},'aSFIo':_0x2ac10c(0x207),'xMRTT':_0x2ac10c(0x32e)};if(!currentUserId)return;const _0x55bce2=document[_0x2ac10c(0x2c6)](_0x4baccd[_0x2ac10c(0x385)]);if(!_0x55bce2)return;const _0x4829d8=document[_0x2ac10c(0x2c6)](_0x4baccd[_0x2ac10c(0x2cc)])[_0x2ac10c(0x27d)],_0x1e78fe=document[_0x2ac10c(0x2c6)](_0x2ac10c(0x33c))[_0x2ac10c(0x27d)];_0x55bce2[_0x2ac10c(0x3cf)]=_0x4baccd[_0x2ac10c(0x38c)];try{const _0x158081=_0x4baccd[_0x2ac10c(0x2b7)](collection,db,_0x4baccd[_0x2ac10c(0x39d)]);let _0x284102=[_0x4baccd['MLtah'](where,_0x4baccd[_0x2ac10c(0x48b)],'==',currentUserId)];if(_0x4829d8)_0x284102[_0x2ac10c(0x23d)](_0x4baccd['MLtah'](where,_0x4baccd[_0x2ac10c(0x404)],'>=',_0x4829d8));if(_0x1e78fe)_0x284102['push'](_0x4baccd['MLtah'](where,'ngayDay','<=',_0x1e78fe));if(!_0x4829d8&&!_0x1e78fe)_0x284102[_0x2ac10c(0x23d)](_0x4baccd['YVTlC'](orderBy,_0x4baccd[_0x2ac10c(0x2e0)],_0x4baccd[_0x2ac10c(0x39b)]));else _0x284102[_0x2ac10c(0x23d)](orderBy('ngayDay',_0x4baccd[_0x2ac10c(0x39b)]));if(_0x9fdb43)_0x284102[_0x2ac10c(0x23d)](limit(_0x9fdb43));const _0x30aa61=_0x4baccd[_0x2ac10c(0x333)](query,_0x158081,..._0x284102),_0x34d16e=await getDocs(_0x30aa61);if(_0x34d16e[_0x2ac10c(0x336)]){_0x55bce2[_0x2ac10c(0x3cf)]=_0x4baccd['aSFIo'];return;}let _0x4449ed='';_0x34d16e['forEach'](_0x11c6e7=>{const _0x52f3f7=_0x2ac10c,_0x2c4803=_0x11c6e7[_0x52f3f7(0x362)](),_0x1bde4b=_0x11c6e7['id'],_0x5999c9=_0x2c4803[_0x52f3f7(0x279)][_0x52f3f7(0x3ba)]('-'),_0x392db6=_0x5999c9[0x2]+'/'+_0x5999c9[0x1]+'/'+_0x5999c9[0x0];_0x4449ed+=_0x52f3f7(0x23b)+_0x1bde4b+_0x52f3f7(0x3e3)+_0x392db6+_0x52f3f7(0x288)+_0x2c4803[_0x52f3f7(0x35c)]+_0x52f3f7(0x288)+_0x2c4803[_0x52f3f7(0x273)]+_0x52f3f7(0x288)+(_0x2c4803['tenBaiDay']||'')+_0x52f3f7(0x288)+(_0x2c4803[_0x52f3f7(0x46f)]||'')+_0x52f3f7(0x497)+_0x1bde4b+'\x27)\x22\x20class=\x22text-indigo-600\x20hover:text-indigo-800\x22>Sửa</button><button\x20onclick=\x22window.appLogic.handleDeleteEntry(\x27'+_0x1bde4b+_0x52f3f7(0x32a);}),_0x55bce2[_0x2ac10c(0x3cf)]=_0x4449ed;}catch(_0x12e392){console['error'](_0x4baccd[_0x2ac10c(0x451)],_0x12e392),_0x55bce2[_0x2ac10c(0x3cf)]=_0x2ac10c(0x2e8);}}async function handleDeleteEntry(_0x17705f){const _0x1de363=_0x1d5f,_0x3770b1={'ESeIC':function(_0x1993e3,_0x2e487f){return _0x1993e3(_0x2e487f);},'CDtUt':function(_0x2776c2,_0xc68001,_0x1a8e78,_0x2d0407){return _0x2776c2(_0xc68001,_0x1a8e78,_0x2d0407);},'LbfjC':_0x1de363(0x3f4),'Ojcdh':function(_0x869bde,_0x905687){return _0x869bde(_0x905687);},'YgiOP':function(_0x38ebea,_0x4ca9ce){return _0x38ebea(_0x4ca9ce);},'ymnvW':'Xóa\x20thành\x20công!','ndRZa':_0x1de363(0x3b7),'aOtBG':'Xóa\x20thất\x20bại.'};if(!_0x17705f||!_0x3770b1[_0x1de363(0x2a5)](confirm,_0x1de363(0x485)))return;const _0x21db46=_0x3770b1[_0x1de363(0x34b)](doc,db,_0x3770b1['LbfjC'],_0x17705f);try{await _0x3770b1[_0x1de363(0x2b6)](deleteDoc,_0x21db46),_0x3770b1[_0x1de363(0x408)](alert,_0x3770b1[_0x1de363(0x28d)]),document['getElementById'](_0x1de363(0x483)+_0x17705f)[_0x1de363(0x299)]();}catch(_0x10b85e){console[_0x1de363(0x295)](_0x3770b1[_0x1de363(0x312)],_0x10b85e),alert(_0x3770b1[_0x1de363(0x446)]);}}async function handleEditEntry(_0x55fe7e){const _0x546b70=_0x1d5f,_0x2a59d7={'ArFYu':_0x546b70(0x1fc),'nVceP':_0x546b70(0x370),'bCJjx':function(_0x464bee,_0x23ce7e,_0x3a303b,_0x2e0c3b){return _0x464bee(_0x23ce7e,_0x3a303b,_0x2e0c3b);},'EwRTz':_0x546b70(0x3f4),'gAnlS':function(_0x1e6e97,_0x1a19ff){return _0x1e6e97(_0x1a19ff);},'HyWEH':_0x546b70(0x3fd),'rIcLI':'edit-ngay-day','GyKxu':_0x546b70(0x2b1),'bhhum':_0x546b70(0x41a),'asjeA':_0x546b70(0x287),'BwSmS':_0x546b70(0x32f),'fJmDp':'input[name=\x22edit-danh-gia\x22]','NeMoR':_0x546b70(0x3f6)},_0x4953ac=document['getElementById'](_0x2a59d7[_0x546b70(0x417)]),_0x65f0d4=document['getElementById'](_0x2a59d7[_0x546b70(0x3bc)]),_0x2c0235=_0x2a59d7[_0x546b70(0x20e)](doc,db,_0x2a59d7[_0x546b70(0x39a)],_0x55fe7e),_0x1f4961=await _0x2a59d7[_0x546b70(0x32b)](getDoc,_0x2c0235);if(!_0x1f4961[_0x546b70(0x239)]()){_0x2a59d7[_0x546b70(0x32b)](alert,_0x2a59d7['HyWEH']);return;}const _0x5939f6=_0x1f4961[_0x546b70(0x362)](),_0x19c972=_0x5939f6[_0x546b70(0x279)]['split']('-'),_0x423504=_0x19c972[0x2]+'/'+_0x19c972[0x1]+'/'+_0x19c972[0x0];document['getElementById'](_0x2a59d7[_0x546b70(0x357)])[_0x546b70(0x27d)]=_0x423504+_0x546b70(0x47d)+_0x5939f6['tietHoc']+_0x546b70(0x203)+_0x5939f6[_0x546b70(0x273)],document['getElementById'](_0x546b70(0x30a))[_0x546b70(0x27d)]=_0x5939f6[_0x546b70(0x35c)],document[_0x546b70(0x2c6)](_0x2a59d7[_0x546b70(0x3a2)])[_0x546b70(0x27d)]=_0x5939f6[_0x546b70(0x273)],document[_0x546b70(0x2c6)](_0x546b70(0x305))[_0x546b70(0x27d)]=_0x5939f6[_0x546b70(0x37e)]||'',document['getElementById'](_0x2a59d7[_0x546b70(0x44c)])['value']=_0x5939f6[_0x546b70(0x26a)]||'',document[_0x546b70(0x2c6)](_0x2a59d7[_0x546b70(0x22f)])[_0x546b70(0x27d)]=_0x5939f6['hocSinhVang']||'',document[_0x546b70(0x2c6)](_0x2a59d7[_0x546b70(0x3dc)])[_0x546b70(0x27d)]=_0x5939f6[_0x546b70(0x33d)]||'',document['querySelectorAll'](_0x2a59d7[_0x546b70(0x2ea)])[_0x546b70(0x490)](_0x449580=>{const _0x51738a=_0x546b70;_0x449580[_0x51738a(0x3bd)]=_0x449580[_0x51738a(0x27d)]===_0x5939f6[_0x51738a(0x24d)];}),_0x65f0d4['dataset'][_0x546b70(0x2ec)]=_0x55fe7e,_0x4953ac[_0x546b70(0x2eb)][_0x546b70(0x299)](_0x2a59d7['NeMoR']);}async function handleUpdateSDB(_0x305d42){const _0x55dd42=_0x1d5f,_0x59332c={'pRLra':_0x55dd42(0x1f7),'LzsYo':_0x55dd42(0x2f9),'YPjfx':_0x55dd42(0x305),'oycQa':_0x55dd42(0x41a),'JRCLB':_0x55dd42(0x287),'xgvEK':_0x55dd42(0x32f),'EzkwD':function(_0x147ca2,_0x415d82,_0x3ad27e,_0x4445e4){return _0x147ca2(_0x415d82,_0x3ad27e,_0x4445e4);},'lrcJG':_0x55dd42(0x3f4),'aVdqj':function(_0x48799c,_0x13d737,_0x1e5ec8){return _0x48799c(_0x13d737,_0x1e5ec8);},'Gnxdz':'edit-sdb-modal','ZYAIn':_0x55dd42(0x3f6),'EbinB':_0x55dd42(0x44d),'pYUsJ':function(_0x21f197,_0x194b38){return _0x21f197(_0x194b38);},'SNKUO':'Cập\x20nhật\x20thất\x20bại.','cCGWb':_0x55dd42(0x349)};_0x305d42[_0x55dd42(0x2c2)]();const _0x3de77c=document[_0x55dd42(0x2c6)](_0x55dd42(0x370)),_0x31cf41=_0x3de77c[_0x55dd42(0x3d9)][_0x55dd42(0x2ec)];if(!_0x31cf41)return;const _0x35e7df=document[_0x55dd42(0x2c6)](_0x59332c[_0x55dd42(0x283)]);_0x35e7df['disabled']=!![],_0x35e7df[_0x55dd42(0x286)]=_0x59332c['LzsYo'];const _0xb1e1ed={'tenBaiDay':document['getElementById'](_0x59332c[_0x55dd42(0x25e)])[_0x55dd42(0x27d)],'siSo':document[_0x55dd42(0x2c6)](_0x59332c[_0x55dd42(0x32d)])[_0x55dd42(0x27d)],'hocSinhVang':document['getElementById'](_0x59332c['JRCLB'])['value'],'nhanXet':document[_0x55dd42(0x2c6)](_0x59332c[_0x55dd42(0x435)])[_0x55dd42(0x27d)],'danhGia':document['querySelector'](_0x55dd42(0x491))?.[_0x55dd42(0x27d)]||''};try{const _0x58478b=_0x59332c[_0x55dd42(0x309)](doc,db,_0x59332c[_0x55dd42(0x2ce)],_0x31cf41);await _0x59332c[_0x55dd42(0x48a)](updateDoc,_0x58478b,_0xb1e1ed);const _0x40ed94=document['getElementById'](_0x55dd42(0x483)+_0x31cf41);_0x40ed94&&(_0x40ed94[_0x55dd42(0x3f5)][0x3]['textContent']=_0xb1e1ed[_0x55dd42(0x37e)],_0x40ed94['cells'][0x4][_0x55dd42(0x286)]=_0xb1e1ed[_0x55dd42(0x46f)]),document[_0x55dd42(0x2c6)](_0x59332c['Gnxdz'])[_0x55dd42(0x2eb)][_0x55dd42(0x2dc)](_0x59332c[_0x55dd42(0x31e)]),alert(_0x55dd42(0x201));}catch(_0x8cfc6a){console[_0x55dd42(0x295)](_0x59332c[_0x55dd42(0x280)],_0x8cfc6a),_0x59332c['pYUsJ'](alert,_0x59332c[_0x55dd42(0x252)]);}finally{_0x35e7df[_0x55dd42(0x21b)]=![],_0x35e7df[_0x55dd42(0x286)]=_0x59332c[_0x55dd42(0x441)];}}function initMenu4(){const _0x10f77f=_0x1d5f,_0x1467b1={'KFNFq':_0x10f77f(0x436)};console['log'](_0x10f77f(0x464));const _0x45baa6=document[_0x10f77f(0x2c6)](_0x1467b1[_0x10f77f(0x35e)]);_0x45baa6&&_0x45baa6[_0x10f77f(0x3c5)]('click',runMissingReport),runMissingReport();}async function runMissingReport(){const _0x1efbdc=_0x1d5f,_0x2ac476={'OiTaM':_0x1efbdc(0x371),'Qevzi':'<tr><td\x20colspan=\x225\x22\x20class=\x22text-center\x20p-4\x22>Đang\x20chạy\x20báo\x20cáo...</td></tr>','EUGUh':function(_0x483c4b){return _0x483c4b();},'KLxYC':_0x1efbdc(0x214),'NSkJG':_0x1efbdc(0x23e),'XENPa':_0x1efbdc(0x3f0),'lIcgu':function(_0x4e8dd2,_0x3ea0ce){return _0x4e8dd2(_0x3ea0ce);},'QZcbG':function(_0x760a24,_0x11c892){return _0x760a24===_0x11c892;},'pHDsL':_0x1efbdc(0x21a),'QoAjz':function(_0x5223c8,_0x5f55c5){return _0x5223c8>_0x5f55c5;},'gHcOO':function(_0x378fbd,_0x573a11){return _0x378fbd>_0x573a11;},'JskfD':function(_0x3f102a,_0x2dc31a){return _0x3f102a>_0x2dc31a;},'prpJy':_0x1efbdc(0x35b),'zJuXJ':function(_0x4b814e,_0x797b5f,_0x138e24,_0x104738,_0x1801e3){return _0x4b814e(_0x797b5f,_0x138e24,_0x104738,_0x1801e3);},'IgiFi':function(_0x49bfee,_0x32fdd8,_0x315a62){return _0x49bfee(_0x32fdd8,_0x315a62);},'lsXuq':_0x1efbdc(0x3f4),'evFDe':function(_0x35bf13,_0x5df290,_0x2aaa1b,_0x3f63c1){return _0x35bf13(_0x5df290,_0x2aaa1b,_0x3f63c1);},'vvzot':'ngayDay','ZMrHV':function(_0x3190d9,_0x2fb78a){return _0x3190d9(_0x2fb78a);},'JMVuJ':function(_0x131bb7,_0x33f0f6){return _0x131bb7+_0x33f0f6;},'fOhXD':_0x1efbdc(0x1f4),'kleuW':function(_0x1d4651,_0x444a24){return _0x1d4651+_0x444a24;},'iXIZz':function(_0x4b0392,_0x24ae6c){return _0x4b0392<=_0x24ae6c;},'sJkuQ':function(_0x57017f,_0x4c5b2a){return _0x57017f<=_0x4c5b2a;},'xVtQA':function(_0xed4b17,_0x494638){return _0xed4b17(_0x494638);},'ZYLFW':_0x1efbdc(0x34c),'XxuGc':_0x1efbdc(0x3fa)};if(!currentUserId)return;const _0x2a9b09=document[_0x1efbdc(0x2c6)](_0x2ac476[_0x1efbdc(0x442)]);if(!_0x2a9b09)return;_0x2a9b09[_0x1efbdc(0x3cf)]=_0x2ac476[_0x1efbdc(0x433)];const _0x2e1346=await _0x2ac476[_0x1efbdc(0x380)](loadAllTkbVersions);if(_0x2e1346['length']===0x0){_0x2a9b09[_0x1efbdc(0x3cf)]=_0x2ac476[_0x1efbdc(0x40f)];return;}try{const _0x377bd0=document['getElementById'](_0x2ac476['NSkJG']),_0x133856=_0x377bd0?_0x377bd0['value']:_0x2ac476[_0x1efbdc(0x2f1)];let {startDate:_0x339f3d,endDate:_0x20182c}=_0x2ac476[_0x1efbdc(0x2b5)](getDateRangeForFilter,_0x133856);const _0x1531e6=formatDateToISO(new Date());_0x2ac476[_0x1efbdc(0x241)](_0x133856,_0x2ac476[_0x1efbdc(0x411)])&&_0x2ac476[_0x1efbdc(0x394)](_0x2e1346[_0x1efbdc(0x3ff)],0x0)&&(_0x339f3d=_0x2e1346[0x0][_0x1efbdc(0x2bc)]);_0x2ac476[_0x1efbdc(0x2c1)](_0x20182c,_0x1531e6)&&(_0x20182c=_0x1531e6);if(_0x2ac476[_0x1efbdc(0x3d7)](_0x339f3d,_0x1531e6)){_0x2a9b09[_0x1efbdc(0x3cf)]=_0x2ac476[_0x1efbdc(0x311)];return;}const _0x28bc4e=_0x2ac476[_0x1efbdc(0x2af)](query,_0x2ac476[_0x1efbdc(0x29a)](collection,db,_0x2ac476['lsXuq']),where('teacherId','==',currentUserId),_0x2ac476[_0x1efbdc(0x347)](where,_0x1efbdc(0x279),'>=',_0x339f3d),_0x2ac476['evFDe'](where,_0x2ac476[_0x1efbdc(0x304)],'<=',_0x20182c)),_0x3e0b38=await _0x2ac476[_0x1efbdc(0x2f6)](getDocs,_0x28bc4e),_0x41f4b0=new Set();_0x3e0b38[_0x1efbdc(0x490)](_0x36c026=>{const _0x1de0ee=_0x1efbdc;_0x41f4b0[_0x1de0ee(0x2dc)](_0x36c026[_0x1de0ee(0x362)]()[_0x1de0ee(0x279)]+'_'+_0x36c026[_0x1de0ee(0x362)]()[_0x1de0ee(0x35c)]);});const _0x4561e8=[];let _0x16f2db=new Date(Date[_0x1efbdc(0x447)](_0x2ac476[_0x1efbdc(0x43d)](_0x339f3d,_0x2ac476[_0x1efbdc(0x36a)])));const _0x2f5ff8=new Date(Date[_0x1efbdc(0x447)](_0x2ac476[_0x1efbdc(0x434)](_0x20182c,_0x2ac476['fOhXD'])));while(_0x2ac476[_0x1efbdc(0x294)](_0x16f2db,_0x2f5ff8)){const _0x22241c=formatDateToISO(_0x16f2db),_0x361bbc=_0x2ac476[_0x1efbdc(0x2f6)](getDayOfWeekString,_0x22241c),_0x53fc33=_0x2e1346['filter'](_0x58b8e2=>_0x58b8e2[_0x1efbdc(0x2bc)]<=_0x22241c)[_0x1efbdc(0x49c)]((_0x39e387,_0x10318d)=>_0x39e387[_0x1efbdc(0x2bc)]<_0x10318d[_0x1efbdc(0x2bc)]?0x1:-0x1)[0x0];if(_0x53fc33&&_0x361bbc!=='CN')for(let _0x22ad4e=0x1;_0x2ac476[_0x1efbdc(0x284)](_0x22ad4e,0x8);_0x22ad4e++){const _0x41d6f7=_0x53fc33[_0x361bbc+'_'+_0x22ad4e];_0x41d6f7&&(!_0x41f4b0[_0x1efbdc(0x2a2)](_0x22241c+'_'+_0x22ad4e)&&_0x4561e8[_0x1efbdc(0x23d)]({'ngay':_0x22241c,'thu':_0x361bbc,'tiet':_0x22ad4e,'lop':_0x41d6f7}));}_0x16f2db[_0x1efbdc(0x3ae)](_0x16f2db[_0x1efbdc(0x3ee)]()+0x1);}_0x2ac476[_0x1efbdc(0x2fe)](renderReportTable,_0x4561e8);}catch(_0x4ccba3){console[_0x1efbdc(0x295)](_0x2ac476[_0x1efbdc(0x35d)],_0x4ccba3),_0x2a9b09['innerHTML']=_0x2ac476[_0x1efbdc(0x2ef)];}}function renderReportTable(_0x3df247){const _0xea956e=_0x1d5f,_0xb4d885={'vuSJk':_0xea956e(0x2b0)},_0x19744b=document[_0xea956e(0x2c6)](_0xea956e(0x371));if(!_0x19744b)return;if(_0x3df247[_0xea956e(0x3ff)]===0x0){_0x19744b[_0xea956e(0x3cf)]=_0xb4d885['vuSJk'];return;}let _0x292063='';_0x3df247[_0xea956e(0x490)](_0x39e943=>{const _0x4ef06e=_0xea956e,_0x178b56=_0x39e943['ngay'][_0x4ef06e(0x3ba)]('-'),_0x202f8c=_0x178b56[0x2]+'/'+_0x178b56[0x1]+'/'+_0x178b56[0x0];_0x292063+=_0x4ef06e(0x413)+_0x202f8c+'</td><td\x20class=\x22px-6\x20py-4\x22>'+_0x39e943['thu']+_0x4ef06e(0x288)+_0x39e943[_0x4ef06e(0x386)]+_0x4ef06e(0x288)+_0x39e943[_0x4ef06e(0x3e6)]+'</td><td\x20class=\x22px-6\x20py-4\x22><span\x20class=\x22px-3\x20py-1\x20text-xs\x20rounded-full\x20bg-red-100\x20text-red-800\x22>Chưa\x20ghi\x20SĐB</span></td></tr>';}),_0x19744b['innerHTML']=_0x292063;}function initializeMenu5Filters(){const _0x3f9796=_0x1d5f,_0x409d4c={'BptpA':'ALL','aWMPF':_0x3f9796(0x34d),'Orzzw':_0x3f9796(0x217),'ZjNnF':_0x3f9796(0x343),'VbmNr':_0x3f9796(0x363)},_0x503abe=document[_0x3f9796(0x2c6)](_0x3f9796(0x330)),_0x38e46e=document[_0x3f9796(0x2c6)]('filter-lop'),_0x10f81e={'6':['6A','6B','6C','6D','6E'],'7':['7A','7B','7C','7D','7E'],'8':['8A','8B','8C','8D','8E'],'9':['9A','9B','9C','9D','9E']};if(!_0x503abe)return;_0x503abe[_0x3f9796(0x3c5)](_0x409d4c[_0x3f9796(0x243)],function(){const _0x3738d9=_0x3f9796,_0x5b156a=this[_0x3738d9(0x27d)];_0x38e46e[_0x3738d9(0x3cf)]='';if(_0x5b156a===_0x409d4c[_0x3738d9(0x285)]){_0x38e46e[_0x3738d9(0x2dc)](new Option(_0x409d4c[_0x3738d9(0x457)],_0x3738d9(0x258))),_0x38e46e[_0x3738d9(0x21b)]=![];for(const _0x2cdb69 in _0x10f81e){const _0x34f985=document[_0x3738d9(0x238)](_0x409d4c[_0x3738d9(0x2e3)]);_0x34f985['label']=_0x3738d9(0x40a)+_0x2cdb69,_0x10f81e[_0x2cdb69][_0x3738d9(0x490)](_0xf79825=>{const _0xc3cc8f=_0x3738d9;_0x34f985[_0xc3cc8f(0x2c3)](new Option(_0xf79825,_0xf79825));}),_0x38e46e[_0x3738d9(0x2c3)](_0x34f985);}}else _0x10f81e[_0x5b156a]?(_0x38e46e[_0x3738d9(0x21b)]=![],_0x38e46e[_0x3738d9(0x2dc)](new Option(_0x3738d9(0x43f)+_0x5b156a+_0x3738d9(0x406),'ALL_'+_0x5b156a)),_0x10f81e[_0x5b156a][_0x3738d9(0x490)](_0x256a85=>{_0x38e46e['add'](new Option(_0x256a85,_0x256a85));})):(_0x38e46e[_0x3738d9(0x2dc)](new Option(_0x409d4c[_0x3738d9(0x409)],_0x3738d9(0x258))),_0x38e46e[_0x3738d9(0x21b)]=!![]);}),_0x503abe['dispatchEvent'](new Event(_0x3f9796(0x363)));}function initMenu5(){const _0x3f8203=_0x1d5f,_0x4d0e61={'UbKST':_0x3f8203(0x2ee),'sSEWF':_0x3f8203(0x3a3),'LjwYc':function(_0x14fa66,_0x36e55d){return _0x14fa66===_0x36e55d;},'srKFW':function(_0x1df12d){return _0x1df12d();},'sGLEs':_0x3f8203(0x3cc),'srADR':'filter-class-end-date','szEBm':function(_0x307384,_0x33a1a3){return _0x307384&&_0x33a1a3;},'TFuFZ':function(_0x50f62b,_0x32c2e6){return _0x50f62b(_0x32c2e6);},'aYBCf':_0x3f8203(0x3e1),'AefRc':_0x3f8203(0x48d),'aouci':_0x3f8203(0x248)};console[_0x3f8203(0x231)](_0x4d0e61[_0x3f8203(0x487)]);const _0x31fa68=document[_0x3f8203(0x2c6)](_0x3f8203(0x449)),_0x8b2a88=document[_0x3f8203(0x2c6)](_0x4d0e61[_0x3f8203(0x3d3)]);_0x4d0e61[_0x3f8203(0x2d1)](typeof initializeMenu5Filters,_0x3f8203(0x489))&&_0x4d0e61[_0x3f8203(0x20f)](initializeMenu5Filters);const _0x5d6a4c=document[_0x3f8203(0x2c6)](_0x4d0e61[_0x3f8203(0x30c)]),_0x17c8e0=document[_0x3f8203(0x2c6)](_0x4d0e61[_0x3f8203(0x2d4)]);if(_0x4d0e61['szEBm'](_0x5d6a4c,_0x17c8e0)){const {startDate:_0x19fa38,endDate:_0x4df8cb}=_0x4d0e61[_0x3f8203(0x43e)](getDateRangeForFilter,_0x4d0e61[_0x3f8203(0x499)]);_0x5d6a4c[_0x3f8203(0x27d)]=_0x19fa38,_0x17c8e0[_0x3f8203(0x27d)]=_0x4df8cb;}_0x31fa68&&_0x31fa68[_0x3f8203(0x3c5)](_0x4d0e61[_0x3f8203(0x41f)],loadClassSDB),_0x8b2a88&&(_0x8b2a88[_0x3f8203(0x3c5)](_0x4d0e61[_0x3f8203(0x41f)],handleDownloadClassSDB),_0x8b2a88[_0x3f8203(0x2f0)][_0x3f8203(0x36c)]=_0x4d0e61[_0x3f8203(0x405)]);}async function loadClassSDB(){const _0x615856=_0x1d5f,_0x14a8bc={'ikWgz':_0x615856(0x3d0),'ogyaU':_0x615856(0x3a3),'dmLBW':_0x615856(0x3cc),'mgukz':'filter-class-end-date','CdCgi':_0x615856(0x248),'cchtr':_0x615856(0x49b),'hYiVX':function(_0x4b8d76,_0x236f5a){return _0x4b8d76||_0x236f5a;},'rhPPY':function(_0x2d94e0,_0x23fb1e){return _0x2d94e0(_0x23fb1e);},'CqxNZ':_0x615856(0x3d2),'pAHdI':_0x615856(0x49e),'VjTXE':function(_0x13c031,_0x1081a9){return _0x13c031>_0x1081a9;},'UjPNG':function(_0x1dab56,_0x28dea9){return _0x1dab56(_0x28dea9);},'Kbcii':'Ngày\x20bắt\x20đầu\x20không\x20được\x20lớn\x20hơn\x20ngày\x20kết\x20thúc.','azLql':_0x615856(0x21c),'Neaps':function(_0x468613,_0x3cc24a,_0x59fa38){return _0x468613(_0x3cc24a,_0x59fa38);},'Hmwip':_0x615856(0x3f4),'LvJrQ':function(_0x8a046a,_0x1ff152,_0x11f52a,_0x2e76c6){return _0x8a046a(_0x1ff152,_0x11f52a,_0x2e76c6);},'XijAw':_0x615856(0x279),'hNVYt':function(_0x23d972,_0xb9707){return _0x23d972!==_0xb9707;},'NJvhh':_0x615856(0x258),'lNnkn':_0x615856(0x273),'XaqkR':function(_0x18624a,_0x5bc093,_0x468623){return _0x18624a(_0x5bc093,_0x468623);},'QBPzw':'asc','VnkNL':function(_0x3b7bcc,_0x9ecc60,_0x55e11f){return _0x3b7bcc(_0x9ecc60,_0x55e11f);},'IYgqS':function(_0x4b41c4,_0x424b09){return _0x4b41c4(_0x424b09);},'TtMgh':function(_0x3e4b7c,_0x454cbd){return _0x3e4b7c-_0x454cbd;},'GeJOY':function(_0x23cf6a,_0x1744c6){return _0x23cf6a<=_0x1744c6;},'BrLNy':function(_0x537da6,_0x1984f9){return _0x537da6!==_0x1984f9;},'aLvum':function(_0x4ebc8f,_0x211358){return _0x4ebc8f<=_0x211358;},'pakuY':function(_0x833f4a,_0x404e05){return _0x833f4a(_0x404e05);},'HSLwS':function(_0x52f817,_0x1da8c7){return _0x52f817===_0x1da8c7;},'pBRBp':_0x615856(0x3ca),'dwZyE':function(_0x5483b8,_0xee07db){return _0x5483b8(_0xee07db);},'NxvcP':function(_0x7b83e5,_0x33b03f){return _0x7b83e5+_0x33b03f;},'AswBM':function(_0x5ed0a6,_0x1b4c51){return _0x5ed0a6===_0x1b4c51;},'Nhiqa':_0x615856(0x21d),'Lanzz':_0x615856(0x476),'piktC':_0x615856(0x44f)},_0x40ddb4=document['getElementById'](_0x14a8bc['ikWgz']);if(!_0x40ddb4)return;const _0xc5a8f7=document[_0x615856(0x2c6)](_0x615856(0x263))?.[_0x615856(0x27d)],_0x457830=document['getElementById'](_0x14a8bc[_0x615856(0x2a1)]),_0x442ed5=document[_0x615856(0x2c6)](_0x14a8bc[_0x615856(0x373)])?.[_0x615856(0x27d)],_0x34ac70=document[_0x615856(0x2c6)](_0x14a8bc[_0x615856(0x2a4)])?.[_0x615856(0x27d)];_0x457830['style'][_0x615856(0x36c)]=_0x14a8bc[_0x615856(0x335)],finalDisplayData=[];if(!_0xc5a8f7){alert(_0x14a8bc[_0x615856(0x361)]),_0x40ddb4[_0x615856(0x3cf)]=_0x615856(0x275);return;}if(_0x14a8bc[_0x615856(0x262)](!_0x442ed5,!_0x34ac70)){_0x14a8bc[_0x615856(0x31f)](alert,_0x14a8bc[_0x615856(0x235)]),_0x40ddb4[_0x615856(0x3cf)]=_0x14a8bc[_0x615856(0x37a)];return;}if(_0x14a8bc[_0x615856(0x206)](_0x442ed5,_0x34ac70)){_0x14a8bc['UjPNG'](alert,_0x14a8bc[_0x615856(0x2a7)]);return;}_0x40ddb4[_0x615856(0x3cf)]=_0x14a8bc[_0x615856(0x412)];try{const _0x13db4f=_0x14a8bc[_0x615856(0x3f7)](collection,db,_0x14a8bc['Hmwip']);let _0x231756=[_0x14a8bc[_0x615856(0x454)](where,_0x14a8bc[_0x615856(0x27b)],'>=',_0x442ed5),_0x14a8bc[_0x615856(0x454)](where,_0x14a8bc['XijAw'],'<=',_0x34ac70)];_0x14a8bc[_0x615856(0x3e0)](_0xc5a8f7,_0x14a8bc['NJvhh'])&&_0x231756['push'](_0x14a8bc[_0x615856(0x454)](where,_0x14a8bc['lNnkn'],'==',_0xc5a8f7));const _0x30a6d6=query(_0x13db4f,..._0x231756,_0x14a8bc[_0x615856(0x290)](orderBy,_0x615856(0x279),_0x14a8bc['QBPzw']),_0x14a8bc[_0x615856(0x422)](orderBy,_0x615856(0x35c),'asc')),_0x81572d=await _0x14a8bc[_0x615856(0x2ad)](getDocs,_0x30a6d6),_0x3b4a08=_0x81572d[_0x615856(0x29d)][_0x615856(0x326)](_0x1a6542=>_0x1a6542[_0x615856(0x362)]()),_0x40ad7f={};_0x3b4a08[_0x615856(0x490)](_0x5166ca=>{const _0x359576=_0x615856;if(!_0x40ad7f[_0x5166ca[_0x359576(0x279)]])_0x40ad7f[_0x5166ca[_0x359576(0x279)]]={};_0x40ad7f[_0x5166ca[_0x359576(0x279)]][_0x5166ca[_0x359576(0x35c)]]=_0x5166ca;});let _0x3f0592='',_0x3f0bbe=_0x442ed5['split']('-')[_0x615856(0x326)](Number),_0x4e795=new Date(_0x3f0bbe[0x0],_0x14a8bc[_0x615856(0x23f)](_0x3f0bbe[0x1],0x1),_0x3f0bbe[0x2]);_0x4e795['setHours'](0x0,0x0,0x0,0x0);let _0x2f6f0c=_0x34ac70[_0x615856(0x3ba)]('-')[_0x615856(0x326)](Number);const _0x2f6509=new Date(_0x2f6f0c[0x0],_0x2f6f0c[0x1]-0x1,_0x2f6f0c[0x2]);_0x2f6509['setHours'](0x0,0x0,0x0,0x0);while(_0x14a8bc[_0x615856(0x482)](_0x4e795,_0x2f6509)){const _0x55b3eb=formatDateToISO(_0x4e795),_0x4b8ed0=_0x55b3eb[_0x615856(0x3ba)]('-')[_0x615856(0x351)]()[_0x615856(0x3a9)]('/'),_0x4723d4=_0x14a8bc[_0x615856(0x31f)](getDayOfWeekString,_0x55b3eb);if(_0x14a8bc[_0x615856(0x3e0)](_0x4723d4,'CN')){if(_0x14a8bc[_0x615856(0x232)](_0xc5a8f7,'ALL'))for(let _0x3fae4b=0x1;_0x14a8bc[_0x615856(0x1f9)](_0x3fae4b,0x8);_0x3fae4b++){const _0x29d8ea=_0x40ad7f[_0x55b3eb]?_0x40ad7f[_0x55b3eb][_0x14a8bc[_0x615856(0x358)](String,_0x3fae4b)]:null,_0x3937fd=_0x14a8bc[_0x615856(0x462)](_0x3fae4b,0x1),_0x36d7a2=_0x3937fd?_0x14a8bc[_0x615856(0x338)]:'';finalDisplayData[_0x615856(0x23d)]({'ngayDay':_0x55b3eb,'tietHoc':_0x3fae4b,'lopDay':_0xc5a8f7,'monHoc':_0x29d8ea?_0x29d8ea[_0x615856(0x344)]:null,'teacherName':_0x29d8ea?_0x29d8ea[_0x615856(0x2f2)]:null,'tenBaiDay':_0x29d8ea?_0x29d8ea[_0x615856(0x37e)]:null,'danhGia':_0x29d8ea?_0x29d8ea[_0x615856(0x24d)]:null,'nhanXet':_0x29d8ea?_0x29d8ea[_0x615856(0x33d)]:null,'isFirstRowOfDay':_0x3937fd}),_0x29d8ea?_0x3f0592+=_0x615856(0x42f)+_0x36d7a2+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x22>'+(_0x3937fd?_0x4b8ed0:'')+_0x615856(0x2e5)+_0x3fae4b+_0x615856(0x26e)+_0x29d8ea[_0x615856(0x273)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x22>'+_0x29d8ea[_0x615856(0x344)]+'\x20('+_0x29d8ea[_0x615856(0x2f2)]+_0x615856(0x245)+_0x29d8ea[_0x615856(0x37e)]+_0x615856(0x26e)+(_0x29d8ea['danhGia']||'')+_0x615856(0x26e)+(_0x29d8ea['nhanXet']||'')+_0x615856(0x395):_0x3f0592+='<tr\x20class=\x22'+_0x36d7a2+_0x615856(0x308)+(_0x3937fd?_0x4b8ed0:'')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x22>Tiết\x20'+_0x3fae4b+_0x615856(0x26e)+_0xc5a8f7+'</td>\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x22></td>\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x22></td>\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x22></td>\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x22></td>\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>';}else for(let _0x443838=0x1;_0x14a8bc[_0x615856(0x482)](_0x443838,0x8);_0x443838++){const _0x432f8e=_0x40ad7f[_0x55b3eb]?_0x40ad7f[_0x55b3eb][_0x14a8bc[_0x615856(0x220)](String,_0x443838)]:null;if(_0x432f8e){const _0x33ea89=_0x14a8bc[_0x615856(0x462)](_0x443838,0x1),_0x228ea2=_0x33ea89?_0x14a8bc[_0x615856(0x338)]:'';finalDisplayData[_0x615856(0x23d)]({..._0x432f8e,'isFirstRowOfDay':_0x33ea89}),_0x3f0592+='<tr\x20class=\x22'+_0x228ea2+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x22>'+(_0x33ea89?_0x4b8ed0:'')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x22>Tiết\x20'+_0x443838+_0x615856(0x26e)+_0x432f8e[_0x615856(0x273)]+_0x615856(0x26e)+_0x432f8e['monHoc']+'\x20('+_0x432f8e[_0x615856(0x2f2)]+_0x615856(0x245)+_0x432f8e[_0x615856(0x37e)]+_0x615856(0x26e)+(_0x432f8e[_0x615856(0x24d)]||'')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x22>'+(_0x432f8e[_0x615856(0x33d)]||'')+_0x615856(0x395);}}}_0x4e795[_0x615856(0x3ae)](_0x14a8bc[_0x615856(0x495)](_0x4e795[_0x615856(0x3ee)](),0x1));}if(!_0x3f0592){const _0x76eb1b=_0x14a8bc[_0x615856(0x49a)](_0xc5a8f7,_0x14a8bc[_0x615856(0x324)])?_0x14a8bc['Nhiqa']:_0x615856(0x354)+_0xc5a8f7;_0x40ddb4[_0x615856(0x3cf)]='<tr><td\x20colspan=\x227\x22\x20class=\x22px-6\x20py-4\x20text-center\x22>Không\x20có\x20dữ\x20liệu\x20SĐB\x20nào\x20để\x20hiển\x20thị\x20cho\x20'+_0x76eb1b+_0x615856(0x418);}else _0x40ddb4[_0x615856(0x3cf)]=_0x3f0592;_0x457830[_0x615856(0x2f0)][_0x615856(0x36c)]=_0x14a8bc[_0x615856(0x365)];}catch(_0x46a006){console[_0x615856(0x295)](_0x615856(0x2bb),_0x46a006),_0x40ddb4[_0x615856(0x3cf)]=_0x14a8bc[_0x615856(0x420)],finalDisplayData=[];}}function handleDownloadClassSDB(){const _0x5f4b00=_0x1d5f,_0x1cc07e={'iMXUR':function(_0x552db8,_0x38d034){return _0x552db8===_0x38d034;},'ETSQA':function(_0x924947,_0x5e9015){return _0x924947(_0x5e9015);},'dYGJd':_0x5f4b00(0x263),'lGuji':'ALL','AiBBl':'TOAN_TRUONG','cQsqL':function(_0x15a25f,_0x4cdab5,_0x2d27a8){return _0x15a25f(_0x4cdab5,_0x2d27a8);},'HcFhx':function(_0x37fb9a,_0x3b8bbd,_0x4a075e,_0x361f00){return _0x37fb9a(_0x3b8bbd,_0x4a075e,_0x361f00);}};if(_0x1cc07e[_0x5f4b00(0x321)](finalDisplayData[_0x5f4b00(0x3ff)],0x0)){_0x1cc07e[_0x5f4b00(0x228)](alert,_0x5f4b00(0x3c8));return;}const _0x35f3c7=document['getElementById'](_0x1cc07e[_0x5f4b00(0x265)])['value'],_0x4330af=_0x1cc07e[_0x5f4b00(0x321)](_0x35f3c7,_0x1cc07e[_0x5f4b00(0x208)])?_0x1cc07e[_0x5f4b00(0x249)]:_0x35f3c7,_0x4d9729='SDB_'+_0x4330af+_0x5f4b00(0x23a),_0x4b416f=_0x1cc07e['cQsqL'](convertToHTMLTable,finalDisplayData,_0x4330af);_0x1cc07e[_0x5f4b00(0x39e)](downloadCSV,_0x4b416f,_0x4d9729,!![]),_0x1cc07e[_0x5f4b00(0x228)](alert,'Đã\x20tạo\x20file\x20Excel\x20'+_0x4d9729+_0x5f4b00(0x230));}function getLastTeachingDateForTeacher(_0x10fc01,_0x23d38c,_0xdd3550){const _0x3abdf6=_0x1d5f,_0x40b22b={'fBHYF':function(_0x40bb61,_0xd1b977){return _0x40bb61===_0xd1b977;},'dhAuS':function(_0x3a3a4d,_0x57e4d9){return _0x3a3a4d+_0x57e4d9;},'tUBSh':_0x3abdf6(0x1f4),'HPkoD':function(_0xcf7d54,_0xd28add){return _0xcf7d54>=_0xd28add;},'tHPdv':function(_0x52d837,_0xa34f22){return _0x52d837(_0xa34f22);},'DPTOy':function(_0xe1bc35,_0x119747){return _0xe1bc35(_0x119747);},'rjkgp':function(_0x5015b1,_0x549ce7){return _0x5015b1!==_0x549ce7;},'HmDIx':function(_0x5b0156,_0x3e2835){return _0x5b0156-_0x3e2835;}};if(!_0x10fc01||_0x40b22b['fBHYF'](_0x10fc01[_0x3abdf6(0x3ff)],0x0))return null;const _0xaa5385=new Date(_0x40b22b[_0x3abdf6(0x369)](_0x23d38c,_0x40b22b[_0x3abdf6(0x30f)])),_0x497c2e=new Date(_0x40b22b[_0x3abdf6(0x369)](_0xdd3550,_0x40b22b['tUBSh']));let _0x51a528=new Date(_0x497c2e);while(_0x40b22b[_0x3abdf6(0x2b3)](_0x51a528,_0xaa5385)){const _0x34d202=_0x40b22b[_0x3abdf6(0x272)](formatDateToISO,_0x51a528),_0x511bd9=_0x40b22b['DPTOy'](getDayOfWeekString,_0x34d202);if(_0x40b22b[_0x3abdf6(0x26d)](_0x511bd9,'CN')){const _0x1424cc=_0x10fc01[_0x3abdf6(0x364)](_0x3cfa26=>_0x3cfa26[_0x3abdf6(0x2bc)]<=_0x34d202)[_0x3abdf6(0x49c)]((_0x47b40c,_0x532236)=>_0x47b40c[_0x3abdf6(0x2bc)]<_0x532236['ngayBatDau']?0x1:-0x1)[0x0];if(_0x1424cc)for(let _0x5a8d92=0x1;_0x5a8d92<=0x8;_0x5a8d92++){if(_0x1424cc[_0x511bd9+'_'+_0x5a8d92])return _0x34d202;}}_0x51a528[_0x3abdf6(0x3ae)](_0x40b22b[_0x3abdf6(0x367)](_0x51a528[_0x3abdf6(0x3ee)](),0x1));}return null;}function initMenu6(){const _0x2d4064=_0x1d5f;console['log'](_0x2d4064(0x2db)),runTeacherRankingReport();}async function runTeacherRankingReport(){const _0x5cc7f7=_0x1d5f,_0x2333fb={'qVsfa':function(_0x22b96b){return _0x22b96b();},'WbCjJ':function(_0x479029,_0x46e761,_0x717ec4,_0x520442){return _0x479029(_0x46e761,_0x717ec4,_0x520442);},'bLxNm':_0x5cc7f7(0x2f7),'pfHOY':function(_0x672d1f,_0x33b990){return _0x672d1f(_0x33b990);},'MRJXa':function(_0x2a2eb0,_0x890b9){return _0x2a2eb0===_0x890b9;},'DTNUT':function(_0x410db8,_0x19955a,_0xc2b985,_0x2ee747,_0x57b842){return _0x410db8(_0x19955a,_0xc2b985,_0x2ee747,_0x57b842);},'QpLGT':'users','sQSps':_0x5cc7f7(0x218),'lWkuf':function(_0x60ce4a,_0x2f67e4,_0xc649f3){return _0x60ce4a(_0x2f67e4,_0xc649f3);},'VvhHo':function(_0xf00ead,_0x398041,_0x3d6ae0){return _0xf00ead(_0x398041,_0x3d6ae0);},'wrXgf':'ngayBatDau','Cfvfr':function(_0x524772,_0x2f5c12){return _0x524772(_0x2f5c12);},'LvdwI':function(_0x1c7ec2,_0x3a4be0){return _0x1c7ec2(_0x3a4be0);},'SpXYM':function(_0x10530d,_0x195d97,_0x2c8835,_0x1eae15){return _0x10530d(_0x195d97,_0x2c8835,_0x1eae15);},'CnPQe':function(_0x1103e3,_0x463d4e,_0x456e6e,_0x519fed){return _0x1103e3(_0x463d4e,_0x456e6e,_0x519fed);},'KZpLD':_0x5cc7f7(0x279),'OkayD':function(_0x518444,_0x2e5748,_0x3f5133,_0x469236){return _0x518444(_0x2e5748,_0x3f5133,_0x469236);},'OfOjK':function(_0x283d36,_0x290c4b,_0x22d6a8,_0x1dbbe8){return _0x283d36(_0x290c4b,_0x22d6a8,_0x1dbbe8);},'MwqYg':function(_0x130788,_0x54a8b3){return _0x130788+_0x54a8b3;},'FWxSA':_0x5cc7f7(0x1f4),'LgWOG':function(_0x38e28a,_0x59756e){return _0x38e28a<=_0x59756e;},'vPKWj':function(_0x51b60b,_0x3fbb76){return _0x51b60b(_0x3fbb76);},'jUDZa':function(_0x2508a7,_0x3bb497){return _0x2508a7!==_0x3bb497;},'PnLYd':function(_0x53b12c,_0xcb8fa2){return _0x53b12c*_0xcb8fa2;},'hCood':function(_0x2efb6e,_0x3e127c){return _0x2efb6e/_0x3e127c;},'TYAlM':function(_0x4637a4,_0xf6b215){return _0x4637a4(_0xf6b215);}};if(!currentUserId)return;const _0x45bfb1=document[_0x5cc7f7(0x2c6)](_0x5cc7f7(0x466));if(!_0x45bfb1)return;const {startDate:_0x32857f,endDate:_0x1a9a27}=_0x2333fb[_0x5cc7f7(0x421)](getAcademicYearRange),_0x47b75f=_0x32857f[_0x5cc7f7(0x3ba)]('-')[0x0]+'-'+_0x1a9a27['split']('-')[0x0];_0x45bfb1[_0x5cc7f7(0x3cf)]=_0x5cc7f7(0x2fa)+_0x47b75f+')</td></tr>';try{const _0x4fa263=_0x2333fb[_0x5cc7f7(0x33e)](doc,db,_0x2333fb['bLxNm'],'user_list_doc'),_0x24af4e=await _0x2333fb['pfHOY'](getDoc,_0x4fa263);if(!_0x24af4e['exists']()||!_0x24af4e['data']()||!_0x24af4e[_0x5cc7f7(0x362)]()[_0x5cc7f7(0x46b)]){_0x45bfb1['innerHTML']=_0x5cc7f7(0x486);return;}const _0x219d93=_0x24af4e['data']()[_0x5cc7f7(0x46b)],_0x26527d=Object[_0x5cc7f7(0x22b)](_0x219d93);if(_0x2333fb[_0x5cc7f7(0x44e)](_0x26527d[_0x5cc7f7(0x3ff)],0x0)){_0x45bfb1[_0x5cc7f7(0x3cf)]=_0x5cc7f7(0x22e);return;}_0x45bfb1[_0x5cc7f7(0x3cf)]=_0x5cc7f7(0x24b)+_0x26527d[_0x5cc7f7(0x3ff)]+_0x5cc7f7(0x24e);const _0x2c5cc2={},_0x4ce618=_0x219d93,_0x3ffc35=[];for(const _0x4ddd40 of _0x26527d){const _0x2a5480=_0x2333fb[_0x5cc7f7(0x2a0)](collection,db,_0x2333fb[_0x5cc7f7(0x3b0)],_0x4ddd40,_0x2333fb['sQSps']),_0x47cf32=_0x2333fb[_0x5cc7f7(0x257)](query,_0x2a5480,_0x2333fb[_0x5cc7f7(0x30d)](orderBy,_0x2333fb['wrXgf'],_0x5cc7f7(0x38b)));_0x3ffc35['push'](_0x2333fb['Cfvfr'](getDocs,_0x47cf32)[_0x5cc7f7(0x292)](_0x38e385=>{const _0x3e88ad=_0x5cc7f7;!_0x38e385[_0x3e88ad(0x336)]&&(_0x2c5cc2[_0x4ddd40]=_0x38e385[_0x3e88ad(0x29d)]['map'](_0x2f1993=>_0x2f1993[_0x3e88ad(0x362)]()));}));}await Promise[_0x5cc7f7(0x316)](_0x3ffc35),_0x45bfb1[_0x5cc7f7(0x3cf)]=_0x5cc7f7(0x398);const _0x5b3e90=_0x2333fb['VvhHo'](collection,db,'sdb_entries'),_0x5471ce=_0x2333fb[_0x5cc7f7(0x267)](formatDateToISO,new Date()),_0xd8ab69=_0x5471ce,_0x571895=_0x2333fb[_0x5cc7f7(0x205)](query,_0x5b3e90,_0x2333fb['CnPQe'](where,_0x2333fb[_0x5cc7f7(0x47c)],'>=',_0x32857f),_0x2333fb['OkayD'](where,_0x2333fb[_0x5cc7f7(0x47c)],'<=',_0xd8ab69)),_0x1eeb46=await _0x2333fb['Cfvfr'](getDocs,_0x571895),_0x16385e=new Set();_0x1eeb46['forEach'](_0x20d855=>{const _0xd33c41=_0x5cc7f7,_0x308773=_0x20d855[_0xd33c41(0x362)]();_0x16385e[_0xd33c41(0x2dc)](_0x308773['teacherId']+'_'+_0x308773[_0xd33c41(0x279)]+'_'+_0x308773[_0xd33c41(0x35c)]);});const _0x57f65c=[];for(const [_0x39e3af,_0x1c0b60]of Object['entries'](_0x2c5cc2)){const _0x529336=_0x2333fb[_0x5cc7f7(0x41e)](getLastTeachingDateForTeacher,_0x1c0b60,_0x32857f,_0xd8ab69);if(!_0x529336)continue;let _0x42a7d8=0x0,_0x36b702=0x0,_0x17a1a1=new Date(_0x2333fb['MwqYg'](_0x32857f,_0x2333fb['FWxSA']));const _0x1a0408=new Date(_0x2333fb[_0x5cc7f7(0x3aa)](_0x529336,_0x2333fb[_0x5cc7f7(0x37d)]));while(_0x2333fb[_0x5cc7f7(0x356)](_0x17a1a1,_0x1a0408)){const _0x531627=_0x2333fb[_0x5cc7f7(0x267)](formatDateToISO,_0x17a1a1),_0x244abf=_0x2333fb[_0x5cc7f7(0x388)](getDayOfWeekString,_0x531627),_0x433ca3=_0x1c0b60[_0x5cc7f7(0x364)](_0x5a7567=>_0x5a7567[_0x5cc7f7(0x2bc)]<=_0x531627)[_0x5cc7f7(0x49c)]((_0x5a958d,_0x4e344a)=>_0x5a958d[_0x5cc7f7(0x2bc)]<_0x4e344a[_0x5cc7f7(0x2bc)]?0x1:-0x1)[0x0];if(_0x433ca3&&_0x2333fb[_0x5cc7f7(0x400)](_0x244abf,'CN'))for(let _0x31977e=0x1;_0x2333fb[_0x5cc7f7(0x356)](_0x31977e,0x8);_0x31977e++){const _0x58391d=_0x433ca3[_0x244abf+'_'+_0x31977e];if(_0x58391d){_0x42a7d8++;const _0x3a3bf7=_0x39e3af+'_'+_0x531627+'_'+_0x31977e;_0x16385e[_0x5cc7f7(0x2a2)](_0x3a3bf7)&&_0x36b702++;}}_0x17a1a1[_0x5cc7f7(0x3ae)](_0x17a1a1[_0x5cc7f7(0x3ee)]()+0x1);}if(_0x42a7d8>0x0){const _0x65b3dc=_0x2333fb[_0x5cc7f7(0x317)](_0x2333fb[_0x5cc7f7(0x374)](_0x36b702,_0x42a7d8),0x64);_0x57f65c[_0x5cc7f7(0x23d)]({'hoTen':_0x4ce618[_0x39e3af]||'GV_'+_0x39e3af[_0x5cc7f7(0x301)](0x0,0x4),'totalScheduled':_0x42a7d8,'totalRecorded':_0x36b702,'completionRate':_0x65b3dc,'missingCount':_0x42a7d8-_0x36b702});}}_0x57f65c[_0x5cc7f7(0x49c)]((_0x1d8fe7,_0x57d1c7)=>_0x57d1c7[_0x5cc7f7(0x204)]-_0x1d8fe7[_0x5cc7f7(0x204)]),_0x2333fb['TYAlM'](renderRankingTable,_0x57f65c);}catch(_0x4ec3a0){console[_0x5cc7f7(0x295)](_0x5cc7f7(0x30b),_0x4ec3a0),_0x45bfb1[_0x5cc7f7(0x3cf)]=_0x5cc7f7(0x2cd);}}function renderRankingTable(_0x32837f){const _0xbaf50e=_0x1d5f,_0xa151c0={'DEDxV':function(_0x32aceb,_0x4cfcfa){return _0x32aceb+_0x4cfcfa;},'EkWeg':function(_0x322274,_0x2caa26){return _0x322274>_0x2caa26;},'SnJKs':_0xbaf50e(0x36b),'vBxwt':'bg-green-50','WDDCF':function(_0x144946,_0xe3d395){return _0x144946+_0xe3d395;},'EJNpw':function(_0x4a67f6,_0x5d618f){return _0x4a67f6===_0x5d618f;},'QYkUl':_0xbaf50e(0x3f9),'HWGdk':'ranking-table-body','ALqzA':'<tr><td\x20colspan=\x225\x22\x20class=\x22text-center\x20p-4\x22>Không\x20tìm\x20thấy\x20dữ\x20liệu\x20xếp\x20hạng\x20nào\x20trong\x20khung\x20thời\x20gian\x20này.</td></tr>'},_0x1ddfe4=document[_0xbaf50e(0x2c6)](_0xa151c0[_0xbaf50e(0x47b)]);if(!_0x1ddfe4)return;if(_0x32837f[_0xbaf50e(0x3ff)]===0x0){_0x1ddfe4[_0xbaf50e(0x3cf)]=_0xa151c0[_0xbaf50e(0x3c2)];return;}let _0x4cc226='';_0x32837f[_0xbaf50e(0x490)]((_0x41b856,_0x2f3f2c)=>{const _0x5ce3cd=_0xbaf50e,_0x15d9f1=_0xa151c0[_0x5ce3cd(0x3b8)](_0x41b856['completionRate'][_0x5ce3cd(0x39c)](0x2),'%'),_0x5abceb=_0xa151c0[_0x5ce3cd(0x27c)](_0x41b856[_0x5ce3cd(0x444)],0x0)?_0xa151c0[_0x5ce3cd(0x38e)]:_0xa151c0[_0x5ce3cd(0x2cb)];_0x4cc226+=_0x5ce3cd(0x42f)+_0x5abceb+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x22>'+_0xa151c0['WDDCF'](_0x2f3f2c,0x1)+_0x5ce3cd(0x296)+_0x41b856[_0x5ce3cd(0x247)]+_0x5ce3cd(0x3b9)+(_0xa151c0[_0x5ce3cd(0x469)](_0x41b856['completionRate'],0x64)?_0xa151c0[_0x5ce3cd(0x419)]:_0x5ce3cd(0x2c4))+'\x22>'+_0x15d9f1+_0x5ce3cd(0x455)+_0x41b856[_0x5ce3cd(0x2e9)]+_0x5ce3cd(0x455)+_0x41b856[_0x5ce3cd(0x34e)]+_0x5ce3cd(0x21e);}),_0x1ddfe4['innerHTML']=_0x4cc226;}function initMenu7(){const _0x3f412e=_0x1d5f,_0x185f19={'SIRbO':'Khởi\x20tạo\x20logic\x20cho\x20Menu\x207:\x20Báo\x20Cáo\x20Thiếu\x20Sót\x20Toàn\x20Trường','XSGVJ':function(_0x443137){return _0x443137();}};console[_0x3f412e(0x231)](_0x185f19[_0x3f412e(0x3c1)]),_0x185f19[_0x3f412e(0x2a9)](runAdminMissingReport);}async function runAdminMissingReport(){const _0x81c290=_0x1d5f,_0x24ecdd={'EVgAT':'admin-report-table-body','MrZjm':function(_0x6f6d93,_0x1eac10,_0x3ec6d9,_0x20b116){return _0x6f6d93(_0x1eac10,_0x3ec6d9,_0x20b116);},'YiPnL':'public_data','MqIWM':_0x81c290(0x486),'KonPE':function(_0x19dbc1,_0x732ecc){return _0x19dbc1===_0x732ecc;},'zQZwh':_0x81c290(0x22e),'CxnSA':_0x81c290(0x46b),'NCrDG':function(_0x532448,_0x10ccc1,_0x18f81e){return _0x532448(_0x10ccc1,_0x18f81e);},'BMYxB':function(_0x4b796d,_0x4bdc8f,_0x358874){return _0x4b796d(_0x4bdc8f,_0x358874);},'huqZs':_0x81c290(0x2bc),'dfyUz':_0x81c290(0x38b),'SmNXz':function(_0x48aa00,_0x18f316){return _0x48aa00(_0x18f316);},'HpJIm':'sdb_entries','mYxTw':function(_0x34affd,_0x323445,_0x39fef7,_0x4cf3fb){return _0x34affd(_0x323445,_0x39fef7,_0x4cf3fb);},'UokWh':_0x81c290(0x279),'KTsrG':function(_0x34641d,_0x801e15){return _0x34641d+_0x801e15;},'byNZL':function(_0x2fc40a,_0x46c281){return _0x2fc40a+_0x46c281;},'PnjMY':_0x81c290(0x1f4),'BADVX':function(_0x1913dc,_0x680017){return _0x1913dc<=_0x680017;},'adYXO':function(_0x185440,_0x1e7e4e){return _0x185440(_0x1e7e4e);},'DyauG':function(_0x4bd757,_0x1f493d){return _0x4bd757(_0x1f493d);},'XSjzi':function(_0x4f0090,_0xfb4af9){return _0x4f0090>_0xfb4af9;},'CiAzC':function(_0x4da52e,_0x1f9537){return _0x4da52e*_0x1f9537;},'JQlpY':function(_0x28a0e7,_0x1e46d7){return _0x28a0e7/_0x1e46d7;},'fasmf':_0x81c290(0x320),'rTtxp':_0x81c290(0x2de),'WZVNW':_0x81c290(0x234),'rNanU':_0x81c290(0x342),'TXClc':_0x81c290(0x200),'NirAk':function(_0xc218a6,_0x20d682){return _0xc218a6&&_0x20d682;},'sWYKJ':function(_0x4593f1,_0x2a476b){return _0x4593f1<_0x2a476b;},'brwPf':_0x81c290(0x2d6),'tPwcE':_0x81c290(0x3a8),'GIyYg':'bg-orange-500\x20h-4\x20rounded-full\x20transition-all\x20duration-500\x20ease-in-out','cEkFZ':_0x81c290(0x227),'HYNlC':_0x81c290(0x2bf),'IKfgJ':function(_0x4bd69c,_0x34b47b){return _0x4bd69c(_0x34b47b);},'CfPgh':'Lỗi\x20chạy\x20báo\x20cáo\x20thiếu\x20sót\x20Admin:','iJZrK':'<tr><td\x20colspan=\x225\x22\x20class=\x22text-center\x20p-4\x20text-red-500\x22>Lỗi!\x20Không\x20thể\x20tải\x20dữ\x20liệu\x20báo\x20cáo.\x20Vui\x20lòng\x20kiểm\x20tra\x20Console\x20(F12).</td></tr>'};if(!currentUserId)return;const _0x17e348=document[_0x81c290(0x2c6)](_0x24ecdd[_0x81c290(0x3da)]);if(!_0x17e348)return;const {startDate:_0x15cfc3,endDate:_0x42ce7e}=getAcademicYearRange(),_0xb961a1=_0x15cfc3[_0x81c290(0x3ba)]('-')[0x0]+'-'+_0x42ce7e[_0x81c290(0x3ba)]('-')[0x0];_0x17e348['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22text-center\x20p-4\x22>Đang\x20tính\x20toán...\x20(Năm\x20học\x20'+_0xb961a1+_0x81c290(0x381),cachedAdminMissingDetails={};try{const _0x557042=_0x24ecdd[_0x81c290(0x47f)](doc,db,_0x24ecdd['YiPnL'],_0x81c290(0x282)),_0x3fc98a=await getDoc(_0x557042);if(!_0x3fc98a['exists']()||!_0x3fc98a[_0x81c290(0x362)]()||!_0x3fc98a[_0x81c290(0x362)]()[_0x81c290(0x46b)]){_0x17e348[_0x81c290(0x3cf)]=_0x24ecdd['MqIWM'];return;}const _0xc7b82e=_0x3fc98a[_0x81c290(0x362)]()[_0x81c290(0x46b)],_0x3e5770=Object['keys'](_0xc7b82e);if(_0x24ecdd[_0x81c290(0x2c9)](_0x3e5770[_0x81c290(0x3ff)],0x0)){_0x17e348[_0x81c290(0x3cf)]=_0x24ecdd[_0x81c290(0x3c4)];return;}_0x17e348['innerHTML']=_0x81c290(0x24b)+_0x3e5770[_0x81c290(0x3ff)]+_0x81c290(0x24e);const _0x456a2a={},_0x5d4bee=_0xc7b82e,_0x48395e=[];for(const _0x43fff1 of _0x3e5770){const _0x500aa3=collection(db,_0x24ecdd[_0x81c290(0x35a)],_0x43fff1,_0x81c290(0x218)),_0x51fb1c=_0x24ecdd[_0x81c290(0x3de)](query,_0x500aa3,_0x24ecdd[_0x81c290(0x3eb)](orderBy,_0x24ecdd['huqZs'],_0x24ecdd[_0x81c290(0x423)]));_0x48395e['push'](_0x24ecdd[_0x81c290(0x429)](getDocs,_0x51fb1c)[_0x81c290(0x292)](_0x32b7c3=>{const _0x296c7c=_0x81c290;!_0x32b7c3[_0x296c7c(0x336)]&&(_0x456a2a[_0x43fff1]=_0x32b7c3['docs'][_0x296c7c(0x326)](_0x58222e=>_0x58222e[_0x296c7c(0x362)]()));}));}await Promise[_0x81c290(0x316)](_0x48395e),_0x17e348[_0x81c290(0x3cf)]=_0x81c290(0x398);const _0x406830=collection(db,_0x24ecdd[_0x81c290(0x47a)]),_0x3d323d=_0x24ecdd[_0x81c290(0x429)](formatDateToISO,new Date()),_0x13024b=_0x3d323d,_0xdd81de=_0x24ecdd[_0x81c290(0x47f)](query,_0x406830,_0x24ecdd[_0x81c290(0x270)](where,_0x81c290(0x279),'>=',_0x15cfc3),where(_0x24ecdd['UokWh'],'<=',_0x13024b)),_0x221ca2=await getDocs(_0xdd81de),_0x46b912=new Set();_0x221ca2[_0x81c290(0x490)](_0x1304e4=>{const _0x3636b7=_0x81c290,_0x35ed75=_0x1304e4[_0x3636b7(0x362)]();_0x46b912['add'](_0x35ed75[_0x3636b7(0x291)]+'_'+_0x35ed75[_0x3636b7(0x279)]+'_'+_0x35ed75[_0x3636b7(0x35c)]);});const _0x3a5db9=[];for(const [_0x382397,_0x1524d2]of Object[_0x81c290(0x2d9)](_0x456a2a)){const _0x26f818=getLastTeachingDateForTeacher(_0x1524d2,_0x15cfc3,_0x13024b);if(!_0x26f818)continue;let _0x3629a5=0x0,_0xf635bb=0x0;const _0x2c7c6c=[];let _0x242154=new Date(_0x24ecdd['KTsrG'](_0x15cfc3,_0x81c290(0x1f4)));const _0x50aaef=new Date(_0x24ecdd[_0x81c290(0x253)](_0x26f818,_0x24ecdd['PnjMY']));while(_0x24ecdd[_0x81c290(0x3f2)](_0x242154,_0x50aaef)){const _0x1e149c=_0x24ecdd[_0x81c290(0x3b2)](formatDateToISO,_0x242154),_0x5b6fd0=_0x24ecdd['DyauG'](getDayOfWeekString,_0x1e149c),_0x1b7c7a=_0x1524d2[_0x81c290(0x364)](_0x3b6446=>_0x3b6446[_0x81c290(0x2bc)]<=_0x1e149c)[_0x81c290(0x49c)]((_0xd626c9,_0x35dd7f)=>_0xd626c9['ngayBatDau']<_0x35dd7f[_0x81c290(0x2bc)]?0x1:-0x1)[0x0];if(_0x1b7c7a&&_0x5b6fd0!=='CN')for(let _0x14930e=0x1;_0x24ecdd['BADVX'](_0x14930e,0x8);_0x14930e++){const _0x5df0c6=_0x1b7c7a[_0x5b6fd0+'_'+_0x14930e];if(_0x5df0c6){_0x3629a5++;const _0x38db5e=_0x382397+'_'+_0x1e149c+'_'+_0x14930e;!_0x46b912[_0x81c290(0x2a2)](_0x38db5e)?_0x2c7c6c[_0x81c290(0x23d)]({'ngay':_0x1e149c,'thu':_0x5b6fd0,'tiet':_0x14930e,'lop':_0x5df0c6}):_0xf635bb++;}}_0x242154[_0x81c290(0x3ae)](_0x242154[_0x81c290(0x3ee)]()+0x1);}if(_0x24ecdd[_0x81c290(0x225)](_0x3629a5,0x0)){const _0x2bfc81=_0x24ecdd[_0x81c290(0x23c)](_0xf635bb/_0x3629a5,0x64);_0x3a5db9['push']({'userId':_0x382397,'hoTen':_0x5d4bee[_0x382397]||'GV_'+_0x382397[_0x81c290(0x301)](0x0,0x4),'totalScheduled':_0x3629a5,'totalRecorded':_0xf635bb,'completionRate':_0x2bfc81,'missingCount':_0x2c7c6c['length']}),cachedAdminMissingDetails[_0x382397]=_0x2c7c6c;}}let _0x6066c1=0x0,_0x509e64=0x0,_0x219b67=0x0;_0x3a5db9[_0x81c290(0x490)](_0x1cab7a=>{const _0x104976=_0x81c290;_0x6066c1+=_0x1cab7a['totalScheduled'],_0x509e64+=_0x1cab7a[_0x104976(0x2e9)],_0x219b67+=_0x1cab7a[_0x104976(0x444)];});const _0x4b4524=_0x3a5db9['length'],_0xc3cd2e=_0x24ecdd[_0x81c290(0x225)](_0x6066c1,0x0)?_0x24ecdd['CiAzC'](_0x24ecdd[_0x81c290(0x414)](_0x509e64,_0x6066c1),0x64):0x0;document[_0x81c290(0x2c6)](_0x24ecdd[_0x81c290(0x48f)])[_0x81c290(0x286)]=_0x4b4524,document[_0x81c290(0x2c6)](_0x81c290(0x212))[_0x81c290(0x286)]=_0x6066c1,document['getElementById'](_0x24ecdd[_0x81c290(0x31a)])[_0x81c290(0x286)]=_0x509e64,document[_0x81c290(0x2c6)](_0x24ecdd['WZVNW'])['textContent']=_0x219b67;const _0x9a2327=document['getElementById'](_0x24ecdd[_0x81c290(0x240)]),_0x41456d=document['getElementById'](_0x24ecdd['TXClc']);if(_0x24ecdd[_0x81c290(0x3cd)](_0x9a2327,_0x41456d)){_0x9a2327[_0x81c290(0x2f0)][_0x81c290(0x460)]=_0xc3cd2e['toFixed'](0x2)+'%',_0x41456d[_0x81c290(0x286)]=_0xc3cd2e[_0x81c290(0x39c)](0x2)+'%';if(_0x24ecdd[_0x81c290(0x3a1)](_0xc3cd2e,0x5a))_0x9a2327[_0x81c290(0x3fe)]=_0x24ecdd['brwPf'],_0x41456d['className']=_0x24ecdd[_0x81c290(0x2d5)];else _0xc3cd2e<0x62?(_0x9a2327[_0x81c290(0x3fe)]=_0x24ecdd[_0x81c290(0x3b4)],_0x41456d[_0x81c290(0x3fe)]=_0x24ecdd[_0x81c290(0x2d5)]):(_0x9a2327[_0x81c290(0x3fe)]=_0x24ecdd[_0x81c290(0x26f)],_0x41456d[_0x81c290(0x3fe)]=_0x24ecdd[_0x81c290(0x28c)]);}_0x3a5db9[_0x81c290(0x49c)]((_0x2b56d2,_0x4dd15d)=>_0x4dd15d[_0x81c290(0x444)]-_0x2b56d2[_0x81c290(0x444)]),_0x24ecdd[_0x81c290(0x28e)](renderAdminReportTable,_0x3a5db9);}catch(_0x34abdf){console[_0x81c290(0x295)](_0x24ecdd['CfPgh'],_0x34abdf),_0x17e348[_0x81c290(0x3cf)]=_0x24ecdd[_0x81c290(0x3e8)];}}function renderAdminReportTable(_0x130e43){const _0x56e8f0=_0x1d5f,_0x580d75={'GMwMc':function(_0x25582b,_0x2ccd16){return _0x25582b+_0x2ccd16;},'PKgwh':function(_0x13a7c8,_0xf0585e){return _0x13a7c8>_0xf0585e;},'VRdne':function(_0x1cbf7f,_0x382a60){return _0x1cbf7f>=_0x382a60;},'xZsiz':_0x56e8f0(0x470),'nlZhd':'bg-green-50','TAtKq':'text-red-600\x20font-bold','znaky':'text-green-600','LTZIx':_0x56e8f0(0x33f),'JWMkD':_0x56e8f0(0x3a6),'MhECy':function(_0x259bf0){return _0x259bf0();}},_0x43c510=document[_0x56e8f0(0x2c6)]('admin-report-table-body');if(!_0x43c510)return;if(_0x130e43[_0x56e8f0(0x3ff)]===0x0){_0x43c510[_0x56e8f0(0x3cf)]=_0x580d75[_0x56e8f0(0x202)];return;}let _0x14b87f='';_0x130e43[_0x56e8f0(0x490)](_0x1ac74d=>{const _0x240e6e=_0x56e8f0,_0x4facd3=_0x580d75[_0x240e6e(0x339)](_0x1ac74d['completionRate'][_0x240e6e(0x39c)](0x2),'%');let _0x1fb949='';_0x580d75[_0x240e6e(0x430)](_0x1ac74d[_0x240e6e(0x444)],0x0)?_0x1fb949=_0x580d75[_0x240e6e(0x399)](_0x1ac74d['missingCount'],0x5)?_0x580d75[_0x240e6e(0x33b)]:_0x240e6e(0x36b):_0x1fb949=_0x580d75[_0x240e6e(0x29f)];const _0x3821e0=_0x580d75['PKgwh'](_0x1ac74d['missingCount'],0x0)?_0x580d75[_0x240e6e(0x2ed)]:_0x580d75[_0x240e6e(0x256)];let _0x15235d=_0x1ac74d['missingCount'];_0x580d75[_0x240e6e(0x430)](_0x1ac74d[_0x240e6e(0x444)],0x0)&&(_0x15235d='<button\x20onclick=\x22window.appLogic.showMissingDetails(\x27'+_0x1ac74d[_0x240e6e(0x3d5)]+_0x240e6e(0x337)+_0x1ac74d[_0x240e6e(0x247)]+_0x240e6e(0x468)+_0x1ac74d[_0x240e6e(0x444)]+_0x240e6e(0x396)),_0x14b87f+='<tr\x20class=\x22'+_0x1fb949+_0x240e6e(0x3b5)+_0x1ac74d[_0x240e6e(0x247)]+_0x240e6e(0x455)+_0x1ac74d[_0x240e6e(0x34e)]+_0x240e6e(0x455)+_0x1ac74d['totalRecorded']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x20'+_0x3821e0+'\x22>'+_0x15235d+_0x240e6e(0x455)+_0x4facd3+_0x240e6e(0x21e);}),_0x43c510[_0x56e8f0(0x3cf)]=_0x14b87f,!document[_0x56e8f0(0x2c6)](_0x580d75['JWMkD'])&&document['body'][_0x56e8f0(0x331)]('beforeend',_0x580d75['MhECy'](getMissingDetailsModalHTML));}function getMissingDetailsModalHTML(){return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22missing-details-modal\x22\x20class=\x22fixed\x20inset-0\x20bg-gray-900\x20bg-opacity-75\x20flex\x20items-center\x20justify-center\x20hidden\x20z-50\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-white\x20p-6\x20rounded-2xl\x20shadow-2xl\x20max-w-2xl\x20w-full\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-between\x20items-center\x20mb-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20id=\x22modal-title\x22\x20class=\x22text-xl\x20font-bold\x20text-indigo-600\x22>Chi\x20Tiết\x20Thiếu\x20Sót</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22document.getElementById(\x27missing-details-modal\x27).classList.add(\x27hidden\x27)\x22\x20class=\x22text-gray-500\x20hover:text-gray-700\x20text-2xl\x20font-semibold\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22overflow-y-auto\x20max-h-96\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table\x20class=\x22min-w-full\x20divide-y\x20divide-gray-200\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead\x20class=\x22bg-gray-50\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22px-4\x20py-2\x20text-left\x20text-xs\x20font-bold\x20text-gray-600\x20uppercase\x20tracking-wider\x22>Ngày</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22px-4\x20py-2\x20text-left\x20text-xs\x20font-bold\x20text-gray-600\x20uppercase\x20tracking-wider\x22>Thứ</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22px-4\x20py-2\x20text-left\x20text-xs\x20font-bold\x20text-gray-600\x20uppercase\x20tracking-wider\x22>Tiết</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22px-4\x20py-2\x20text-left\x20text-xs\x20font-bold\x20text-gray-600\x20uppercase\x20tracking-wider\x22>Lớp</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22modal-table-body\x22\x20class=\x22bg-white\x20divide-y\x20divide-gray-200\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-6\x20flex\x20justify-end\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22document.getElementById(\x27missing-details-modal\x27).classList.add(\x27hidden\x27)\x22\x20class=\x22py-2\x20px-4\x20bg-gray-300\x20text-gray-800\x20font-semibold\x20rounded-lg\x20hover:bg-gray-400\x20transition\x20duration-150\x22>Đóng</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';}function showMissingDetails(_0x3111bf,_0x42d648){const _0x6900a3=_0x1d5f,_0x24c4e4={'HLZIi':_0x6900a3(0x3a6),'MVTzw':_0x6900a3(0x440),'ZAkfN':_0x6900a3(0x2c5),'PAILD':function(_0x196e4d,_0x5f3cf6){return _0x196e4d||_0x5f3cf6;},'znKvO':function(_0x14b63b,_0xdd588e){return _0x14b63b(_0xdd588e);},'oIINL':_0x6900a3(0x378),'qCejL':'hidden'},_0x143494=document['getElementById'](_0x24c4e4[_0x6900a3(0x3be)]),_0x18bfc8=document[_0x6900a3(0x2c6)](_0x24c4e4['MVTzw']),_0x11a9f0=document['getElementById'](_0x24c4e4[_0x6900a3(0x368)]),_0x52d599=cachedAdminMissingDetails[_0x3111bf];if(_0x24c4e4[_0x6900a3(0x3c6)](!_0x143494,!_0x11a9f0)||!_0x52d599){_0x24c4e4[_0x6900a3(0x415)](alert,_0x24c4e4['oIINL']);return;}_0x18bfc8[_0x6900a3(0x286)]=_0x6900a3(0x3c3)+_0x42d648+'\x20('+_0x52d599[_0x6900a3(0x3ff)]+_0x6900a3(0x251);let _0x504591='';_0x52d599[_0x6900a3(0x490)](_0x1adc3e=>{const _0x297c73=_0x6900a3,_0xcf375d=_0x1adc3e['ngay'][_0x297c73(0x3ba)]('-')[_0x297c73(0x351)]()[_0x297c73(0x3a9)]('/');_0x504591+=_0x297c73(0x3b3)+_0xcf375d+_0x297c73(0x472)+_0x1adc3e[_0x297c73(0x493)]+_0x297c73(0x472)+_0x1adc3e[_0x297c73(0x386)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-4\x20py-2\x20whitespace-nowrap\x22>'+_0x1adc3e[_0x297c73(0x3e6)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>';}),_0x11a9f0['innerHTML']=_0x504591,_0x143494[_0x6900a3(0x2eb)][_0x6900a3(0x299)](_0x24c4e4['qCejL']);}function initMenu9(){const _0x29d85f=_0x1d5f,_0x48724d={'fCmvn':_0x29d85f(0x278),'OEOfh':_0x29d85f(0x43c),'IIZeC':function(_0x9d9272,_0x5fc89e){return _0x9d9272(_0x5fc89e);},'aySpU':_0x29d85f(0x48d),'zbrWl':function(_0x2d6643){return _0x2d6643();}};console[_0x29d85f(0x231)](_0x48724d[_0x29d85f(0x2e2)]);const _0x315aee=document[_0x29d85f(0x2c6)](_0x48724d['OEOfh']);_0x315aee&&(!_0x315aee[_0x29d85f(0x27d)]&&(_0x315aee[_0x29d85f(0x27d)]=_0x48724d['IIZeC'](formatDateToISO,new Date())));const _0x10ff8f=document[_0x29d85f(0x2c6)](_0x29d85f(0x45e));_0x10ff8f&&(_0x10ff8f[_0x29d85f(0x355)]('click',handleSearchTKB),_0x10ff8f['addEventListener'](_0x48724d[_0x29d85f(0x426)],handleSearchTKB)),_0x48724d[_0x29d85f(0x3c0)](loadTeacherListForSelect);}async function loadTeacherListForSelect(){const _0x44e887=_0x1d5f,_0x260ead={'kyaig':function(_0x35e66f,_0x451425){return _0x35e66f!==_0x451425;},'mpzTj':_0x44e887(0x325),'RYlYp':'<option\x20value=\x22\x22>--\x20Đang\x20tải\x20GV...\x20--</option>','tsVkF':function(_0x3efb6b,_0x48ccee,_0x51198b,_0x4d168c){return _0x3efb6b(_0x48ccee,_0x51198b,_0x4d168c);},'TwJUL':_0x44e887(0x2f7),'fugLi':_0x44e887(0x282),'fVWMf':function(_0x22e802,_0x34be47){return _0x22e802(_0x34be47);},'XSiwL':'<option\x20value=\x22\x22>--\x20Lỗi:\x20Không\x20tìm\x20thấy\x20danh\x20sách\x20GV\x20--</option>','Nkhxo':_0x44e887(0x334),'vbUFw':_0x44e887(0x2d3)},_0x413d94=document[_0x44e887(0x2c6)](_0x260ead['mpzTj']);if(!_0x413d94)return;_0x413d94['innerHTML']=_0x260ead[_0x44e887(0x1f5)];try{const _0x353ed7=_0x260ead[_0x44e887(0x375)](doc,db,_0x260ead[_0x44e887(0x1fa)],_0x260ead['fugLi']),_0x2ef999=await _0x260ead[_0x44e887(0x345)](getDoc,_0x353ed7);if(_0x2ef999[_0x44e887(0x239)]()&&_0x2ef999[_0x44e887(0x362)]()&&_0x2ef999[_0x44e887(0x362)]()[_0x44e887(0x46b)]){const _0x568986=_0x2ef999['data']()[_0x44e887(0x46b)];_0x413d94['innerHTML']=_0x44e887(0x2f5);const _0x1722c3=Object[_0x44e887(0x2d9)](_0x568986)['sort'](([,_0x325ef9],[,_0x504cab])=>_0x325ef9['localeCompare'](_0x504cab));_0x1722c3['forEach'](([_0x1935fe,_0x11f40b])=>{const _0x2cb45f=_0x44e887;if(_0x260ead[_0x2cb45f(0x35f)](_0x1935fe,currentUserId)){const _0x303ca8=document['createElement'](_0x2cb45f(0x2da));_0x303ca8['value']=_0x1935fe,_0x303ca8['textContent']=_0x11f40b,_0x413d94[_0x2cb45f(0x2c3)](_0x303ca8);}});}else _0x413d94[_0x44e887(0x3cf)]=_0x260ead[_0x44e887(0x2ff)];}catch(_0x3ee852){console[_0x44e887(0x295)](_0x260ead[_0x44e887(0x216)],_0x3ee852),_0x413d94[_0x44e887(0x3cf)]=_0x260ead['vbUFw'];}}async function handleSearchTKB(){const _0x2fe673=_0x1d5f,_0x5370a4={'VKBcT':_0x2fe673(0x3a0),'ySHYs':_0x2fe673(0x45d),'eETtO':_0x2fe673(0x33a),'EXfAN':_0x2fe673(0x3a7),'tZNbY':_0x2fe673(0x224),'fPtHm':function(_0x23c43b,_0x50fd89){return _0x23c43b||_0x50fd89;},'HPdUa':function(_0x433b5c,_0x4c0c14){return _0x433b5c(_0x4c0c14);},'SeOkt':'Vui\x20lòng\x20chọn\x20đầy\x20đủ\x20Giáo\x20Viên\x20và\x20Ngày.','ZdEVa':_0x2fe673(0x325),'VRHAu':_0x2fe673(0x3af),'YsLwC':_0x2fe673(0x218),'vFISK':function(_0x41b04e,_0x503e17,_0x511080){return _0x41b04e(_0x503e17,_0x511080);},'MWYid':'ngayBatDau','xkTTX':function(_0x31ec88,_0x2d90ef){return _0x31ec88(_0x2d90ef);},'zgzDc':function(_0x3d24c3,_0x53ca55){return _0x3d24c3===_0x53ca55;},'qYKqi':_0x2fe673(0x3ea)},_0x519af9=document['getElementById'](_0x5370a4[_0x2fe673(0x494)]),_0x319bbb=document[_0x2fe673(0x2c6)](_0x5370a4[_0x2fe673(0x2be)])[_0x2fe673(0x3ed)](_0x5370a4[_0x2fe673(0x20a)]),_0x3a6e78=document['getElementById'](_0x2fe673(0x325))[_0x2fe673(0x27d)],_0xc2b572=document[_0x2fe673(0x2c6)](_0x2fe673(0x43c))[_0x2fe673(0x27d)];if(_0x5370a4['fPtHm'](!_0x3a6e78,!_0xc2b572)){_0x5370a4[_0x2fe673(0x313)](alert,_0x5370a4[_0x2fe673(0x277)]);return;}const _0x1a72a8=document[_0x2fe673(0x2c6)](_0x5370a4[_0x2fe673(0x45f)]),_0x17db29=_0x1a72a8[_0x2fe673(0x2c0)][_0x1a72a8['selectedIndex']][_0x2fe673(0x329)];_0x319bbb[_0x2fe673(0x286)]='Đang\x20tải\x20TKB\x20của\x20GV\x20'+_0x17db29+'...',_0x519af9['innerHTML']=_0x5370a4['VRHAu'];try{const _0x592064=collection(db,_0x2fe673(0x46b),_0x3a6e78,_0x5370a4[_0x2fe673(0x229)]),_0x3ac07c=query(_0x592064,_0x5370a4['vFISK'](orderBy,_0x5370a4[_0x2fe673(0x448)],_0x2fe673(0x38b))),_0x4d3432=await _0x5370a4['xkTTX'](getDocs,_0x3ac07c),_0x2bb36e=_0x4d3432[_0x2fe673(0x29d)][_0x2fe673(0x326)](_0x1c98b4=>_0x1c98b4[_0x2fe673(0x362)]());if(_0x5370a4[_0x2fe673(0x30e)](_0x2bb36e[_0x2fe673(0x3ff)],0x0)){_0x319bbb[_0x2fe673(0x286)]=_0x2fe673(0x459)+_0x17db29,_0x519af9[_0x2fe673(0x3cf)]=_0x2fe673(0x416);return;}const _0x35b93c=_0x2bb36e['filter'](_0x140c1b=>_0x140c1b[_0x2fe673(0x2bc)]<=_0xc2b572)['sort']((_0x164539,_0x30f1a0)=>_0x164539[_0x2fe673(0x2bc)]<_0x30f1a0[_0x2fe673(0x2bc)]?0x1:-0x1)[0x0];if(!_0x35b93c){_0x319bbb[_0x2fe673(0x286)]=_0x2fe673(0x459)+_0x17db29,_0x519af9[_0x2fe673(0x3cf)]=_0x2fe673(0x390)+_0xc2b572[_0x2fe673(0x3ba)]('-')[_0x2fe673(0x351)]()[_0x2fe673(0x3a9)]('/')+_0x2fe673(0x36d);return;}const _0x56bbf5=_0x35b93c[_0x2fe673(0x2bc)][_0x2fe673(0x3ba)]('-')[_0x2fe673(0x351)]()[_0x2fe673(0x3a9)]('/');_0x319bbb[_0x2fe673(0x286)]=_0x2fe673(0x459)+_0x17db29+_0x2fe673(0x43a)+_0x56bbf5+')';let _0x34dafe='';const _0x369410=['T2','T3','T4','T5','T6','T7'];for(let _0x3e7034=0x1;_0x3e7034<=0x8;_0x3e7034++){_0x34dafe+=_0x2fe673(0x46d)+_0x3e7034+_0x2fe673(0x439),_0x369410['forEach'](_0x5b8f81=>{const _0xe2f37f=_0x2fe673,_0x3551d4=_0x5b8f81+'_'+_0x3e7034,_0x263e18=_0x35b93c[_0x3551d4]||'',_0x137dbb=_0x263e18?_0xe2f37f(0x281):_0x5370a4[_0xe2f37f(0x2c7)];_0x34dafe+=_0xe2f37f(0x2f8)+_0x137dbb+'\x22>'+(_0x263e18||_0x5370a4['ySHYs'])+'</td>';}),_0x34dafe+=_0x2fe673(0x2d7);}_0x519af9[_0x2fe673(0x3cf)]=_0x34dafe;}catch(_0x1ff536){console[_0x2fe673(0x295)](_0x5370a4[_0x2fe673(0x38f)],_0x1ff536),_0x319bbb[_0x2fe673(0x286)]=_0x2fe673(0x452),_0x519af9['innerHTML']=_0x2fe673(0x293);}}window['appLogic']={'setLogicUserId':setLogicUserId,'initMenu1':initMenu1,'initMenu2':initMenu2,'initMenu3':initMenu3,'initMenu4':initMenu4,'initMenu5':initMenu5,'initMenu6':initMenu6,'initMenu7':initMenu7,'initMenu9':initMenu9,'handleEditEntry':handleEditEntry,'handleDeleteEntry':handleDeleteEntry,'showMissingDetails':showMissingDetails};